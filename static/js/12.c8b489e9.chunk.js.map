{"version":3,"sources":["../../file-xliff/dist/es/index-d0ea0fb0.js"],"names":["options","currentElement","sax","fn","module","exports","createCommonjsModule","parser","strict","opt","SAXParser","SAXStream","createStream","MAX_BUFFER_LENGTH","Stream","buffers","this","i","l","length","clearBuffers","q","c","bufferCheckPosition","lowercase","lowercasetags","looseCase","tags","closed","closedRoot","sawRoot","tag","error","noscript","state","S","BEGIN","strictEntities","ENTITIES","Object","create","XML_ENTITIES","attribList","xmlns","ns","rootNS","trackPosition","position","line","column","emit","EVENTS","o","F","prototype","keys","a","hasOwnProperty","push","end","_end","write","chunk","_typeof","toString","charAt","BEGIN_WHITESPACE","beginWhiteSpace","TEXT","starti","textNode","substring","isWhitespace","strictFail","TEXT_ENTITY","OPEN_WAKA","startTagPosition","SCRIPT","SCRIPT_ENDING","script","CLOSE_TAG","SGML_DECL","sgmlDecl","isMatch","nameStart","OPEN_TAG","tagName","PROC_INST","procInstName","procInstBody","pad","Array","join","toUpperCase","emitNode","CDATA","cdata","COMMENT","comment","DOCTYPE","doctype","isQuote","SGML_DECL_QUOTED","DOCTYPE_DTD","DOCTYPE_QUOTED","DOCTYPE_DTD_QUOTED","COMMENT_ENDING","COMMENT_ENDED","textopts","CDATA_ENDING","CDATA_ENDING_2","PROC_INST_ENDING","PROC_INST_BODY","name","body","nameBody","newTag","openTag","OPEN_TAG_SLASH","ATTRIB","closeTag","attribName","attribValue","ATTRIB_NAME","ATTRIB_VALUE","attrib","ATTRIB_NAME_SAW_WHITE","attributes","value","ATTRIB_VALUE_QUOTED","ATTRIB_VALUE_UNQUOTED","ATTRIB_VALUE_ENTITY_Q","ATTRIB_VALUE_CLOSED","isAttribEnd","ATTRIB_VALUE_ENTITY_U","CLOSE_TAG_SAW_WHITE","notMatch","returnState","buffer","parseEntity","entity","entityBody","entityStart","Error","maxAllowed","Math","max","maxActual","len","closeText","m","checkBufferLength","resume","close","flush","stream","ex","streamWraps","filter","ev","apply","_parser","writable","readable","me","onend","onerror","er","_decoder","forEach","defineProperty","get","set","h","removeAllListeners","on","enumerable","configurable","constructor","data","Buffer","isBuffer","SD","string_decoder","StringDecoder","handler","indexOf","args","arguments","splice","call","XML_NAMESPACE","XMLNS_NAMESPACE","xml","regex","test","s","STATE","COMMENT_STARTING","key","e","String","fromCharCode","event","nodeType","text","trim","normalize","replace","message","parent","qname","attribute","qualName","split","prefix","local","qn","selfClosing","uri","JSON","stringify","p","nv","isSelfClosing","toLowerCase","t","closeTo","pop","x","n","num","entityLC","numStr","slice","parseInt","isNaN","fromCodePoint","result","stringFromCharCode","floor","highSurrogate","lowSurrogate","MAX_SIZE","codeUnits","index","codePoint","Number","isFinite","RangeError","arrayHelper","isArray","optionsHelper","copy","item","spaces","alwaysArray","compact","isArray$1","nativeType","nValue","bValue","addField","type","instructionFn","temp","instructionNameFn","elementsKey","element","typeKey","nameKey","instructionHasAttributes","attributesKey","instructionKey","addParent","parentKey","manipulateAttributes","attributesFn","nativeTypeAttributes","attributeValueFn","attributeNameFn","onInstruction","instruction","match","attrsRegExp","exec","ignoreDeclaration","declarationKey","ignoreInstruction","onStartElement","elementNameFn","ignoreAttributes","alwaysChildren","onText","ignoreText","captureSpacesBetweenElements","sanitize","onComment","ignoreComment","onEndElement","parentElement","onCdata","ignoreCdata","onDoctype","ignoreDoctype","onError","note","xml2js","userOptions","validateOptions","onopentag","ontext","oncomment","onclosetag","oncdata","ondoctype","onprocessinginstruction","currentElement$1","currentElementName","isArray$2","writeIndentation","depth","firstLine","writeAttributes","attr","attrName","quote","undefined","noQuotesForNativeAttributes","indentAttributes","writeDeclaration","declaration","writeInstruction","instructionName","instructionValue","writeComment","commentFn","writeCdata","cdataFn","writeDoctype","doctypeFn","writeText","textFn","writeElements","elements","reduce","indent","elementName","withClosingTag","fullTagEmptyElementFn","fullTagEmptyElement","indentText","indentCdata","indentInstruction","hasContent","writeElement","commentKey","doctypeKey","cdataKey","textKey","hasContentCompact","anyContent","writeElementCompact","writeElementsCompact","nodes","_elementTypeToTagMap","_factories","js2xml","js","validateOptions$2","lib","ElementTypes","makeInlineElement","contents","obj","contentsObj","dataObj","assign","_defineProperty$1","ElementTypes2","elementTypeToTagMap","tagToElementTypeMap","ph","pc","sc","ec","factories","elementTypeToTag","types","extractValue","valueElements","elementTypeInfo","map","valueElement","substr","lastIndexOf","elementType","inlineElementFactory","_elementTypeToTagMap$1","_factories$1","xliffToJsClb","str","cb","err","xmlObj","xliffRoot","find","ele","srcLang","trgLang","sourceLanguage","targetLanguage","child","resources","file","namespace","id","initValues","source","target","createUnits","unit","additionalAttributes","segment","parse","createUnit","groupUnits","xliffToJs","Promise","resolve","reject","ret","_defineProperty$2","ElementTypes12","g","bx","bpt","ept","mrk","xliff12ToJsClb","original","bodyChildren","createUnits$1","childElements","transUnit","children","groupUnit","addAdditionalAttributes","createGroupTag","jsUnit","xliff12ToJs","makeElement","el","makeText","makeValue","content","elementTag","attrsSrc","attrs","attrKey","_attrsSrc","_contents","_attrs","segmentKey","'","escape","_char","RegExp","js2xliffClb","root","version","nsName","f","createUnitTags","unitElements","group","createGroupUnitTag","subEle","unshift","createUnitTag","js2xliff","jsToXliff12Clb","xmlLangAttr","b","createUnitTags$1","fileAttributes","datatype","resource","createGroupUnitTag$1","u","sourceAttributes","targetAttributes","createTransUnitTag$1","jsToXliff12","ofjs","what","res","nsKeys","nsKey","targetOfjs","sourceOfjs","createjsClb","srcLng","trgLng","srcKeys","trgKeys","srcKey","createjs","createjs$1","js2xliff$1","createxliffClb","createxliff","createjs$2","jsToXliff12$1","createxliff12Clb","createxliff12","xliff2js"],"mappings":"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","file":"static/js/12.c8b489e9.chunk.js","sourcesContent":["import { c as _typeof } from './index-ccbae4e9.js';\nimport '@inweso-dev/i18n-utils';\nimport stream from 'stream';\nimport string_decoder from 'string_decoder';\n\nfunction createCommonjsModule(fn, module) {\n\treturn module = { exports: {} }, fn(module, module.exports), module.exports;\n}\n\nvar sax = createCommonjsModule(function (module, exports) {\n\n  (function (sax) {\n    // wrapper for non-node envs\n    sax.parser = function (strict, opt) {\n      return new SAXParser(strict, opt);\n    };\n\n    sax.SAXParser = SAXParser;\n    sax.SAXStream = SAXStream;\n    sax.createStream = createStream; // When we pass the MAX_BUFFER_LENGTH position, start checking for buffer overruns.\n    // When we check, schedule the next check for MAX_BUFFER_LENGTH - (max(buffer lengths)),\n    // since that's the earliest that a buffer overrun could occur.  This way, checks are\n    // as rare as required, but as often as necessary to ensure never crossing this bound.\n    // Furthermore, buffers are only tested at most once per write(), so passing a very\n    // large string into write() might have undesirable effects, but this is manageable by\n    // the caller, so it is assumed to be safe.  Thus, a call to write() may, in the extreme\n    // edge case, result in creating at most one complete copy of the string passed in.\n    // Set to Infinity to have unlimited buffers.\n\n    sax.MAX_BUFFER_LENGTH = 64 * 1024;\n    var buffers = ['comment', 'sgmlDecl', 'textNode', 'tagName', 'doctype', 'procInstName', 'procInstBody', 'entity', 'attribName', 'attribValue', 'cdata', 'script'];\n    sax.EVENTS = ['text', 'processinginstruction', 'sgmldeclaration', 'doctype', 'comment', 'opentagstart', 'attribute', 'opentag', 'closetag', 'opencdata', 'cdata', 'closecdata', 'error', 'end', 'ready', 'script', 'opennamespace', 'closenamespace'];\n\n    function SAXParser(strict, opt) {\n      if (!(this instanceof SAXParser)) {\n        return new SAXParser(strict, opt);\n      }\n\n      var parser = this;\n      clearBuffers(parser);\n      parser.q = parser.c = '';\n      parser.bufferCheckPosition = sax.MAX_BUFFER_LENGTH;\n      parser.opt = opt || {};\n      parser.opt.lowercase = parser.opt.lowercase || parser.opt.lowercasetags;\n      parser.looseCase = parser.opt.lowercase ? 'toLowerCase' : 'toUpperCase';\n      parser.tags = [];\n      parser.closed = parser.closedRoot = parser.sawRoot = false;\n      parser.tag = parser.error = null;\n      parser.strict = !!strict;\n      parser.noscript = !!(strict || parser.opt.noscript);\n      parser.state = S.BEGIN;\n      parser.strictEntities = parser.opt.strictEntities;\n      parser.ENTITIES = parser.strictEntities ? Object.create(sax.XML_ENTITIES) : Object.create(sax.ENTITIES);\n      parser.attribList = []; // namespaces form a prototype chain.\n      // it always points at the current tag,\n      // which protos to its parent tag.\n\n      if (parser.opt.xmlns) {\n        parser.ns = Object.create(rootNS);\n      } // mostly just for error reporting\n\n\n      parser.trackPosition = parser.opt.position !== false;\n\n      if (parser.trackPosition) {\n        parser.position = parser.line = parser.column = 0;\n      }\n\n      emit(parser, 'onready');\n    }\n\n    if (!Object.create) {\n      Object.create = function (o) {\n        function F() {}\n\n        F.prototype = o;\n        var newf = new F();\n        return newf;\n      };\n    }\n\n    if (!Object.keys) {\n      Object.keys = function (o) {\n        var a = [];\n\n        for (var i in o) {\n          if (o.hasOwnProperty(i)) a.push(i);\n        }\n\n        return a;\n      };\n    }\n\n    function checkBufferLength(parser) {\n      var maxAllowed = Math.max(sax.MAX_BUFFER_LENGTH, 10);\n      var maxActual = 0;\n\n      for (var i = 0, l = buffers.length; i < l; i++) {\n        var len = parser[buffers[i]].length;\n\n        if (len > maxAllowed) {\n          // Text/cdata nodes can get big, and since they're buffered,\n          // we can get here under normal conditions.\n          // Avoid issues by emitting the text node now,\n          // so at least it won't get any bigger.\n          switch (buffers[i]) {\n            case 'textNode':\n              closeText(parser);\n              break;\n\n            case 'cdata':\n              emitNode(parser, 'oncdata', parser.cdata);\n              parser.cdata = '';\n              break;\n\n            case 'script':\n              emitNode(parser, 'onscript', parser.script);\n              parser.script = '';\n              break;\n\n            default:\n              error(parser, 'Max buffer length exceeded: ' + buffers[i]);\n          }\n        }\n\n        maxActual = Math.max(maxActual, len);\n      } // schedule the next check for the earliest possible buffer overrun.\n\n\n      var m = sax.MAX_BUFFER_LENGTH - maxActual;\n      parser.bufferCheckPosition = m + parser.position;\n    }\n\n    function clearBuffers(parser) {\n      for (var i = 0, l = buffers.length; i < l; i++) {\n        parser[buffers[i]] = '';\n      }\n    }\n\n    function flushBuffers(parser) {\n      closeText(parser);\n\n      if (parser.cdata !== '') {\n        emitNode(parser, 'oncdata', parser.cdata);\n        parser.cdata = '';\n      }\n\n      if (parser.script !== '') {\n        emitNode(parser, 'onscript', parser.script);\n        parser.script = '';\n      }\n    }\n\n    SAXParser.prototype = {\n      end: function end() {\n        _end(this);\n      },\n      write: write,\n      resume: function resume() {\n        this.error = null;\n        return this;\n      },\n      close: function close() {\n        return this.write(null);\n      },\n      flush: function flush() {\n        flushBuffers(this);\n      }\n    };\n    var Stream;\n\n    try {\n      Stream = stream.Stream;\n    } catch (ex) {\n      Stream = function Stream() {};\n    }\n\n    var streamWraps = sax.EVENTS.filter(function (ev) {\n      return ev !== 'error' && ev !== 'end';\n    });\n\n    function createStream(strict, opt) {\n      return new SAXStream(strict, opt);\n    }\n\n    function SAXStream(strict, opt) {\n      if (!(this instanceof SAXStream)) {\n        return new SAXStream(strict, opt);\n      }\n\n      Stream.apply(this);\n      this._parser = new SAXParser(strict, opt);\n      this.writable = true;\n      this.readable = true;\n      var me = this;\n\n      this._parser.onend = function () {\n        me.emit('end');\n      };\n\n      this._parser.onerror = function (er) {\n        me.emit('error', er); // if didn't throw, then means error was handled.\n        // go ahead and clear error, so we can write again.\n\n        me._parser.error = null;\n      };\n\n      this._decoder = null;\n      streamWraps.forEach(function (ev) {\n        Object.defineProperty(me, 'on' + ev, {\n          get: function get() {\n            return me._parser['on' + ev];\n          },\n          set: function set(h) {\n            if (!h) {\n              me.removeAllListeners(ev);\n              me._parser['on' + ev] = h;\n              return h;\n            }\n\n            me.on(ev, h);\n          },\n          enumerable: true,\n          configurable: false\n        });\n      });\n    }\n\n    SAXStream.prototype = Object.create(Stream.prototype, {\n      constructor: {\n        value: SAXStream\n      }\n    });\n\n    SAXStream.prototype.write = function (data) {\n      if (typeof Buffer === 'function' && typeof Buffer.isBuffer === 'function' && Buffer.isBuffer(data)) {\n        if (!this._decoder) {\n          var SD = string_decoder.StringDecoder;\n          this._decoder = new SD('utf8');\n        }\n\n        data = this._decoder.write(data);\n      }\n\n      this._parser.write(data.toString());\n\n      this.emit('data', data);\n      return true;\n    };\n\n    SAXStream.prototype.end = function (chunk) {\n      if (chunk && chunk.length) {\n        this.write(chunk);\n      }\n\n      this._parser.end();\n\n      return true;\n    };\n\n    SAXStream.prototype.on = function (ev, handler) {\n      var me = this;\n\n      if (!me._parser['on' + ev] && streamWraps.indexOf(ev) !== -1) {\n        me._parser['on' + ev] = function () {\n          var args = arguments.length === 1 ? [arguments[0]] : Array.apply(null, arguments);\n          args.splice(0, 0, ev);\n          me.emit.apply(me, args);\n        };\n      }\n\n      return Stream.prototype.on.call(me, ev, handler);\n    }; // this really needs to be replaced with character classes.\n    // XML allows all manner of ridiculous numbers and digits.\n\n\n    var CDATA = '[CDATA[';\n    var DOCTYPE = 'DOCTYPE';\n    var XML_NAMESPACE = 'http://www.w3.org/XML/1998/namespace';\n    var XMLNS_NAMESPACE = 'http://www.w3.org/2000/xmlns/';\n    var rootNS = {\n      xml: XML_NAMESPACE,\n      xmlns: XMLNS_NAMESPACE\n    }; // http://www.w3.org/TR/REC-xml/#NT-NameStartChar\n    // This implementation works on strings, a single character at a time\n    // as such, it cannot ever support astral-plane characters (10000-EFFFF)\n    // without a significant breaking change to either this  parser, or the\n    // JavaScript language.  Implementation of an emoji-capable xml parser\n    // is left as an exercise for the reader.\n\n    var nameStart = /[:_A-Za-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD]/;\n    var nameBody = /[:_A-Za-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\u00B7\\u0300-\\u036F\\u203F-\\u2040.\\d-]/;\n    var entityStart = /[#:_A-Za-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD]/;\n    var entityBody = /[#:_A-Za-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\u00B7\\u0300-\\u036F\\u203F-\\u2040.\\d-]/;\n\n    function isWhitespace(c) {\n      return c === ' ' || c === '\\n' || c === '\\r' || c === '\\t';\n    }\n\n    function isQuote(c) {\n      return c === '\"' || c === '\\'';\n    }\n\n    function isAttribEnd(c) {\n      return c === '>' || isWhitespace(c);\n    }\n\n    function isMatch(regex, c) {\n      return regex.test(c);\n    }\n\n    function notMatch(regex, c) {\n      return !isMatch(regex, c);\n    }\n\n    var S = 0;\n    sax.STATE = {\n      BEGIN: S++,\n      // leading byte order mark or whitespace\n      BEGIN_WHITESPACE: S++,\n      // leading whitespace\n      TEXT: S++,\n      // general stuff\n      TEXT_ENTITY: S++,\n      // &amp and such.\n      OPEN_WAKA: S++,\n      // <\n      SGML_DECL: S++,\n      // <!BLARG\n      SGML_DECL_QUOTED: S++,\n      // <!BLARG foo \"bar\n      DOCTYPE: S++,\n      // <!DOCTYPE\n      DOCTYPE_QUOTED: S++,\n      // <!DOCTYPE \"//blah\n      DOCTYPE_DTD: S++,\n      // <!DOCTYPE \"//blah\" [ ...\n      DOCTYPE_DTD_QUOTED: S++,\n      // <!DOCTYPE \"//blah\" [ \"foo\n      COMMENT_STARTING: S++,\n      // <!-\n      COMMENT: S++,\n      // <!--\n      COMMENT_ENDING: S++,\n      // <!-- blah -\n      COMMENT_ENDED: S++,\n      // <!-- blah --\n      CDATA: S++,\n      // <![CDATA[ something\n      CDATA_ENDING: S++,\n      // ]\n      CDATA_ENDING_2: S++,\n      // ]]\n      PROC_INST: S++,\n      // <?hi\n      PROC_INST_BODY: S++,\n      // <?hi there\n      PROC_INST_ENDING: S++,\n      // <?hi \"there\" ?\n      OPEN_TAG: S++,\n      // <strong\n      OPEN_TAG_SLASH: S++,\n      // <strong /\n      ATTRIB: S++,\n      // <a\n      ATTRIB_NAME: S++,\n      // <a foo\n      ATTRIB_NAME_SAW_WHITE: S++,\n      // <a foo _\n      ATTRIB_VALUE: S++,\n      // <a foo=\n      ATTRIB_VALUE_QUOTED: S++,\n      // <a foo=\"bar\n      ATTRIB_VALUE_CLOSED: S++,\n      // <a foo=\"bar\"\n      ATTRIB_VALUE_UNQUOTED: S++,\n      // <a foo=bar\n      ATTRIB_VALUE_ENTITY_Q: S++,\n      // <foo bar=\"&quot;\"\n      ATTRIB_VALUE_ENTITY_U: S++,\n      // <foo bar=&quot\n      CLOSE_TAG: S++,\n      // </a\n      CLOSE_TAG_SAW_WHITE: S++,\n      // </a   >\n      SCRIPT: S++,\n      // <script> ...\n      SCRIPT_ENDING: S++ // <script> ... <\n\n    };\n    sax.XML_ENTITIES = {\n      'amp': '&',\n      'gt': '>',\n      'lt': '<',\n      'quot': '\"',\n      'apos': \"'\"\n    };\n    sax.ENTITIES = {\n      'amp': '&',\n      'gt': '>',\n      'lt': '<',\n      'quot': '\"',\n      'apos': \"'\",\n      'AElig': 198,\n      'Aacute': 193,\n      'Acirc': 194,\n      'Agrave': 192,\n      'Aring': 197,\n      'Atilde': 195,\n      'Auml': 196,\n      'Ccedil': 199,\n      'ETH': 208,\n      'Eacute': 201,\n      'Ecirc': 202,\n      'Egrave': 200,\n      'Euml': 203,\n      'Iacute': 205,\n      'Icirc': 206,\n      'Igrave': 204,\n      'Iuml': 207,\n      'Ntilde': 209,\n      'Oacute': 211,\n      'Ocirc': 212,\n      'Ograve': 210,\n      'Oslash': 216,\n      'Otilde': 213,\n      'Ouml': 214,\n      'THORN': 222,\n      'Uacute': 218,\n      'Ucirc': 219,\n      'Ugrave': 217,\n      'Uuml': 220,\n      'Yacute': 221,\n      'aacute': 225,\n      'acirc': 226,\n      'aelig': 230,\n      'agrave': 224,\n      'aring': 229,\n      'atilde': 227,\n      'auml': 228,\n      'ccedil': 231,\n      'eacute': 233,\n      'ecirc': 234,\n      'egrave': 232,\n      'eth': 240,\n      'euml': 235,\n      'iacute': 237,\n      'icirc': 238,\n      'igrave': 236,\n      'iuml': 239,\n      'ntilde': 241,\n      'oacute': 243,\n      'ocirc': 244,\n      'ograve': 242,\n      'oslash': 248,\n      'otilde': 245,\n      'ouml': 246,\n      'szlig': 223,\n      'thorn': 254,\n      'uacute': 250,\n      'ucirc': 251,\n      'ugrave': 249,\n      'uuml': 252,\n      'yacute': 253,\n      'yuml': 255,\n      'copy': 169,\n      'reg': 174,\n      'nbsp': 160,\n      'iexcl': 161,\n      'cent': 162,\n      'pound': 163,\n      'curren': 164,\n      'yen': 165,\n      'brvbar': 166,\n      'sect': 167,\n      'uml': 168,\n      'ordf': 170,\n      'laquo': 171,\n      'not': 172,\n      'shy': 173,\n      'macr': 175,\n      'deg': 176,\n      'plusmn': 177,\n      'sup1': 185,\n      'sup2': 178,\n      'sup3': 179,\n      'acute': 180,\n      'micro': 181,\n      'para': 182,\n      'middot': 183,\n      'cedil': 184,\n      'ordm': 186,\n      'raquo': 187,\n      'frac14': 188,\n      'frac12': 189,\n      'frac34': 190,\n      'iquest': 191,\n      'times': 215,\n      'divide': 247,\n      'OElig': 338,\n      'oelig': 339,\n      'Scaron': 352,\n      'scaron': 353,\n      'Yuml': 376,\n      'fnof': 402,\n      'circ': 710,\n      'tilde': 732,\n      'Alpha': 913,\n      'Beta': 914,\n      'Gamma': 915,\n      'Delta': 916,\n      'Epsilon': 917,\n      'Zeta': 918,\n      'Eta': 919,\n      'Theta': 920,\n      'Iota': 921,\n      'Kappa': 922,\n      'Lambda': 923,\n      'Mu': 924,\n      'Nu': 925,\n      'Xi': 926,\n      'Omicron': 927,\n      'Pi': 928,\n      'Rho': 929,\n      'Sigma': 931,\n      'Tau': 932,\n      'Upsilon': 933,\n      'Phi': 934,\n      'Chi': 935,\n      'Psi': 936,\n      'Omega': 937,\n      'alpha': 945,\n      'beta': 946,\n      'gamma': 947,\n      'delta': 948,\n      'epsilon': 949,\n      'zeta': 950,\n      'eta': 951,\n      'theta': 952,\n      'iota': 953,\n      'kappa': 954,\n      'lambda': 955,\n      'mu': 956,\n      'nu': 957,\n      'xi': 958,\n      'omicron': 959,\n      'pi': 960,\n      'rho': 961,\n      'sigmaf': 962,\n      'sigma': 963,\n      'tau': 964,\n      'upsilon': 965,\n      'phi': 966,\n      'chi': 967,\n      'psi': 968,\n      'omega': 969,\n      'thetasym': 977,\n      'upsih': 978,\n      'piv': 982,\n      'ensp': 8194,\n      'emsp': 8195,\n      'thinsp': 8201,\n      'zwnj': 8204,\n      'zwj': 8205,\n      'lrm': 8206,\n      'rlm': 8207,\n      'ndash': 8211,\n      'mdash': 8212,\n      'lsquo': 8216,\n      'rsquo': 8217,\n      'sbquo': 8218,\n      'ldquo': 8220,\n      'rdquo': 8221,\n      'bdquo': 8222,\n      'dagger': 8224,\n      'Dagger': 8225,\n      'bull': 8226,\n      'hellip': 8230,\n      'permil': 8240,\n      'prime': 8242,\n      'Prime': 8243,\n      'lsaquo': 8249,\n      'rsaquo': 8250,\n      'oline': 8254,\n      'frasl': 8260,\n      'euro': 8364,\n      'image': 8465,\n      'weierp': 8472,\n      'real': 8476,\n      'trade': 8482,\n      'alefsym': 8501,\n      'larr': 8592,\n      'uarr': 8593,\n      'rarr': 8594,\n      'darr': 8595,\n      'harr': 8596,\n      'crarr': 8629,\n      'lArr': 8656,\n      'uArr': 8657,\n      'rArr': 8658,\n      'dArr': 8659,\n      'hArr': 8660,\n      'forall': 8704,\n      'part': 8706,\n      'exist': 8707,\n      'empty': 8709,\n      'nabla': 8711,\n      'isin': 8712,\n      'notin': 8713,\n      'ni': 8715,\n      'prod': 8719,\n      'sum': 8721,\n      'minus': 8722,\n      'lowast': 8727,\n      'radic': 8730,\n      'prop': 8733,\n      'infin': 8734,\n      'ang': 8736,\n      'and': 8743,\n      'or': 8744,\n      'cap': 8745,\n      'cup': 8746,\n      'int': 8747,\n      'there4': 8756,\n      'sim': 8764,\n      'cong': 8773,\n      'asymp': 8776,\n      'ne': 8800,\n      'equiv': 8801,\n      'le': 8804,\n      'ge': 8805,\n      'sub': 8834,\n      'sup': 8835,\n      'nsub': 8836,\n      'sube': 8838,\n      'supe': 8839,\n      'oplus': 8853,\n      'otimes': 8855,\n      'perp': 8869,\n      'sdot': 8901,\n      'lceil': 8968,\n      'rceil': 8969,\n      'lfloor': 8970,\n      'rfloor': 8971,\n      'lang': 9001,\n      'rang': 9002,\n      'loz': 9674,\n      'spades': 9824,\n      'clubs': 9827,\n      'hearts': 9829,\n      'diams': 9830\n    };\n    Object.keys(sax.ENTITIES).forEach(function (key) {\n      var e = sax.ENTITIES[key];\n      var s = typeof e === 'number' ? String.fromCharCode(e) : e;\n      sax.ENTITIES[key] = s;\n    });\n\n    for (var s in sax.STATE) {\n      sax.STATE[sax.STATE[s]] = s;\n    } // shorthand\n\n\n    S = sax.STATE;\n\n    function emit(parser, event, data) {\n      parser[event] && parser[event](data);\n    }\n\n    function emitNode(parser, nodeType, data) {\n      if (parser.textNode) closeText(parser);\n      emit(parser, nodeType, data);\n    }\n\n    function closeText(parser) {\n      parser.textNode = textopts(parser.opt, parser.textNode);\n      if (parser.textNode) emit(parser, 'ontext', parser.textNode);\n      parser.textNode = '';\n    }\n\n    function textopts(opt, text) {\n      if (opt.trim) text = text.trim();\n      if (opt.normalize) text = text.replace(/\\s+/g, ' ');\n      return text;\n    }\n\n    function error(parser, er) {\n      closeText(parser);\n\n      if (parser.trackPosition) {\n        er += '\\nLine: ' + parser.line + '\\nColumn: ' + parser.column + '\\nChar: ' + parser.c;\n      }\n\n      er = new Error(er);\n      parser.error = er;\n      emit(parser, 'onerror', er);\n      return parser;\n    }\n\n    function _end(parser) {\n      if (parser.sawRoot && !parser.closedRoot) strictFail(parser, 'Unclosed root tag');\n\n      if (parser.state !== S.BEGIN && parser.state !== S.BEGIN_WHITESPACE && parser.state !== S.TEXT) {\n        error(parser, 'Unexpected end');\n      }\n\n      closeText(parser);\n      parser.c = '';\n      parser.closed = true;\n      emit(parser, 'onend');\n      SAXParser.call(parser, parser.strict, parser.opt);\n      return parser;\n    }\n\n    function strictFail(parser, message) {\n      if (_typeof(parser) !== 'object' || !(parser instanceof SAXParser)) {\n        throw new Error('bad call to strictFail');\n      }\n\n      if (parser.strict) {\n        error(parser, message);\n      }\n    }\n\n    function newTag(parser) {\n      if (!parser.strict) parser.tagName = parser.tagName[parser.looseCase]();\n      var parent = parser.tags[parser.tags.length - 1] || parser;\n      var tag = parser.tag = {\n        name: parser.tagName,\n        attributes: {}\n      }; // will be overridden if tag contails an xmlns=\"foo\" or xmlns:foo=\"bar\"\n\n      if (parser.opt.xmlns) {\n        tag.ns = parent.ns;\n      }\n\n      parser.attribList.length = 0;\n      emitNode(parser, 'onopentagstart', tag);\n    }\n\n    function qname(name, attribute) {\n      var i = name.indexOf(':');\n      var qualName = i < 0 ? ['', name] : name.split(':');\n      var prefix = qualName[0];\n      var local = qualName[1]; // <x \"xmlns\"=\"http://foo\">\n\n      if (attribute && name === 'xmlns') {\n        prefix = 'xmlns';\n        local = '';\n      }\n\n      return {\n        prefix: prefix,\n        local: local\n      };\n    }\n\n    function attrib(parser) {\n      if (!parser.strict) {\n        parser.attribName = parser.attribName[parser.looseCase]();\n      }\n\n      if (parser.attribList.indexOf(parser.attribName) !== -1 || parser.tag.attributes.hasOwnProperty(parser.attribName)) {\n        parser.attribName = parser.attribValue = '';\n        return;\n      }\n\n      if (parser.opt.xmlns) {\n        var qn = qname(parser.attribName, true);\n        var prefix = qn.prefix;\n        var local = qn.local;\n\n        if (prefix === 'xmlns') {\n          // namespace binding attribute. push the binding into scope\n          if (local === 'xml' && parser.attribValue !== XML_NAMESPACE) {\n            strictFail(parser, 'xml: prefix must be bound to ' + XML_NAMESPACE + '\\n' + 'Actual: ' + parser.attribValue);\n          } else if (local === 'xmlns' && parser.attribValue !== XMLNS_NAMESPACE) {\n            strictFail(parser, 'xmlns: prefix must be bound to ' + XMLNS_NAMESPACE + '\\n' + 'Actual: ' + parser.attribValue);\n          } else {\n            var tag = parser.tag;\n            var parent = parser.tags[parser.tags.length - 1] || parser;\n\n            if (tag.ns === parent.ns) {\n              tag.ns = Object.create(parent.ns);\n            }\n\n            tag.ns[local] = parser.attribValue;\n          }\n        } // defer onattribute events until all attributes have been seen\n        // so any new bindings can take effect. preserve attribute order\n        // so deferred events can be emitted in document order\n\n\n        parser.attribList.push([parser.attribName, parser.attribValue]);\n      } else {\n        // in non-xmlns mode, we can emit the event right away\n        parser.tag.attributes[parser.attribName] = parser.attribValue;\n        emitNode(parser, 'onattribute', {\n          name: parser.attribName,\n          value: parser.attribValue\n        });\n      }\n\n      parser.attribName = parser.attribValue = '';\n    }\n\n    function openTag(parser, selfClosing) {\n      if (parser.opt.xmlns) {\n        // emit namespace binding events\n        var tag = parser.tag; // add namespace info to tag\n\n        var qn = qname(parser.tagName);\n        tag.prefix = qn.prefix;\n        tag.local = qn.local;\n        tag.uri = tag.ns[qn.prefix] || '';\n\n        if (tag.prefix && !tag.uri) {\n          strictFail(parser, 'Unbound namespace prefix: ' + JSON.stringify(parser.tagName));\n          tag.uri = qn.prefix;\n        }\n\n        var parent = parser.tags[parser.tags.length - 1] || parser;\n\n        if (tag.ns && parent.ns !== tag.ns) {\n          Object.keys(tag.ns).forEach(function (p) {\n            emitNode(parser, 'onopennamespace', {\n              prefix: p,\n              uri: tag.ns[p]\n            });\n          });\n        } // handle deferred onattribute events\n        // Note: do not apply default ns to attributes:\n        //   http://www.w3.org/TR/REC-xml-names/#defaulting\n\n\n        for (var i = 0, l = parser.attribList.length; i < l; i++) {\n          var nv = parser.attribList[i];\n          var name = nv[0];\n          var value = nv[1];\n          var qualName = qname(name, true);\n          var prefix = qualName.prefix;\n          var local = qualName.local;\n          var uri = prefix === '' ? '' : tag.ns[prefix] || '';\n          var a = {\n            name: name,\n            value: value,\n            prefix: prefix,\n            local: local,\n            uri: uri\n          }; // if there's any attributes with an undefined namespace,\n          // then fail on them now.\n\n          if (prefix && prefix !== 'xmlns' && !uri) {\n            strictFail(parser, 'Unbound namespace prefix: ' + JSON.stringify(prefix));\n            a.uri = prefix;\n          }\n\n          parser.tag.attributes[name] = a;\n          emitNode(parser, 'onattribute', a);\n        }\n\n        parser.attribList.length = 0;\n      }\n\n      parser.tag.isSelfClosing = !!selfClosing; // process the tag\n\n      parser.sawRoot = true;\n      parser.tags.push(parser.tag);\n      emitNode(parser, 'onopentag', parser.tag);\n\n      if (!selfClosing) {\n        // special case for <script> in non-strict mode.\n        if (!parser.noscript && parser.tagName.toLowerCase() === 'script') {\n          parser.state = S.SCRIPT;\n        } else {\n          parser.state = S.TEXT;\n        }\n\n        parser.tag = null;\n        parser.tagName = '';\n      }\n\n      parser.attribName = parser.attribValue = '';\n      parser.attribList.length = 0;\n    }\n\n    function closeTag(parser) {\n      if (!parser.tagName) {\n        strictFail(parser, 'Weird empty close tag.');\n        parser.textNode += '</>';\n        parser.state = S.TEXT;\n        return;\n      }\n\n      if (parser.script) {\n        if (parser.tagName !== 'script') {\n          parser.script += '</' + parser.tagName + '>';\n          parser.tagName = '';\n          parser.state = S.SCRIPT;\n          return;\n        }\n\n        emitNode(parser, 'onscript', parser.script);\n        parser.script = '';\n      } // first make sure that the closing tag actually exists.\n      // <a><b></c></b></a> will close everything, otherwise.\n\n\n      var t = parser.tags.length;\n      var tagName = parser.tagName;\n\n      if (!parser.strict) {\n        tagName = tagName[parser.looseCase]();\n      }\n\n      var closeTo = tagName;\n\n      while (t--) {\n        var close = parser.tags[t];\n\n        if (close.name !== closeTo) {\n          // fail the first time in strict mode\n          strictFail(parser, 'Unexpected close tag');\n        } else {\n          break;\n        }\n      } // didn't find it.  we already failed for strict, so just abort.\n\n\n      if (t < 0) {\n        strictFail(parser, 'Unmatched closing tag: ' + parser.tagName);\n        parser.textNode += '</' + parser.tagName + '>';\n        parser.state = S.TEXT;\n        return;\n      }\n\n      parser.tagName = tagName;\n      var s = parser.tags.length;\n\n      while (s-- > t) {\n        var tag = parser.tag = parser.tags.pop();\n        parser.tagName = parser.tag.name;\n        emitNode(parser, 'onclosetag', parser.tagName);\n        var x = {};\n\n        for (var i in tag.ns) {\n          x[i] = tag.ns[i];\n        }\n\n        var parent = parser.tags[parser.tags.length - 1] || parser;\n\n        if (parser.opt.xmlns && tag.ns !== parent.ns) {\n          // remove namespace bindings introduced by tag\n          Object.keys(tag.ns).forEach(function (p) {\n            var n = tag.ns[p];\n            emitNode(parser, 'onclosenamespace', {\n              prefix: p,\n              uri: n\n            });\n          });\n        }\n      }\n\n      if (t === 0) parser.closedRoot = true;\n      parser.tagName = parser.attribValue = parser.attribName = '';\n      parser.attribList.length = 0;\n      parser.state = S.TEXT;\n    }\n\n    function parseEntity(parser) {\n      var entity = parser.entity;\n      var entityLC = entity.toLowerCase();\n      var num;\n      var numStr = '';\n\n      if (parser.ENTITIES[entity]) {\n        return parser.ENTITIES[entity];\n      }\n\n      if (parser.ENTITIES[entityLC]) {\n        return parser.ENTITIES[entityLC];\n      }\n\n      entity = entityLC;\n\n      if (entity.charAt(0) === '#') {\n        if (entity.charAt(1) === 'x') {\n          entity = entity.slice(2);\n          num = parseInt(entity, 16);\n          numStr = num.toString(16);\n        } else {\n          entity = entity.slice(1);\n          num = parseInt(entity, 10);\n          numStr = num.toString(10);\n        }\n      }\n\n      entity = entity.replace(/^0+/, '');\n\n      if (isNaN(num) || numStr.toLowerCase() !== entity) {\n        strictFail(parser, 'Invalid character entity');\n        return '&' + parser.entity + ';';\n      }\n\n      return String.fromCodePoint(num);\n    }\n\n    function beginWhiteSpace(parser, c) {\n      if (c === '<') {\n        parser.state = S.OPEN_WAKA;\n        parser.startTagPosition = parser.position;\n      } else if (!isWhitespace(c)) {\n        // have to process this as a text node.\n        // weird, but happens.\n        strictFail(parser, 'Non-whitespace before first tag.');\n        parser.textNode = c;\n        parser.state = S.TEXT;\n      }\n    }\n\n    function charAt(chunk, i) {\n      var result = '';\n\n      if (i < chunk.length) {\n        result = chunk.charAt(i);\n      }\n\n      return result;\n    }\n\n    function write(chunk) {\n      var parser = this;\n\n      if (this.error) {\n        throw this.error;\n      }\n\n      if (parser.closed) {\n        return error(parser, 'Cannot write after close. Assign an onready handler.');\n      }\n\n      if (chunk === null) {\n        return _end(parser);\n      }\n\n      if (_typeof(chunk) === 'object') {\n        chunk = chunk.toString();\n      }\n\n      var i = 0;\n      var c = '';\n\n      while (true) {\n        c = charAt(chunk, i++);\n        parser.c = c;\n\n        if (!c) {\n          break;\n        }\n\n        if (parser.trackPosition) {\n          parser.position++;\n\n          if (c === '\\n') {\n            parser.line++;\n            parser.column = 0;\n          } else {\n            parser.column++;\n          }\n        }\n\n        switch (parser.state) {\n          case S.BEGIN:\n            parser.state = S.BEGIN_WHITESPACE;\n\n            if (c === \"\\uFEFF\") {\n              continue;\n            }\n\n            beginWhiteSpace(parser, c);\n            continue;\n\n          case S.BEGIN_WHITESPACE:\n            beginWhiteSpace(parser, c);\n            continue;\n\n          case S.TEXT:\n            if (parser.sawRoot && !parser.closedRoot) {\n              var starti = i - 1;\n\n              while (c && c !== '<' && c !== '&') {\n                c = charAt(chunk, i++);\n\n                if (c && parser.trackPosition) {\n                  parser.position++;\n\n                  if (c === '\\n') {\n                    parser.line++;\n                    parser.column = 0;\n                  } else {\n                    parser.column++;\n                  }\n                }\n              }\n\n              parser.textNode += chunk.substring(starti, i - 1);\n            }\n\n            if (c === '<' && !(parser.sawRoot && parser.closedRoot && !parser.strict)) {\n              parser.state = S.OPEN_WAKA;\n              parser.startTagPosition = parser.position;\n            } else {\n              if (!isWhitespace(c) && (!parser.sawRoot || parser.closedRoot)) {\n                strictFail(parser, 'Text data outside of root node.');\n              }\n\n              if (c === '&') {\n                parser.state = S.TEXT_ENTITY;\n              } else {\n                parser.textNode += c;\n              }\n            }\n\n            continue;\n\n          case S.SCRIPT:\n            // only non-strict\n            if (c === '<') {\n              parser.state = S.SCRIPT_ENDING;\n            } else {\n              parser.script += c;\n            }\n\n            continue;\n\n          case S.SCRIPT_ENDING:\n            if (c === '/') {\n              parser.state = S.CLOSE_TAG;\n            } else {\n              parser.script += '<' + c;\n              parser.state = S.SCRIPT;\n            }\n\n            continue;\n\n          case S.OPEN_WAKA:\n            // either a /, ?, !, or text is coming next.\n            if (c === '!') {\n              parser.state = S.SGML_DECL;\n              parser.sgmlDecl = '';\n            } else if (isWhitespace(c)) ; else if (isMatch(nameStart, c)) {\n              parser.state = S.OPEN_TAG;\n              parser.tagName = c;\n            } else if (c === '/') {\n              parser.state = S.CLOSE_TAG;\n              parser.tagName = '';\n            } else if (c === '?') {\n              parser.state = S.PROC_INST;\n              parser.procInstName = parser.procInstBody = '';\n            } else {\n              strictFail(parser, 'Unencoded <'); // if there was some whitespace, then add that in.\n\n              if (parser.startTagPosition + 1 < parser.position) {\n                var pad = parser.position - parser.startTagPosition;\n                c = new Array(pad).join(' ') + c;\n              }\n\n              parser.textNode += '<' + c;\n              parser.state = S.TEXT;\n            }\n\n            continue;\n\n          case S.SGML_DECL:\n            if ((parser.sgmlDecl + c).toUpperCase() === CDATA) {\n              emitNode(parser, 'onopencdata');\n              parser.state = S.CDATA;\n              parser.sgmlDecl = '';\n              parser.cdata = '';\n            } else if (parser.sgmlDecl + c === '--') {\n              parser.state = S.COMMENT;\n              parser.comment = '';\n              parser.sgmlDecl = '';\n            } else if ((parser.sgmlDecl + c).toUpperCase() === DOCTYPE) {\n              parser.state = S.DOCTYPE;\n\n              if (parser.doctype || parser.sawRoot) {\n                strictFail(parser, 'Inappropriately located doctype declaration');\n              }\n\n              parser.doctype = '';\n              parser.sgmlDecl = '';\n            } else if (c === '>') {\n              emitNode(parser, 'onsgmldeclaration', parser.sgmlDecl);\n              parser.sgmlDecl = '';\n              parser.state = S.TEXT;\n            } else if (isQuote(c)) {\n              parser.state = S.SGML_DECL_QUOTED;\n              parser.sgmlDecl += c;\n            } else {\n              parser.sgmlDecl += c;\n            }\n\n            continue;\n\n          case S.SGML_DECL_QUOTED:\n            if (c === parser.q) {\n              parser.state = S.SGML_DECL;\n              parser.q = '';\n            }\n\n            parser.sgmlDecl += c;\n            continue;\n\n          case S.DOCTYPE:\n            if (c === '>') {\n              parser.state = S.TEXT;\n              emitNode(parser, 'ondoctype', parser.doctype);\n              parser.doctype = true; // just remember that we saw it.\n            } else {\n              parser.doctype += c;\n\n              if (c === '[') {\n                parser.state = S.DOCTYPE_DTD;\n              } else if (isQuote(c)) {\n                parser.state = S.DOCTYPE_QUOTED;\n                parser.q = c;\n              }\n            }\n\n            continue;\n\n          case S.DOCTYPE_QUOTED:\n            parser.doctype += c;\n\n            if (c === parser.q) {\n              parser.q = '';\n              parser.state = S.DOCTYPE;\n            }\n\n            continue;\n\n          case S.DOCTYPE_DTD:\n            parser.doctype += c;\n\n            if (c === ']') {\n              parser.state = S.DOCTYPE;\n            } else if (isQuote(c)) {\n              parser.state = S.DOCTYPE_DTD_QUOTED;\n              parser.q = c;\n            }\n\n            continue;\n\n          case S.DOCTYPE_DTD_QUOTED:\n            parser.doctype += c;\n\n            if (c === parser.q) {\n              parser.state = S.DOCTYPE_DTD;\n              parser.q = '';\n            }\n\n            continue;\n\n          case S.COMMENT:\n            if (c === '-') {\n              parser.state = S.COMMENT_ENDING;\n            } else {\n              parser.comment += c;\n            }\n\n            continue;\n\n          case S.COMMENT_ENDING:\n            if (c === '-') {\n              parser.state = S.COMMENT_ENDED;\n              parser.comment = textopts(parser.opt, parser.comment);\n\n              if (parser.comment) {\n                emitNode(parser, 'oncomment', parser.comment);\n              }\n\n              parser.comment = '';\n            } else {\n              parser.comment += '-' + c;\n              parser.state = S.COMMENT;\n            }\n\n            continue;\n\n          case S.COMMENT_ENDED:\n            if (c !== '>') {\n              strictFail(parser, 'Malformed comment'); // allow <!-- blah -- bloo --> in non-strict mode,\n              // which is a comment of \" blah -- bloo \"\n\n              parser.comment += '--' + c;\n              parser.state = S.COMMENT;\n            } else {\n              parser.state = S.TEXT;\n            }\n\n            continue;\n\n          case S.CDATA:\n            if (c === ']') {\n              parser.state = S.CDATA_ENDING;\n            } else {\n              parser.cdata += c;\n            }\n\n            continue;\n\n          case S.CDATA_ENDING:\n            if (c === ']') {\n              parser.state = S.CDATA_ENDING_2;\n            } else {\n              parser.cdata += ']' + c;\n              parser.state = S.CDATA;\n            }\n\n            continue;\n\n          case S.CDATA_ENDING_2:\n            if (c === '>') {\n              if (parser.cdata) {\n                emitNode(parser, 'oncdata', parser.cdata);\n              }\n\n              emitNode(parser, 'onclosecdata');\n              parser.cdata = '';\n              parser.state = S.TEXT;\n            } else if (c === ']') {\n              parser.cdata += ']';\n            } else {\n              parser.cdata += ']]' + c;\n              parser.state = S.CDATA;\n            }\n\n            continue;\n\n          case S.PROC_INST:\n            if (c === '?') {\n              parser.state = S.PROC_INST_ENDING;\n            } else if (isWhitespace(c)) {\n              parser.state = S.PROC_INST_BODY;\n            } else {\n              parser.procInstName += c;\n            }\n\n            continue;\n\n          case S.PROC_INST_BODY:\n            if (!parser.procInstBody && isWhitespace(c)) {\n              continue;\n            } else if (c === '?') {\n              parser.state = S.PROC_INST_ENDING;\n            } else {\n              parser.procInstBody += c;\n            }\n\n            continue;\n\n          case S.PROC_INST_ENDING:\n            if (c === '>') {\n              emitNode(parser, 'onprocessinginstruction', {\n                name: parser.procInstName,\n                body: parser.procInstBody\n              });\n              parser.procInstName = parser.procInstBody = '';\n              parser.state = S.TEXT;\n            } else {\n              parser.procInstBody += '?' + c;\n              parser.state = S.PROC_INST_BODY;\n            }\n\n            continue;\n\n          case S.OPEN_TAG:\n            if (isMatch(nameBody, c)) {\n              parser.tagName += c;\n            } else {\n              newTag(parser);\n\n              if (c === '>') {\n                openTag(parser);\n              } else if (c === '/') {\n                parser.state = S.OPEN_TAG_SLASH;\n              } else {\n                if (!isWhitespace(c)) {\n                  strictFail(parser, 'Invalid character in tag name');\n                }\n\n                parser.state = S.ATTRIB;\n              }\n            }\n\n            continue;\n\n          case S.OPEN_TAG_SLASH:\n            if (c === '>') {\n              openTag(parser, true);\n              closeTag(parser);\n            } else {\n              strictFail(parser, 'Forward-slash in opening tag not followed by >');\n              parser.state = S.ATTRIB;\n            }\n\n            continue;\n\n          case S.ATTRIB:\n            // haven't read the attribute name yet.\n            if (isWhitespace(c)) {\n              continue;\n            } else if (c === '>') {\n              openTag(parser);\n            } else if (c === '/') {\n              parser.state = S.OPEN_TAG_SLASH;\n            } else if (isMatch(nameStart, c)) {\n              parser.attribName = c;\n              parser.attribValue = '';\n              parser.state = S.ATTRIB_NAME;\n            } else {\n              strictFail(parser, 'Invalid attribute name');\n            }\n\n            continue;\n\n          case S.ATTRIB_NAME:\n            if (c === '=') {\n              parser.state = S.ATTRIB_VALUE;\n            } else if (c === '>') {\n              strictFail(parser, 'Attribute without value');\n              parser.attribValue = parser.attribName;\n              attrib(parser);\n              openTag(parser);\n            } else if (isWhitespace(c)) {\n              parser.state = S.ATTRIB_NAME_SAW_WHITE;\n            } else if (isMatch(nameBody, c)) {\n              parser.attribName += c;\n            } else {\n              strictFail(parser, 'Invalid attribute name');\n            }\n\n            continue;\n\n          case S.ATTRIB_NAME_SAW_WHITE:\n            if (c === '=') {\n              parser.state = S.ATTRIB_VALUE;\n            } else if (isWhitespace(c)) {\n              continue;\n            } else {\n              strictFail(parser, 'Attribute without value');\n              parser.tag.attributes[parser.attribName] = '';\n              parser.attribValue = '';\n              emitNode(parser, 'onattribute', {\n                name: parser.attribName,\n                value: ''\n              });\n              parser.attribName = '';\n\n              if (c === '>') {\n                openTag(parser);\n              } else if (isMatch(nameStart, c)) {\n                parser.attribName = c;\n                parser.state = S.ATTRIB_NAME;\n              } else {\n                strictFail(parser, 'Invalid attribute name');\n                parser.state = S.ATTRIB;\n              }\n            }\n\n            continue;\n\n          case S.ATTRIB_VALUE:\n            if (isWhitespace(c)) {\n              continue;\n            } else if (isQuote(c)) {\n              parser.q = c;\n              parser.state = S.ATTRIB_VALUE_QUOTED;\n            } else {\n              strictFail(parser, 'Unquoted attribute value');\n              parser.state = S.ATTRIB_VALUE_UNQUOTED;\n              parser.attribValue = c;\n            }\n\n            continue;\n\n          case S.ATTRIB_VALUE_QUOTED:\n            if (c !== parser.q) {\n              if (c === '&') {\n                parser.state = S.ATTRIB_VALUE_ENTITY_Q;\n              } else {\n                parser.attribValue += c;\n              }\n\n              continue;\n            }\n\n            attrib(parser);\n            parser.q = '';\n            parser.state = S.ATTRIB_VALUE_CLOSED;\n            continue;\n\n          case S.ATTRIB_VALUE_CLOSED:\n            if (isWhitespace(c)) {\n              parser.state = S.ATTRIB;\n            } else if (c === '>') {\n              openTag(parser);\n            } else if (c === '/') {\n              parser.state = S.OPEN_TAG_SLASH;\n            } else if (isMatch(nameStart, c)) {\n              strictFail(parser, 'No whitespace between attributes');\n              parser.attribName = c;\n              parser.attribValue = '';\n              parser.state = S.ATTRIB_NAME;\n            } else {\n              strictFail(parser, 'Invalid attribute name');\n            }\n\n            continue;\n\n          case S.ATTRIB_VALUE_UNQUOTED:\n            if (!isAttribEnd(c)) {\n              if (c === '&') {\n                parser.state = S.ATTRIB_VALUE_ENTITY_U;\n              } else {\n                parser.attribValue += c;\n              }\n\n              continue;\n            }\n\n            attrib(parser);\n\n            if (c === '>') {\n              openTag(parser);\n            } else {\n              parser.state = S.ATTRIB;\n            }\n\n            continue;\n\n          case S.CLOSE_TAG:\n            if (!parser.tagName) {\n              if (isWhitespace(c)) {\n                continue;\n              } else if (notMatch(nameStart, c)) {\n                if (parser.script) {\n                  parser.script += '</' + c;\n                  parser.state = S.SCRIPT;\n                } else {\n                  strictFail(parser, 'Invalid tagname in closing tag.');\n                }\n              } else {\n                parser.tagName = c;\n              }\n            } else if (c === '>') {\n              closeTag(parser);\n            } else if (isMatch(nameBody, c)) {\n              parser.tagName += c;\n            } else if (parser.script) {\n              parser.script += '</' + parser.tagName;\n              parser.tagName = '';\n              parser.state = S.SCRIPT;\n            } else {\n              if (!isWhitespace(c)) {\n                strictFail(parser, 'Invalid tagname in closing tag');\n              }\n\n              parser.state = S.CLOSE_TAG_SAW_WHITE;\n            }\n\n            continue;\n\n          case S.CLOSE_TAG_SAW_WHITE:\n            if (isWhitespace(c)) {\n              continue;\n            }\n\n            if (c === '>') {\n              closeTag(parser);\n            } else {\n              strictFail(parser, 'Invalid characters in closing tag');\n            }\n\n            continue;\n\n          case S.TEXT_ENTITY:\n          case S.ATTRIB_VALUE_ENTITY_Q:\n          case S.ATTRIB_VALUE_ENTITY_U:\n            var returnState;\n            var buffer;\n\n            switch (parser.state) {\n              case S.TEXT_ENTITY:\n                returnState = S.TEXT;\n                buffer = 'textNode';\n                break;\n\n              case S.ATTRIB_VALUE_ENTITY_Q:\n                returnState = S.ATTRIB_VALUE_QUOTED;\n                buffer = 'attribValue';\n                break;\n\n              case S.ATTRIB_VALUE_ENTITY_U:\n                returnState = S.ATTRIB_VALUE_UNQUOTED;\n                buffer = 'attribValue';\n                break;\n            }\n\n            if (c === ';') {\n              parser[buffer] += parseEntity(parser);\n              parser.entity = '';\n              parser.state = returnState;\n            } else if (isMatch(parser.entity.length ? entityBody : entityStart, c)) {\n              parser.entity += c;\n            } else {\n              strictFail(parser, 'Invalid character in entity name');\n              parser[buffer] += '&' + parser.entity + c;\n              parser.entity = '';\n              parser.state = returnState;\n            }\n\n            continue;\n\n          default:\n            throw new Error(parser, 'Unknown state: ' + parser.state);\n        }\n      } // while\n\n\n      if (parser.position >= parser.bufferCheckPosition) {\n        checkBufferLength(parser);\n      }\n\n      return parser;\n    }\n    /*! http://mths.be/fromcodepoint v0.1.0 by @mathias */\n\n    /* istanbul ignore next */\n\n\n    if (!String.fromCodePoint) {\n      (function () {\n        var stringFromCharCode = String.fromCharCode;\n        var floor = Math.floor;\n\n        var fromCodePoint = function fromCodePoint() {\n          var MAX_SIZE = 0x4000;\n          var codeUnits = [];\n          var highSurrogate;\n          var lowSurrogate;\n          var index = -1;\n          var length = arguments.length;\n\n          if (!length) {\n            return '';\n          }\n\n          var result = '';\n\n          while (++index < length) {\n            var codePoint = Number(arguments[index]);\n\n            if (!isFinite(codePoint) || // `NaN`, `+Infinity`, or `-Infinity`\n            codePoint < 0 || // not a valid Unicode code point\n            codePoint > 0x10FFFF || // not a valid Unicode code point\n            floor(codePoint) !== codePoint // not an integer\n            ) {\n                throw RangeError('Invalid code point: ' + codePoint);\n              }\n\n            if (codePoint <= 0xFFFF) {\n              // BMP code point\n              codeUnits.push(codePoint);\n            } else {\n              // Astral code point; split in surrogate halves\n              // http://mathiasbynens.be/notes/javascript-encoding#surrogate-formulae\n              codePoint -= 0x10000;\n              highSurrogate = (codePoint >> 10) + 0xD800;\n              lowSurrogate = codePoint % 0x400 + 0xDC00;\n              codeUnits.push(highSurrogate, lowSurrogate);\n            }\n\n            if (index + 1 === length || codeUnits.length > MAX_SIZE) {\n              result += stringFromCharCode.apply(null, codeUnits);\n              codeUnits.length = 0;\n            }\n          }\n\n          return result;\n        };\n        /* istanbul ignore next */\n\n\n        if (Object.defineProperty) {\n          Object.defineProperty(String, 'fromCodePoint', {\n            value: fromCodePoint,\n            configurable: true,\n            writable: true\n          });\n        } else {\n          String.fromCodePoint = fromCodePoint;\n        }\n      })();\n    }\n  })( exports);\n});\n\nvar arrayHelper = {\n  isArray: function isArray(value) {\n    if (Array.isArray) {\n      return Array.isArray(value);\n    } // fallback for older browsers like  IE 8\n\n\n    return Object.prototype.toString.call(value) === '[object Array]';\n  }\n};\n\nvar isArray = arrayHelper.isArray;\nvar optionsHelper = {\n  copyOptions: function copyOptions(options) {\n    var key,\n        copy = {};\n\n    for (key in options) {\n      if (options.hasOwnProperty(key)) {\n        copy[key] = options[key];\n      }\n    }\n\n    return copy;\n  },\n  ensureFlagExists: function ensureFlagExists(item, options) {\n    if (!(item in options) || typeof options[item] !== 'boolean') {\n      options[item] = false;\n    }\n  },\n  ensureSpacesExists: function ensureSpacesExists(options) {\n    if (!('spaces' in options) || typeof options.spaces !== 'number' && typeof options.spaces !== 'string') {\n      options.spaces = 0;\n    }\n  },\n  ensureAlwaysArrayExists: function ensureAlwaysArrayExists(options) {\n    if (!('alwaysArray' in options) || typeof options.alwaysArray !== 'boolean' && !isArray(options.alwaysArray)) {\n      options.alwaysArray = false;\n    }\n  },\n  ensureKeyExists: function ensureKeyExists(key, options) {\n    if (!(key + 'Key' in options) || typeof options[key + 'Key'] !== 'string') {\n      options[key + 'Key'] = options.compact ? '_' + key : key;\n    }\n  },\n  checkFnExists: function checkFnExists(key, options) {\n    return key + 'Fn' in options;\n  }\n};\n\nvar isArray$1 = arrayHelper.isArray;\nvar options;\nvar currentElement;\n\nfunction validateOptions(userOptions) {\n  options = optionsHelper.copyOptions(userOptions);\n  optionsHelper.ensureFlagExists('ignoreDeclaration', options);\n  optionsHelper.ensureFlagExists('ignoreInstruction', options);\n  optionsHelper.ensureFlagExists('ignoreAttributes', options);\n  optionsHelper.ensureFlagExists('ignoreText', options);\n  optionsHelper.ensureFlagExists('ignoreComment', options);\n  optionsHelper.ensureFlagExists('ignoreCdata', options);\n  optionsHelper.ensureFlagExists('ignoreDoctype', options);\n  optionsHelper.ensureFlagExists('compact', options);\n  optionsHelper.ensureFlagExists('alwaysChildren', options);\n  optionsHelper.ensureFlagExists('addParent', options);\n  optionsHelper.ensureFlagExists('trim', options);\n  optionsHelper.ensureFlagExists('nativeType', options);\n  optionsHelper.ensureFlagExists('nativeTypeAttributes', options);\n  optionsHelper.ensureFlagExists('sanitize', options);\n  optionsHelper.ensureFlagExists('instructionHasAttributes', options);\n  optionsHelper.ensureFlagExists('captureSpacesBetweenElements', options);\n  optionsHelper.ensureAlwaysArrayExists(options);\n  optionsHelper.ensureKeyExists('declaration', options);\n  optionsHelper.ensureKeyExists('instruction', options);\n  optionsHelper.ensureKeyExists('attributes', options);\n  optionsHelper.ensureKeyExists('text', options);\n  optionsHelper.ensureKeyExists('comment', options);\n  optionsHelper.ensureKeyExists('cdata', options);\n  optionsHelper.ensureKeyExists('doctype', options);\n  optionsHelper.ensureKeyExists('type', options);\n  optionsHelper.ensureKeyExists('name', options);\n  optionsHelper.ensureKeyExists('elements', options);\n  optionsHelper.ensureKeyExists('parent', options);\n  optionsHelper.checkFnExists('doctype', options);\n  optionsHelper.checkFnExists('instruction', options);\n  optionsHelper.checkFnExists('cdata', options);\n  optionsHelper.checkFnExists('comment', options);\n  optionsHelper.checkFnExists('text', options);\n  optionsHelper.checkFnExists('instructionName', options);\n  optionsHelper.checkFnExists('elementName', options);\n  optionsHelper.checkFnExists('attributeName', options);\n  optionsHelper.checkFnExists('attributeValue', options);\n  optionsHelper.checkFnExists('attributes', options);\n  return options;\n}\n\nfunction nativeType(value) {\n  var nValue = Number(value);\n\n  if (!isNaN(nValue)) {\n    return nValue;\n  }\n\n  var bValue = value.toLowerCase();\n\n  if (bValue === 'true') {\n    return true;\n  } else if (bValue === 'false') {\n    return false;\n  }\n\n  return value;\n}\n\nfunction addField(type, value) {\n  var key;\n\n  if (options.compact) {\n    if (!currentElement[options[type + 'Key']] && (isArray$1(options.alwaysArray) ? options.alwaysArray.indexOf(options[type + 'Key']) !== -1 : options.alwaysArray)) {\n      currentElement[options[type + 'Key']] = [];\n    }\n\n    if (currentElement[options[type + 'Key']] && !isArray$1(currentElement[options[type + 'Key']])) {\n      currentElement[options[type + 'Key']] = [currentElement[options[type + 'Key']]];\n    }\n\n    if (type + 'Fn' in options && typeof value === 'string') {\n      value = options[type + 'Fn'](value, currentElement);\n    }\n\n    if (type === 'instruction' && ('instructionFn' in options || 'instructionNameFn' in options)) {\n      for (key in value) {\n        if (value.hasOwnProperty(key)) {\n          if ('instructionFn' in options) {\n            value[key] = options.instructionFn(value[key], key, currentElement);\n          } else {\n            var temp = value[key];\n            delete value[key];\n            value[options.instructionNameFn(key, temp, currentElement)] = temp;\n          }\n        }\n      }\n    }\n\n    if (isArray$1(currentElement[options[type + 'Key']])) {\n      currentElement[options[type + 'Key']].push(value);\n    } else {\n      currentElement[options[type + 'Key']] = value;\n    }\n  } else {\n    if (!currentElement[options.elementsKey]) {\n      currentElement[options.elementsKey] = [];\n    }\n\n    var element = {};\n    element[options.typeKey] = type;\n\n    if (type === 'instruction') {\n      for (key in value) {\n        if (value.hasOwnProperty(key)) {\n          break;\n        }\n      }\n\n      element[options.nameKey] = 'instructionNameFn' in options ? options.instructionNameFn(key, value, currentElement) : key;\n\n      if (options.instructionHasAttributes) {\n        element[options.attributesKey] = value[key][options.attributesKey];\n\n        if ('instructionFn' in options) {\n          element[options.attributesKey] = options.instructionFn(element[options.attributesKey], key, currentElement);\n        }\n      } else {\n        if ('instructionFn' in options) {\n          value[key] = options.instructionFn(value[key], key, currentElement);\n        }\n\n        element[options.instructionKey] = value[key];\n      }\n    } else {\n      if (type + 'Fn' in options) {\n        value = options[type + 'Fn'](value, currentElement);\n      }\n\n      element[options[type + 'Key']] = value;\n    }\n\n    if (options.addParent) {\n      element[options.parentKey] = currentElement;\n    }\n\n    currentElement[options.elementsKey].push(element);\n  }\n}\n\nfunction manipulateAttributes(attributes) {\n  if ('attributesFn' in options && attributes) {\n    attributes = options.attributesFn(attributes, currentElement);\n  }\n\n  if ((options.trim || 'attributeValueFn' in options || 'attributeNameFn' in options || options.nativeTypeAttributes) && attributes) {\n    var key;\n\n    for (key in attributes) {\n      if (attributes.hasOwnProperty(key)) {\n        if (options.trim) attributes[key] = attributes[key].trim();\n\n        if (options.nativeTypeAttributes) {\n          attributes[key] = nativeType(attributes[key]);\n        }\n\n        if ('attributeValueFn' in options) attributes[key] = options.attributeValueFn(attributes[key], key, currentElement);\n\n        if ('attributeNameFn' in options) {\n          var temp = attributes[key];\n          delete attributes[key];\n          attributes[options.attributeNameFn(key, attributes[key], currentElement)] = temp;\n        }\n      }\n    }\n  }\n\n  return attributes;\n}\n\nfunction onInstruction(instruction) {\n  var attributes = {};\n\n  if (instruction.body && (instruction.name.toLowerCase() === 'xml' || options.instructionHasAttributes)) {\n    var attrsRegExp = /([\\w:-]+)\\s*=\\s*(?:\"([^\"]*)\"|'([^']*)'|(\\w+))\\s*/g;\n    var match;\n\n    while ((match = attrsRegExp.exec(instruction.body)) !== null) {\n      attributes[match[1]] = match[2] || match[3] || match[4];\n    }\n\n    attributes = manipulateAttributes(attributes);\n  }\n\n  if (instruction.name.toLowerCase() === 'xml') {\n    if (options.ignoreDeclaration) {\n      return;\n    }\n\n    currentElement[options.declarationKey] = {};\n\n    if (Object.keys(attributes).length) {\n      currentElement[options.declarationKey][options.attributesKey] = attributes;\n    }\n\n    if (options.addParent) {\n      currentElement[options.declarationKey][options.parentKey] = currentElement;\n    }\n  } else {\n    if (options.ignoreInstruction) {\n      return;\n    }\n\n    if (options.trim) {\n      instruction.body = instruction.body.trim();\n    }\n\n    var value = {};\n\n    if (options.instructionHasAttributes && Object.keys(attributes).length) {\n      value[instruction.name] = {};\n      value[instruction.name][options.attributesKey] = attributes;\n    } else {\n      value[instruction.name] = instruction.body;\n    }\n\n    addField('instruction', value);\n  }\n}\n\nfunction onStartElement(name, attributes) {\n  var element;\n\n  if (_typeof(name) === 'object') {\n    attributes = name.attributes;\n    name = name.name;\n  }\n\n  attributes = manipulateAttributes(attributes);\n\n  if ('elementNameFn' in options) {\n    name = options.elementNameFn(name, currentElement);\n  }\n\n  if (options.compact) {\n    element = {};\n\n    if (!options.ignoreAttributes && attributes && Object.keys(attributes).length) {\n      element[options.attributesKey] = {};\n      var key;\n\n      for (key in attributes) {\n        if (attributes.hasOwnProperty(key)) {\n          element[options.attributesKey][key] = attributes[key];\n        }\n      }\n    }\n\n    if (!(name in currentElement) && (isArray$1(options.alwaysArray) ? options.alwaysArray.indexOf(name) !== -1 : options.alwaysArray)) {\n      currentElement[name] = [];\n    }\n\n    if (currentElement[name] && !isArray$1(currentElement[name])) {\n      currentElement[name] = [currentElement[name]];\n    }\n\n    if (isArray$1(currentElement[name])) {\n      currentElement[name].push(element);\n    } else {\n      currentElement[name] = element;\n    }\n  } else {\n    if (!currentElement[options.elementsKey]) {\n      currentElement[options.elementsKey] = [];\n    }\n\n    element = {};\n    element[options.typeKey] = 'element';\n    element[options.nameKey] = name;\n\n    if (!options.ignoreAttributes && attributes && Object.keys(attributes).length) {\n      element[options.attributesKey] = attributes;\n    }\n\n    if (options.alwaysChildren) {\n      element[options.elementsKey] = [];\n    }\n\n    currentElement[options.elementsKey].push(element);\n  }\n\n  element[options.parentKey] = currentElement; // will be deleted in onEndElement() if !options.addParent\n\n  currentElement = element;\n}\n\nfunction onText(text) {\n  if (options.ignoreText) {\n    return;\n  }\n\n  if (!text.trim() && !options.captureSpacesBetweenElements) {\n    return;\n  }\n\n  if (options.trim) {\n    text = text.trim();\n  }\n\n  if (options.nativeType) {\n    text = nativeType(text);\n  }\n\n  if (options.sanitize) {\n    text = text.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;');\n  }\n\n  addField('text', text);\n}\n\nfunction onComment(comment) {\n  if (options.ignoreComment) {\n    return;\n  }\n\n  if (options.trim) {\n    comment = comment.trim();\n  }\n\n  addField('comment', comment);\n}\n\nfunction onEndElement(name) {\n  var parentElement = currentElement[options.parentKey];\n\n  if (!options.addParent) {\n    delete currentElement[options.parentKey];\n  }\n\n  currentElement = parentElement;\n}\n\nfunction onCdata(cdata) {\n  if (options.ignoreCdata) {\n    return;\n  }\n\n  if (options.trim) {\n    cdata = cdata.trim();\n  }\n\n  addField('cdata', cdata);\n}\n\nfunction onDoctype(doctype) {\n  if (options.ignoreDoctype) {\n    return;\n  }\n\n  doctype = doctype.replace(/^ /, '');\n\n  if (options.trim) {\n    doctype = doctype.trim();\n  }\n\n  addField('doctype', doctype);\n}\n\nfunction onError(error) {\n  error.note = error; //console.error(error);\n}\n\nvar xml2js = function xml2js(xml, userOptions) {\n  var parser =  sax.parser(true, {}) ;\n  var result = {};\n  currentElement = result;\n  options = validateOptions(userOptions);\n\n  {\n    parser.opt = {\n      strictEntities: true\n    };\n    parser.onopentag = onStartElement;\n    parser.ontext = onText;\n    parser.oncomment = onComment;\n    parser.onclosetag = onEndElement;\n    parser.onerror = onError;\n    parser.oncdata = onCdata;\n    parser.ondoctype = onDoctype;\n    parser.onprocessinginstruction = onInstruction;\n  }\n\n  {\n    parser.write(xml).close();\n  }\n\n  if (result[options.elementsKey]) {\n    var temp = result[options.elementsKey];\n    delete result[options.elementsKey];\n    result[options.elementsKey] = temp;\n    delete result.text;\n  }\n\n  return result;\n};\n\nfunction validateOptions$1(userOptions) {\n  var options = optionsHelper.copyOptions(userOptions);\n  optionsHelper.ensureSpacesExists(options);\n  return options;\n}\n\nvar xml2json = function xml2json(xml, userOptions) {\n  var options, js, json, parentKey;\n  options = validateOptions$1(userOptions);\n  js = xml2js(xml, options);\n  parentKey = 'compact' in options && options.compact ? '_parent' : 'parent'; // parentKey = ptions.compact ? '_parent' : 'parent'; // consider this\n\n  if ('addParent' in options && options.addParent) {\n    json = JSON.stringify(js, function (k, v) {\n      return k === parentKey ? '_' : v;\n    }, options.spaces);\n  } else {\n    json = JSON.stringify(js, null, options.spaces);\n  }\n\n  return json.replace(/\\u2028/g, \"\\\\u2028\").replace(/\\u2029/g, \"\\\\u2029\");\n};\n\nvar isArray$2 = arrayHelper.isArray;\nvar currentElement$1, currentElementName;\n\nfunction validateOptions$2(userOptions) {\n  var options = optionsHelper.copyOptions(userOptions);\n  optionsHelper.ensureFlagExists('ignoreDeclaration', options);\n  optionsHelper.ensureFlagExists('ignoreInstruction', options);\n  optionsHelper.ensureFlagExists('ignoreAttributes', options);\n  optionsHelper.ensureFlagExists('ignoreText', options);\n  optionsHelper.ensureFlagExists('ignoreComment', options);\n  optionsHelper.ensureFlagExists('ignoreCdata', options);\n  optionsHelper.ensureFlagExists('ignoreDoctype', options);\n  optionsHelper.ensureFlagExists('compact', options);\n  optionsHelper.ensureFlagExists('indentText', options);\n  optionsHelper.ensureFlagExists('indentCdata', options);\n  optionsHelper.ensureFlagExists('indentAttributes', options);\n  optionsHelper.ensureFlagExists('indentInstruction', options);\n  optionsHelper.ensureFlagExists('fullTagEmptyElement', options);\n  optionsHelper.ensureFlagExists('noQuotesForNativeAttributes', options);\n  optionsHelper.ensureSpacesExists(options);\n\n  if (typeof options.spaces === 'number') {\n    options.spaces = Array(options.spaces + 1).join(' ');\n  }\n\n  optionsHelper.ensureKeyExists('declaration', options);\n  optionsHelper.ensureKeyExists('instruction', options);\n  optionsHelper.ensureKeyExists('attributes', options);\n  optionsHelper.ensureKeyExists('text', options);\n  optionsHelper.ensureKeyExists('comment', options);\n  optionsHelper.ensureKeyExists('cdata', options);\n  optionsHelper.ensureKeyExists('doctype', options);\n  optionsHelper.ensureKeyExists('type', options);\n  optionsHelper.ensureKeyExists('name', options);\n  optionsHelper.ensureKeyExists('elements', options);\n  optionsHelper.checkFnExists('doctype', options);\n  optionsHelper.checkFnExists('instruction', options);\n  optionsHelper.checkFnExists('cdata', options);\n  optionsHelper.checkFnExists('comment', options);\n  optionsHelper.checkFnExists('text', options);\n  optionsHelper.checkFnExists('instructionName', options);\n  optionsHelper.checkFnExists('elementName', options);\n  optionsHelper.checkFnExists('attributeName', options);\n  optionsHelper.checkFnExists('attributeValue', options);\n  optionsHelper.checkFnExists('attributes', options);\n  optionsHelper.checkFnExists('fullTagEmptyElement', options);\n  return options;\n}\n\nfunction writeIndentation(options, depth, firstLine) {\n  return (!firstLine && options.spaces ? '\\n' : '') + Array(depth + 1).join(options.spaces);\n}\n\nfunction writeAttributes(attributes, options, depth) {\n  if (options.ignoreAttributes) {\n    return '';\n  }\n\n  if ('attributesFn' in options) {\n    attributes = options.attributesFn(attributes, currentElementName, currentElement$1);\n  }\n\n  var key,\n      attr,\n      attrName,\n      quote,\n      result = [];\n\n  for (key in attributes) {\n    if (attributes.hasOwnProperty(key) && attributes[key] !== null && attributes[key] !== undefined) {\n      quote = options.noQuotesForNativeAttributes && typeof attributes[key] !== 'string' ? '' : '\"';\n      attr = '' + attributes[key]; // ensure number and boolean are converted to String\n\n      attr = attr.replace(/\"/g, '&quot;');\n      attrName = 'attributeNameFn' in options ? options.attributeNameFn(key, attr, currentElementName, currentElement$1) : key;\n      result.push(options.spaces && options.indentAttributes ? writeIndentation(options, depth + 1, false) : ' ');\n      result.push(attrName + '=' + quote + ('attributeValueFn' in options ? options.attributeValueFn(attr, key, currentElementName, currentElement$1) : attr) + quote);\n    }\n  }\n\n  if (attributes && Object.keys(attributes).length && options.spaces && options.indentAttributes) {\n    result.push(writeIndentation(options, depth, false));\n  }\n\n  return result.join('');\n}\n\nfunction writeDeclaration(declaration, options, depth) {\n  currentElement$1 = declaration;\n  currentElementName = 'xml';\n  return options.ignoreDeclaration ? '' : '<?' + 'xml' + writeAttributes(declaration[options.attributesKey], options, depth) + '?>';\n}\n\nfunction writeInstruction(instruction, options, depth) {\n  if (options.ignoreInstruction) {\n    return '';\n  }\n\n  var key;\n\n  for (key in instruction) {\n    if (instruction.hasOwnProperty(key)) {\n      break;\n    }\n  }\n\n  var instructionName = 'instructionNameFn' in options ? options.instructionNameFn(key, instruction[key], currentElementName, currentElement$1) : key;\n\n  if (_typeof(instruction[key]) === 'object') {\n    currentElement$1 = instruction;\n    currentElementName = instructionName;\n    return '<?' + instructionName + writeAttributes(instruction[key][options.attributesKey], options, depth) + '?>';\n  } else {\n    var instructionValue = instruction[key] ? instruction[key] : '';\n    if ('instructionFn' in options) instructionValue = options.instructionFn(instructionValue, key, currentElementName, currentElement$1);\n    return '<?' + instructionName + (instructionValue ? ' ' + instructionValue : '') + '?>';\n  }\n}\n\nfunction writeComment(comment, options) {\n  return options.ignoreComment ? '' : '<!--' + ('commentFn' in options ? options.commentFn(comment, currentElementName, currentElement$1) : comment) + '-->';\n}\n\nfunction writeCdata(cdata, options) {\n  return options.ignoreCdata ? '' : '<![CDATA[' + ('cdataFn' in options ? options.cdataFn(cdata, currentElementName, currentElement$1) : cdata.replace(']]>', ']]]]><![CDATA[>')) + ']]>';\n}\n\nfunction writeDoctype(doctype, options) {\n  return options.ignoreDoctype ? '' : '<!DOCTYPE ' + ('doctypeFn' in options ? options.doctypeFn(doctype, currentElementName, currentElement$1) : doctype) + '>';\n}\n\nfunction writeText(text, options) {\n  if (options.ignoreText) return '';\n  text = '' + text; // ensure Number and Boolean are converted to String\n\n  text = text.replace(/&amp;/g, '&'); // desanitize to avoid double sanitization\n\n  text = text.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;');\n  return 'textFn' in options ? options.textFn(text, currentElementName, currentElement$1) : text;\n}\n\nfunction hasContent(element, options) {\n  var i;\n\n  if (element.elements && element.elements.length) {\n    for (i = 0; i < element.elements.length; ++i) {\n      switch (element.elements[i][options.typeKey]) {\n        case 'text':\n          if (options.indentText) {\n            return true;\n          }\n\n          break;\n        // skip to next key\n\n        case 'cdata':\n          if (options.indentCdata) {\n            return true;\n          }\n\n          break;\n        // skip to next key\n\n        case 'instruction':\n          if (options.indentInstruction) {\n            return true;\n          }\n\n          break;\n        // skip to next key\n\n        case 'doctype':\n        case 'comment':\n        case 'element':\n          return true;\n\n        default:\n          return true;\n      }\n    }\n  }\n\n  return false;\n}\n\nfunction writeElement(element, options, depth) {\n  currentElement$1 = element;\n  currentElementName = element.name;\n  var xml = [],\n      elementName = 'elementNameFn' in options ? options.elementNameFn(element.name, element) : element.name;\n  xml.push('<' + elementName);\n\n  if (element[options.attributesKey]) {\n    xml.push(writeAttributes(element[options.attributesKey], options, depth));\n  }\n\n  var withClosingTag = element[options.elementsKey] && element[options.elementsKey].length || element[options.attributesKey] && element[options.attributesKey]['xml:space'] === 'preserve';\n\n  if (!withClosingTag) {\n    if ('fullTagEmptyElementFn' in options) {\n      withClosingTag = options.fullTagEmptyElementFn(element.name, element);\n    } else {\n      withClosingTag = options.fullTagEmptyElement;\n    }\n  }\n\n  if (withClosingTag) {\n    xml.push('>');\n\n    if (element[options.elementsKey] && element[options.elementsKey].length) {\n      xml.push(writeElements(element[options.elementsKey], options, depth + 1));\n      currentElement$1 = element;\n      currentElementName = element.name;\n    }\n\n    xml.push(options.spaces && hasContent(element, options) ? '\\n' + Array(depth + 1).join(options.spaces) : '');\n    xml.push('</' + elementName + '>');\n  } else {\n    xml.push('/>');\n  }\n\n  return xml.join('');\n}\n\nfunction writeElements(elements, options, depth, firstLine) {\n  return elements.reduce(function (xml, element) {\n    var indent = writeIndentation(options, depth, firstLine && !xml);\n\n    switch (element.type) {\n      case 'element':\n        return xml + indent + writeElement(element, options, depth);\n\n      case 'comment':\n        return xml + indent + writeComment(element[options.commentKey], options);\n\n      case 'doctype':\n        return xml + indent + writeDoctype(element[options.doctypeKey], options);\n\n      case 'cdata':\n        return xml + (options.indentCdata ? indent : '') + writeCdata(element[options.cdataKey], options);\n\n      case 'text':\n        return xml + (options.indentText ? indent : '') + writeText(element[options.textKey], options);\n\n      case 'instruction':\n        var instruction = {};\n        instruction[element[options.nameKey]] = element[options.attributesKey] ? element : element[options.instructionKey];\n        return xml + (options.indentInstruction ? indent : '') + writeInstruction(instruction, options, depth);\n    }\n  }, '');\n}\n\nfunction hasContentCompact(element, options, anyContent) {\n  var key;\n\n  for (key in element) {\n    if (element.hasOwnProperty(key)) {\n      switch (key) {\n        case options.parentKey:\n        case options.attributesKey:\n          break;\n        // skip to next key\n\n        case options.textKey:\n          if (options.indentText || anyContent) {\n            return true;\n          }\n\n          break;\n        // skip to next key\n\n        case options.cdataKey:\n          if (options.indentCdata || anyContent) {\n            return true;\n          }\n\n          break;\n        // skip to next key\n\n        case options.instructionKey:\n          if (options.indentInstruction || anyContent) {\n            return true;\n          }\n\n          break;\n        // skip to next key\n\n        case options.doctypeKey:\n        case options.commentKey:\n          return true;\n\n        default:\n          return true;\n      }\n    }\n  }\n\n  return false;\n}\n\nfunction writeElementCompact(element, name, options, depth, indent) {\n  currentElement$1 = element;\n  currentElementName = name;\n  var elementName = 'elementNameFn' in options ? options.elementNameFn(name, element) : name;\n\n  if (typeof element === 'undefined' || element === null || element === '') {\n    return 'fullTagEmptyElementFn' in options && options.fullTagEmptyElementFn(name, element) || options.fullTagEmptyElement ? '<' + elementName + '></' + elementName + '>' : '<' + elementName + '/>';\n  }\n\n  var xml = [];\n\n  if (name) {\n    xml.push('<' + elementName);\n\n    if (_typeof(element) !== 'object') {\n      xml.push('>' + writeText(element, options) + '</' + elementName + '>');\n      return xml.join('');\n    }\n\n    if (element[options.attributesKey]) {\n      xml.push(writeAttributes(element[options.attributesKey], options, depth));\n    }\n\n    var withClosingTag = hasContentCompact(element, options, true) || element[options.attributesKey] && element[options.attributesKey]['xml:space'] === 'preserve';\n\n    if (!withClosingTag) {\n      if ('fullTagEmptyElementFn' in options) {\n        withClosingTag = options.fullTagEmptyElementFn(name, element);\n      } else {\n        withClosingTag = options.fullTagEmptyElement;\n      }\n    }\n\n    if (withClosingTag) {\n      xml.push('>');\n    } else {\n      xml.push('/>');\n      return xml.join('');\n    }\n  }\n\n  xml.push(writeElementsCompact(element, options, depth + 1, false));\n  currentElement$1 = element;\n  currentElementName = name;\n\n  if (name) {\n    xml.push((indent ? writeIndentation(options, depth, false) : '') + '</' + elementName + '>');\n  }\n\n  return xml.join('');\n}\n\nfunction writeElementsCompact(element, options, depth, firstLine) {\n  var i,\n      key,\n      nodes,\n      xml = [];\n\n  for (key in element) {\n    if (element.hasOwnProperty(key)) {\n      nodes = isArray$2(element[key]) ? element[key] : [element[key]];\n\n      for (i = 0; i < nodes.length; ++i) {\n        switch (key) {\n          case options.declarationKey:\n            xml.push(writeDeclaration(nodes[i], options, depth));\n            break;\n\n          case options.instructionKey:\n            xml.push((options.indentInstruction ? writeIndentation(options, depth, firstLine) : '') + writeInstruction(nodes[i], options, depth));\n            break;\n\n          case options.attributesKey:\n          case options.parentKey:\n            break;\n          // skip\n\n          case options.textKey:\n            xml.push((options.indentText ? writeIndentation(options, depth, firstLine) : '') + writeText(nodes[i], options));\n            break;\n\n          case options.cdataKey:\n            xml.push((options.indentCdata ? writeIndentation(options, depth, firstLine) : '') + writeCdata(nodes[i], options));\n            break;\n\n          case options.doctypeKey:\n            xml.push(writeIndentation(options, depth, firstLine) + writeDoctype(nodes[i], options));\n            break;\n\n          case options.commentKey:\n            xml.push(writeIndentation(options, depth, firstLine) + writeComment(nodes[i], options));\n            break;\n\n          default:\n            xml.push(writeIndentation(options, depth, firstLine) + writeElementCompact(nodes[i], key, options, depth, hasContentCompact(nodes[i], options)));\n        }\n\n        firstLine = firstLine && !xml.length;\n      }\n    }\n  }\n\n  return xml.join('');\n}\n\nvar js2xml = function js2xml(js, options) {\n  options = validateOptions$2(options);\n  var xml = [];\n  currentElement$1 = js;\n  currentElementName = '_root_';\n\n  if (options.compact) {\n    xml.push(writeElementsCompact(js, options, 0, true));\n  } else {\n    if (js[options.declarationKey]) {\n      xml.push(writeDeclaration(js[options.declarationKey], options, 0));\n    }\n\n    if (js[options.elementsKey] && js[options.elementsKey].length) {\n      xml.push(writeElements(js[options.elementsKey], options, 0, !xml.length));\n    }\n  }\n\n  return xml.join('');\n};\n\nvar json2xml = function json2xml(json, options) {\n  if (json instanceof Buffer) {\n    json = json.toString();\n  }\n\n  var js = null;\n\n  if (typeof json === 'string') {\n    try {\n      js = JSON.parse(json);\n    } catch (e) {\n      throw new Error('The JSON structure is invalid');\n    }\n  } else {\n    js = json;\n  }\n\n  return js2xml(js, options);\n};\n\n/*jslint node:true */\n\nvar lib = {\n  xml2js: xml2js,\n  xml2json: xml2json,\n  js2xml: js2xml,\n  json2xml: json2xml\n};\n\nvar ElementTypes = {\n  Standalone: 'Standalone',\n  GenericSpan: 'GenericSpan',\n  GenericSpanStart: 'GenericSpanStart',\n  GenericSpanEnd: 'GenericSpanEnd',\n  Span: 'Span',\n  SpanStart: 'SpanStart',\n  SpanEnd: 'SpanEnd',\n  Marker: 'Marker'\n};\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction makeInlineElement(type, attributes, contents) {\n  var contentsObj = contents !== undefined ? {\n    contents: contents\n  } : {};\n  var dataObj = Object.assign({}, attributes, contentsObj);\n  return _defineProperty({}, type, dataObj);\n}\n\nvar _elementTypeToTagMap, _factories;\n\nfunction _defineProperty$1(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\nvar ElementTypes2 = {\n  elementTypeToTagMap: (_elementTypeToTagMap = {}, _defineProperty$1(_elementTypeToTagMap, ElementTypes.Standalone, 'ph'), _defineProperty$1(_elementTypeToTagMap, ElementTypes.GenericSpan, 'pc'), _defineProperty$1(_elementTypeToTagMap, ElementTypes.GenericSpanStart, 'sc'), _defineProperty$1(_elementTypeToTagMap, ElementTypes.GenericSpanEnd, 'ec'), _defineProperty$1(_elementTypeToTagMap, ElementTypes.Span, 'pc'), _defineProperty$1(_elementTypeToTagMap, ElementTypes.SpanStart, 'sc'), _defineProperty$1(_elementTypeToTagMap, ElementTypes.SpanEnd, 'ec'), _elementTypeToTagMap),\n  tagToElementTypeMap: {\n    ph: ElementTypes.Standalone,\n    pc: ElementTypes.Span,\n    sc: ElementTypes.SpanStart,\n    ec: ElementTypes.SpanEnd\n  },\n  factories: (_factories = {}, _defineProperty$1(_factories, ElementTypes.Standalone, function (attributes) {\n    return makeInlineElement(ElementTypes.Standalone, attributes);\n  }), _defineProperty$1(_factories, ElementTypes.GenericSpan, function (attributes, contents) {\n    return makeInlineElement(ElementTypes.GenericSpan, attributes, contents);\n  }), _defineProperty$1(_factories, ElementTypes.GenericSpanStart, function (attributes) {\n    return makeInlineElement(ElementTypes.GenericSpanStart, attributes);\n  }), _defineProperty$1(_factories, ElementTypes.GenericSpanEnd, function (attributes) {\n    return makeInlineElement(ElementTypes.GenericSpanEnd, attributes);\n  }), _defineProperty$1(_factories, ElementTypes.Span, function (attributes, contents) {\n    return makeInlineElement(ElementTypes.Span, attributes, contents);\n  }), _defineProperty$1(_factories, ElementTypes.SpanStart, function (attributes, contents) {\n    return makeInlineElement(ElementTypes.SpanStart, attributes, contents);\n  }), _defineProperty$1(_factories, ElementTypes.SpanEnd, function (attributes, contents) {\n    return makeInlineElement(ElementTypes.SpanEnd, attributes, contents);\n  }), _factories)\n};\n\nfunction elementTypeToTag(type, types) {\n  return types.elementTypeToTagMap[type];\n}\nfunction tagToElementType(tagName, types) {\n  return types.tagToElementTypeMap[tagName];\n}\n\nfunction extractValue(valueElements, elementTypeInfo) {\n  if (valueElements === undefined || valueElements === null || valueElements === '') {\n    return '';\n  }\n\n  if (Array.isArray(valueElements) && valueElements.length > 1) {\n    return valueElements.map(function (valueElement) {\n      return extractValue(valueElement, elementTypeInfo);\n    });\n  }\n\n  var valueElement = Array.isArray(valueElements) ? valueElements[0] || '' : valueElements;\n\n  if (valueElement.type === 'text') {\n    if (/\\n\\s*$/.test(valueElement.text)) {\n      return valueElement.text.substr(0, valueElement.text.lastIndexOf('\\n'));\n    }\n\n    return valueElement.text;\n  }\n\n  var elementType = tagToElementType(valueElement.name, elementTypeInfo);\n\n  if (valueElement.type === 'element' && elementType !== undefined) {\n    var inlineElementFactory = elementTypeInfo.factories[elementType];\n    return inlineElementFactory(valueElement.attributes, extractValue(valueElement.elements, elementTypeInfo));\n  }\n\n  if (valueElement.type === 'cdata') {\n    return valueElement.cdata;\n  }\n\n  return '';\n}\n\nvar xliffToJsClb = function xliffToJsClb(str, options, cb) {\n  if (typeof options === 'function') {\n    cb = options;\n    options = {};\n  }\n\n  options = options || {};\n\n  if (typeof str !== 'string') {\n    var err = new Error('The first parameter was not a string');\n    if (cb) return cb(err);\n    return err;\n  }\n\n  var result = {};\n  var xmlObj;\n\n  try {\n    xmlObj = lib.xml2js(str, {});\n  } catch (err) {\n    if (cb) return cb(err);\n    return err;\n  }\n\n  var xliffRoot = xmlObj.elements.find(function (ele) {\n    return ele.name === 'xliff';\n  });\n\n  if (xliffRoot.attributes) {\n    var srcLang = xliffRoot.attributes.srcLang;\n    var trgLang = xliffRoot.attributes.trgLang;\n    result.sourceLanguage = srcLang;\n    result.targetLanguage = trgLang;\n    if (!result.targetLanguage) delete result.targetLanguage;\n    xliffRoot.elements = xliffRoot.elements.filter(function (child) {\n      return child.type !== 'comment';\n    });\n    result.resources = xliffRoot.elements.reduce(function (resources, file) {\n      var namespace = options.namespace || file.attributes.id;\n      var initValues = {\n        source: '',\n        target: ''\n      };\n      if (!result.targetLanguage) delete initValues.target;\n      file.elements = file.elements || [];\n      file.elements = file.elements.filter(function (child) {\n        return child.type !== 'comment';\n      });\n      resources[namespace] = createUnits(file, initValues);\n      return resources;\n    }, {});\n  }\n\n  if (cb) return cb(null, result);\n  return result;\n};\n\nfunction createUnits(parent, initValues) {\n  return parent.elements.reduce(function (file, unit) {\n    var key = unit.attributes.id;\n    var additionalAttributes = unit.attributes;\n    delete additionalAttributes.id;\n\n    switch (unit.name) {\n      case 'unit':\n        file[key] = createUnit(unit, initValues);\n\n        if (Object.keys(additionalAttributes).length) {\n          Object.assign(file[key], {\n            additionalAttributes: additionalAttributes\n          });\n        }\n\n        return file;\n\n      case 'group':\n        file[key] = {\n          groupUnits: createUnits(unit, initValues)\n        };\n\n        if (Object.keys(additionalAttributes).length) {\n          Object.assign(file[key], {\n            additionalAttributes: additionalAttributes\n          });\n        }\n\n        return file;\n\n      default:\n        return file;\n    }\n  }, {});\n}\n\nfunction createUnit(unit, initValues) {\n  return unit.elements.reduce(function (unit, segment) {\n    if (['segment', 'notes'].indexOf(segment.name) < 0) return unit;\n    segment.elements.forEach(function (element) {\n      switch (element.name) {\n        case 'source':\n        case 'target':\n        case 'note':\n          unit[element.name] = extractValue(element.elements, ElementTypes2);\n          break;\n      }\n    });\n    return unit;\n  }, JSON.parse(JSON.stringify(initValues)));\n}\n\nfunction xliffToJs(str, options, cb) {\n  if (!cb && options === undefined) {\n    return new Promise(function (resolve, reject) {\n      return xliffToJsClb(str, options, function (err, ret) {\n        return err ? reject(err) : resolve(ret);\n      });\n    });\n  }\n\n  if (!cb && typeof options !== 'function') {\n    return new Promise(function (resolve, reject) {\n      return xliffToJsClb(str, options, function (err, ret) {\n        return err ? reject(err) : resolve(ret);\n      });\n    });\n  }\n\n  xliffToJsClb(str, options, cb);\n}\n\nvar _elementTypeToTagMap$1, _factories$1;\n\nfunction _defineProperty$2(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\nvar ElementTypes12 = {\n  elementTypeToTagMap: (_elementTypeToTagMap$1 = {}, _defineProperty$2(_elementTypeToTagMap$1, ElementTypes.Standalone, 'x'), _defineProperty$2(_elementTypeToTagMap$1, ElementTypes.GenericSpan, 'g'), _defineProperty$2(_elementTypeToTagMap$1, ElementTypes.GenericSpanStart, 'bx'), _defineProperty$2(_elementTypeToTagMap$1, ElementTypes.GenericSpanEnd, 'ex'), _defineProperty$2(_elementTypeToTagMap$1, ElementTypes.Span, 'ph'), _defineProperty$2(_elementTypeToTagMap$1, ElementTypes.SpanStart, 'bpt'), _defineProperty$2(_elementTypeToTagMap$1, ElementTypes.SpanEnd, 'ept'), _defineProperty$2(_elementTypeToTagMap$1, ElementTypes.Marker, 'mrk'), _elementTypeToTagMap$1),\n  tagToElementTypeMap: {\n    x: ElementTypes.Standalone,\n    g: ElementTypes.GenericSpan,\n    bx: ElementTypes.GenericSpanStart,\n    ex: ElementTypes.GenericSpanEnd,\n    ph: ElementTypes.Span,\n    bpt: ElementTypes.SpanStart,\n    ept: ElementTypes.SpanEnd,\n    mrk: ElementTypes.Marker\n  },\n  factories: (_factories$1 = {}, _defineProperty$2(_factories$1, ElementTypes.Standalone, function (attributes) {\n    return makeInlineElement(ElementTypes.Standalone, attributes);\n  }), _defineProperty$2(_factories$1, ElementTypes.GenericSpan, function (attributes, contents) {\n    return makeInlineElement(ElementTypes.GenericSpan, attributes, contents);\n  }), _defineProperty$2(_factories$1, ElementTypes.GenericSpanStart, function (attributes) {\n    return makeInlineElement(ElementTypes.GenericSpanStart, attributes);\n  }), _defineProperty$2(_factories$1, ElementTypes.GenericSpanEnd, function (attributes) {\n    return makeInlineElement(ElementTypes.GenericSpanEnd, attributes);\n  }), _defineProperty$2(_factories$1, ElementTypes.Span, function (attributes, contents) {\n    return makeInlineElement(ElementTypes.Span, attributes, contents);\n  }), _defineProperty$2(_factories$1, ElementTypes.SpanStart, function (attributes, contents) {\n    return makeInlineElement(ElementTypes.SpanStart, attributes, contents);\n  }), _defineProperty$2(_factories$1, ElementTypes.SpanEnd, function (attributes, contents) {\n    return makeInlineElement(ElementTypes.SpanEnd, attributes, contents);\n  }), _defineProperty$2(_factories$1, ElementTypes.Marker, function (attributes, contents) {\n    return makeInlineElement(ElementTypes.Marker, attributes, contents);\n  }), _factories$1)\n};\n\nvar xliff12ToJsClb = function xliff12ToJsClb(str, options, cb) {\n  if (typeof options === 'function') {\n    cb = options;\n    options = {};\n  }\n\n  options = options || {};\n\n  if (typeof str !== 'string') {\n    var err = new Error('The first parameter was not a string');\n    if (cb) return cb(err);\n    return err;\n  }\n\n  var result = {};\n  var xmlObj;\n\n  try {\n    xmlObj = lib.xml2js(str, {});\n  } catch (err) {\n    if (cb) return cb(err);\n    return err;\n  }\n\n  var xliffRoot = xmlObj.elements.find(function (ele) {\n    return ele.name === 'xliff';\n  });\n  var srcLang = xliffRoot.elements[0].attributes['source-language'];\n  var trgLang = xliffRoot.elements[0].attributes['target-language'];\n  result.sourceLanguage = srcLang;\n  result.targetLanguage = trgLang;\n  if (!result.targetLanguage) delete result.targetLanguage;\n  result.resources = xliffRoot.elements.reduce(function (resources, file) {\n    var namespace = options.namespace || file.attributes.original;\n    var body = file.elements.find(function (e) {\n      return e.name === 'body';\n    });\n    body.elements = body.elements || [];\n    var bodyChildren = body.elements.filter(function (child) {\n      return child.type !== 'comment';\n    });\n    resources[namespace] = createUnits$1(bodyChildren);\n    return resources;\n  }, {});\n  if (cb) return cb(null, result);\n  return result;\n};\n\nfunction createUnits$1(childElements) {\n  return childElements.reduce(function (parent, child) {\n    var key = child.attributes.id;\n    var children = child.elements.filter(function (e) {\n      return e.name === 'trans-unit' || e.name === 'group';\n    });\n\n    if (children.length) {\n      parent[key] = createGroupTag(child, children);\n    } else {\n      parent[key] = createTransUnitTag(child);\n    }\n\n    return parent;\n  }, {});\n}\n\nfunction createTransUnitTag(transUnit) {\n  var jsUnit = transUnit.elements.reduce(function (unit, element) {\n    switch (element.name) {\n      case 'source':\n      case 'target':\n      case 'note':\n        unit[element.name] = extractValue(element.elements, ElementTypes12);\n        break;\n    }\n\n    return unit;\n  }, {\n    source: ''\n  });\n  return addAdditionalAttributes(jsUnit, transUnit.attributes);\n}\n\nfunction createGroupTag(groupUnit, children) {\n  var jsGroupUnit = {\n    groupUnits: createUnits$1(children)\n  };\n  return addAdditionalAttributes(jsGroupUnit, groupUnit.attributes);\n}\n\nfunction addAdditionalAttributes(jsUnit, attributes) {\n  var additionalAttributes = attributes;\n  delete additionalAttributes.id;\n\n  if (Object.keys(additionalAttributes).length) {\n    Object.assign(jsUnit, {\n      additionalAttributes: additionalAttributes\n    });\n  }\n\n  return jsUnit;\n}\n\nfunction xliff12ToJs(str, options, cb) {\n  if (!cb && options === undefined) {\n    return new Promise(function (resolve, reject) {\n      return xliff12ToJsClb(str, options, function (err, ret) {\n        return err ? reject(err) : resolve(ret);\n      });\n    });\n  }\n\n  if (!cb && typeof options !== 'function') {\n    return new Promise(function (resolve, reject) {\n      return xliff12ToJsClb(str, options, function (err, ret) {\n        return err ? reject(err) : resolve(ret);\n      });\n    });\n  }\n\n  xliff12ToJsClb(str, options, cb);\n}\n\nfunction makeElement(name, attributes, elements) {\n  var el = {\n    type: 'element',\n    name: name\n  };\n\n  if (attributes !== null && attributes !== undefined) {\n    el.attributes = attributes;\n  }\n\n  if (Array.isArray(elements)) {\n    el.elements = elements;\n  } else if (elements === true) {\n    el.elements = [];\n  }\n\n  return el;\n}\nfunction makeText(text) {\n  return {\n    type: 'text',\n    text: text\n  };\n}\nfunction makeValue(content, elementTypeInfo) {\n  if (!Array.isArray(content)) {\n    if (typeof content === 'string' || content instanceof String) {\n      return [makeText(content)];\n    }\n\n    var elementType = Object.keys(content)[0];\n    var elementTag = elementTypeToTag(elementType, elementTypeInfo);\n\n    if (elementTag !== undefined) {\n      var attrsSrc = Object.assign({}, content[elementType]);\n      delete attrsSrc.id;\n      delete attrsSrc.contents;\n      var contents = content[elementType].hasOwnProperty('contents') ? makeValue(content[elementType].contents, elementTypeInfo) : undefined;\n      var attrs = {\n        id: content[elementType].id\n      };\n      Object.keys(attrsSrc).forEach(function (attrKey) {\n        attrs[attrKey] = attrsSrc[attrKey];\n      });\n      return [makeElement(elementTag, attrs, contents)];\n    }\n\n    return [makeText(content)];\n  }\n\n  return content.map(function (segment) {\n    if (typeof segment === 'string' || segment instanceof String) {\n      return makeText(segment);\n    }\n\n    var elementType = Object.keys(segment)[0];\n    var elementTag = elementTypeToTag(elementType, elementTypeInfo);\n\n    if (elementTag !== undefined) {\n      var _attrsSrc = Object.assign({}, segment[elementType]);\n\n      delete _attrsSrc.id;\n      delete _attrsSrc.contents;\n\n      var _contents = segment[elementType].hasOwnProperty('contents') ? makeValue(segment[elementType].contents, elementTypeInfo) : undefined;\n\n      var _attrs = {\n        id: segment[elementType].id\n      };\n      Object.keys(_attrsSrc).forEach(function (attrKey) {\n        _attrs[attrKey] = _attrsSrc[attrKey];\n      });\n      return makeElement(elementTag, _attrs, _contents);\n    }\n\n    var segmentString = '{ ' + Object.keys(segment).reduce(function (result, segmentKey) {\n      return result + segmentKey + ': \"' + segment[segmentKey].toString() + '\"';\n    }, '') + ' }';\n    return {\n      type: 'comment',\n      comment: 'Warning: unexpected segment ' + segmentString + ' was ignored'\n    };\n  });\n}\n\nvar map = {\n  '&': '&amp;',\n  '\"': '&quot;',\n  '\\'': '&apos;',\n  '<': '&lt;',\n  '>': '&gt;'\n};\nfunction escape (str) {\n  Object.keys(map).forEach(function (_char) {\n    str = str.replace(new RegExp(_char, 'g'), map[_char]);\n  });\n  return str;\n}\n\nvar js2xliffClb = function js2xliffClb(obj, opt, cb) {\n  if (!cb && typeof opt === 'function') {\n    cb = opt;\n    opt = {\n      indent: '  '\n    };\n  }\n\n  opt = opt || {\n    indent: '  '\n  };\n  var options = {\n    spaces: opt.indent !== undefined ? opt.indent : '  '\n  };\n  var rootAttributes = {\n    xmlns: 'urn:oasis:names:tc:xliff:document:2.0',\n    version: '2.0',\n    srcLang: obj.sourceLanguage,\n    trgLang: obj.targetLanguage\n  };\n  var root = makeElement('xliff', rootAttributes, true);\n  Object.keys(obj.resources).forEach(function (nsName) {\n    var fileChildren = createUnitTags(obj.resources[nsName]);\n    var f = makeElement('file', {\n      id: nsName\n    }, fileChildren);\n    root.elements.push(f);\n  });\n  var xmlJs = {\n    elements: [root]\n  };\n  var xml = lib.js2xml(xmlJs, options);\n  if (cb) cb(null, xml);\n  return xml;\n};\n\nfunction createUnitTags(unitElements) {\n  return Object.keys(unitElements).map(function (key) {\n    if (unitElements[key].groupUnits) {\n      return createGroupUnitTag(key, unitElements[key]);\n    } else {\n      return createUnitTag(key, unitElements[key]);\n    }\n  });\n}\n\nfunction createGroupUnitTag(id, group) {\n  var additionalAttributes = group.additionalAttributes != null ? group.additionalAttributes : {};\n  var groupUnits = createUnitTags(group.groupUnits);\n  return makeElement('group', Object.assign({\n    id: escape(id)\n  }, additionalAttributes), groupUnits);\n}\n\nfunction createUnitTag(id, unit) {\n  var segment = makeElement('segment', null, true);\n  segment.elements.push(makeElement('source', null, makeValue(unit.source, ElementTypes2)));\n  if (unit.target !== undefined) segment.elements.push(makeElement('target', null, makeValue(unit.target, ElementTypes2)));\n  var subEle = [segment];\n\n  if ('note' in unit) {\n    subEle.unshift(makeElement('notes', null, [makeElement('note', null, [makeText(unit.note)])]));\n  }\n\n  var additionalAttributes = unit.additionalAttributes != null ? unit.additionalAttributes : {};\n  return makeElement('unit', Object.assign({\n    id: escape(id)\n  }, additionalAttributes), subEle);\n}\n\nvar js2xliff = function js2xliff(obj, opt, cb) {\n  if (!cb && opt === undefined) {\n    return new Promise(function (resolve, reject) {\n      return js2xliffClb(obj, opt, function (err, ret) {\n        return err ? reject(err) : resolve(ret);\n      });\n    });\n  }\n\n  if (!cb && typeof opt !== 'function') {\n    return new Promise(function (resolve, reject) {\n      return js2xliffClb(obj, opt, function (err, ret) {\n        return err ? reject(err) : resolve(ret);\n      });\n    });\n  }\n\n  return js2xliffClb(obj, opt, cb);\n};\n\njs2xliff.js2xliffClb = js2xliffClb;\n\nvar jsToXliff12Clb = function jsToXliff12Clb(obj, opt, cb) {\n  if (!cb && typeof opt === 'function') {\n    cb = opt;\n    opt = {\n      indent: '  '\n    };\n  }\n\n  opt = opt || {\n    indent: '  '\n  };\n  var options = {\n    spaces: opt.indent !== undefined ? opt.indent : '  ',\n    xmlLangAttr: !!opt.xmlLangAttr\n  };\n  var rootAttributes = {\n    'xmlns:xsi': 'http://www.w3.org/2001/XMLSchema-instance',\n    'xsi:schemaLocation': 'urn:oasis:names:tc:xliff:document:1.2 http://docs.oasis-open.org/xliff/v1.2/os/xliff-core-1.2-strict.xsd',\n    xmlns: 'urn:oasis:names:tc:xliff:document:1.2',\n    version: '1.2'\n  };\n  var root = makeElement('xliff', rootAttributes, true);\n  Object.keys(obj.resources).forEach(function (nsName) {\n    var bodyChildren = createUnitTags$1(obj.resources[nsName], obj, options);\n    var b = makeElement('body', null, bodyChildren);\n    var fileAttributes = {\n      original: nsName,\n      datatype: 'plaintext',\n      'source-language': obj.sourceLanguage\n    };\n\n    if (obj.targetLanguage != null) {\n      fileAttributes['target-language'] = obj.targetLanguage;\n    }\n\n    var f = makeElement('file', fileAttributes, [b]);\n    root.elements.push(f);\n  });\n  var xmlJs = {\n    elements: [root]\n  };\n  var xml = lib.js2xml(xmlJs, options);\n  if (cb) cb(null, xml);\n  return xml;\n};\n\nfunction createUnitTags$1(unitElements, obj, options) {\n  return Object.keys(unitElements).map(function (key) {\n    if (unitElements[key].groupUnits) {\n      return createGroupUnitTag$1(key, unitElements[key], obj, options);\n    } else {\n      return createTransUnitTag$1(key, unitElements[key], obj, options);\n    }\n  });\n}\n\nfunction createGroupUnitTag$1(key, resource, obj, options) {\n  var additionalAttributes = resource.additionalAttributes != null ? resource.additionalAttributes : {};\n  var groupUnits = createUnitTags$1(resource.groupUnits, obj, options);\n  return makeElement('group', Object.assign({\n    id: escape(key)\n  }, additionalAttributes), groupUnits);\n}\n\nfunction createTransUnitTag$1(key, resource, obj, options) {\n  var additionalAttributes = resource.additionalAttributes != null ? resource.additionalAttributes : {};\n  var u = makeElement('trans-unit', Object.assign({\n    id: escape(key)\n  }, additionalAttributes), true);\n  var sourceAttributes = null;\n\n  if (options.xmlLangAttr) {\n    sourceAttributes = {\n      'xml:lang': obj.sourceLanguage\n    };\n  }\n\n  u.elements.push(makeElement('source', sourceAttributes, makeValue(resource.source, ElementTypes12)));\n\n  if (resource.target != null) {\n    var targetAttributes = null;\n\n    if (options.xmlLangAttr && obj.targetLanguage) {\n      targetAttributes = {\n        'xml:lang': obj.targetLanguage\n      };\n    }\n\n    u.elements.push(makeElement('target', targetAttributes, makeValue(resource.target, ElementTypes12)));\n  }\n\n  if ('note' in resource) {\n    u.elements.push(makeElement('note', null, [makeText(resource.note)]));\n  }\n\n  return u;\n}\n\nvar jsToXliff12 = function jsToXliff12(obj, opt, cb) {\n  if (!cb && opt === undefined) {\n    return new Promise(function (resolve, reject) {\n      return jsToXliff12Clb(obj, opt, function (err, ret) {\n        return err ? reject(err) : resolve(ret);\n      });\n    });\n  }\n\n  if (!cb && typeof opt !== 'function') {\n    return new Promise(function (resolve, reject) {\n      return jsToXliff12Clb(obj, opt, function (err, ret) {\n        return err ? reject(err) : resolve(ret);\n      });\n    });\n  }\n\n  return jsToXliff12Clb(obj, opt, cb);\n};\n\njsToXliff12.jsToXliff12Clb = jsToXliff12Clb;\n\nfunction ofjs(js, what, cb) {\n  var res = {};\n  var nsKeys = Object.keys(js.resources || {});\n\n  if (nsKeys.length === 1) {\n    var ns = js.resources[nsKeys[0]];\n    var keys = Object.keys(ns);\n    keys.forEach(function (key) {\n      res[key] = ns[key][what];\n    });\n    if (cb) return cb(null, res);\n    return res;\n  }\n\n  nsKeys.forEach(function (nsKey) {\n    res[nsKey] = {};\n    var ns = js.resources[nsKey];\n    var keys = Object.keys(ns);\n    keys.forEach(function (key) {\n      res[nsKey][key] = ns[key][what];\n    });\n  });\n  if (cb) return cb(null, res);\n  return res;\n}\n\nfunction targetOfjs(js, cb) {\n  return ofjs(js, 'target', cb);\n}\n\nfunction sourceOfjs(js, cb) {\n  return ofjs(js, 'source', cb);\n}\n\nvar createjsClb = function createjsClb(srcLng, trgLng, srcKeys, trgKeys, ns, cb) {\n  var js = {\n    sourceLanguage: srcLng,\n    targetLanguage: trgLng,\n    resources: {}\n  };\n\n  if (!cb && (!ns || typeof ns !== 'string')) {\n    cb = ns;\n    ns = null;\n  }\n\n  if (ns && typeof ns === 'string') {\n    js.resources[ns] = {};\n    Object.keys(trgKeys).forEach(function (srcKey) {\n      js.resources[ns][srcKey] = {\n        source: srcKeys[srcKey] || '',\n        target: trgKeys[srcKey] || ''\n      };\n    });\n    if (cb) cb(null, js);\n    return js;\n  }\n\n  Object.keys(trgKeys).forEach(function (ns) {\n    js.resources[ns] = {};\n    Object.keys(trgKeys[ns]).forEach(function (srcKey) {\n      js.resources[ns][srcKey] = {\n        source: srcKeys[ns][srcKey] || '',\n        target: trgKeys[ns][srcKey] || ''\n      };\n    });\n  });\n  if (cb) cb(null, js);\n  return js;\n};\n\nvar createjs = function createjs(srcLng, trgLng, srcKeys, trgKeys, ns, cb) {\n  if (!cb && ns === undefined) {\n    return new Promise(function (resolve, reject) {\n      return createjsClb(srcLng, trgLng, srcKeys, trgKeys, ns, function (err, ret) {\n        return err ? reject(err) : resolve(ret);\n      });\n    });\n  }\n\n  if (!cb && typeof ns !== 'function') {\n    return new Promise(function (resolve, reject) {\n      return createjsClb(srcLng, trgLng, srcKeys, trgKeys, ns, function (err, ret) {\n        return err ? reject(err) : resolve(ret);\n      });\n    });\n  }\n\n  return createjsClb(srcLng, trgLng, srcKeys, trgKeys, ns, cb);\n};\n\ncreatejs.createjsClb = createjsClb;\n\nvar createjs$1 = createjs.createjsClb;\nvar js2xliff$1 = js2xliff.js2xliffClb;\n\nvar createxliffClb = function createxliffClb(srcLng, trgLng, srcKeys, trgKeys, ns, cb) {\n  if (!ns || typeof ns !== 'string') {\n    cb = ns;\n    ns = null;\n  }\n\n  if (!cb) {\n    return js2xliff$1(createjs$1(srcLng, trgLng, srcKeys, trgKeys, ns));\n  }\n\n  createjs$1(srcLng, trgLng, srcKeys, trgKeys, ns, function (err, res) {\n    if (err) return cb(err);\n    js2xliff$1(res, cb);\n  });\n};\n\nfunction createxliff(srcLng, trgLng, srcKeys, trgKeys, ns, cb) {\n  if (!cb && ns === undefined) {\n    return new Promise(function (resolve, reject) {\n      return createxliffClb(srcLng, trgLng, srcKeys, trgKeys, ns, function (err, ret) {\n        return err ? reject(err) : resolve(ret);\n      });\n    });\n  }\n\n  if (!cb && typeof ns !== 'function') {\n    return new Promise(function (resolve, reject) {\n      return createxliffClb(srcLng, trgLng, srcKeys, trgKeys, ns, function (err, ret) {\n        return err ? reject(err) : resolve(ret);\n      });\n    });\n  }\n\n  return createxliffClb(srcLng, trgLng, srcKeys, trgKeys, ns, cb);\n}\n\nvar createjs$2 = createjs.createjsClb;\nvar jsToXliff12$1 = jsToXliff12.jsToXliff12Clb;\n\nvar createxliff12Clb = function createxliff12Clb(srcLng, trgLng, srcKeys, trgKeys, ns, cb) {\n  if (!ns || typeof ns !== 'string') {\n    cb = ns;\n    ns = null;\n  }\n\n  if (!cb) {\n    return jsToXliff12$1(createjs$2(srcLng, trgLng, srcKeys, trgKeys, ns));\n  }\n\n  createjs$2(srcLng, trgLng, srcKeys, trgKeys, ns, function (err, res) {\n    if (err) return cb(err);\n    jsToXliff12$1(res, cb);\n  });\n};\n\nfunction createxliff12(srcLng, trgLng, srcKeys, trgKeys, ns, cb) {\n  if (!cb && ns === undefined) {\n    return new Promise(function (resolve, reject) {\n      return createxliff12Clb(srcLng, trgLng, srcKeys, trgKeys, ns, function (err, ret) {\n        return err ? reject(err) : resolve(ret);\n      });\n    });\n  }\n\n  if (!cb && typeof ns !== 'function') {\n    return new Promise(function (resolve, reject) {\n      return createxliff12Clb(srcLng, trgLng, srcKeys, trgKeys, ns, function (err, ret) {\n        return err ? reject(err) : resolve(ret);\n      });\n    });\n  }\n\n  return createxliff12Clb(srcLng, trgLng, srcKeys, trgKeys, ns, cb);\n}\n\nvar index = {\n  xliff2js: xliffToJs,\n  xliff12ToJs: xliff12ToJs,\n  js2xliff: js2xliff,\n  jsToXliff12: jsToXliff12,\n  targetOfjs: targetOfjs,\n  sourceOfjs: sourceOfjs,\n  createjs: createjs,\n  createxliff: createxliff,\n  createxliff12: createxliff12\n};\n\nexport default index;\nexport { createjs, createxliff, createxliff12, js2xliff, jsToXliff12, sourceOfjs, targetOfjs, xliff12ToJs, xliffToJs as xliff2js };\n"],"sourceRoot":""}