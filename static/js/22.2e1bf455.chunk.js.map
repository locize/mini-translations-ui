{"version":3,"sources":["../../file-android/dist/es/js2asr-9f5a1044.js"],"names":["_typeof","obj","Symbol","iterator","constructor","prototype","escape","str","replace","regexString","map","t","concat","join","tagsRegex","RegExp","textOrCData","text","indexOf","test","type","cdata","getElements","jsxml","convert","xml2js","compress","elements","forEach","ele","js2asrClb","resources","opt","cb","indent","comment","options","spaces","compact","resAttr","comments","stringElements","arrayElements","pluralElements","Object","keys","key","Array","isArray","push","name","attributes","arrItem","lastDotIdx","lastIndexOf","baseKey","substring","plForm","length","foundBaseElement","find","quantity","_lastDotIdx","_baseKey","arrIdx","_foundBaseElement","value","_lastDotIdx2","_baseKey2","_plForm","_foundBaseElement2","_lastDotIdx3","_baseKey3","_arrIdx","foundBaseElementWithComment","_jsxml","removeFromArrayElements","filter","e","subElement","splice","res","xml","js2xml","declaration","version","encoding","keyIndex","indexToAppend","slice","js2asr","undefined","Promise","resolve","reject","err","ret"],"mappings":"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","file":"static/js/22.2e1bf455.chunk.js","sourcesContent":["import './index-a41a710f.js';\nimport { d as convert } from './index-f8786b7d.js';\nimport 'stream';\nimport 'string_decoder';\n\nfunction _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nvar escape = function escape(str) {\n  return str.replace(/\"/g, '\\\\\"').replace(/'/g, \"\\\\'\").replace(/\\n/g, '\\\\n');\n};\n\nvar singleTags = ['div', 'br', 'span'];\nvar closingTags = ['b', 'em', 'i', 'cite', 'dfn', 'big', 'small', 'font', 'tt', 's', 'strike', 'del', 'u', 'sup', 'sub', 'ul', 'li', 'p', 'xliff:g', 'a'];\nvar regexString = closingTags.map(function (t) {\n  return \"(</\".concat(t, \">)\");\n}).concat(singleTags.map(function (t) {\n  return \"(<\".concat(t, \")\");\n})).join('|');\nvar tagsRegex = new RegExp(regexString, 'm');\n\nvar textOrCData = function textOrCData(text) {\n  if (text.indexOf('<![CDATA[') < 0 && tagsRegex.test(text)) {\n    return {\n      type: 'cdata',\n      cdata: text\n    };\n  }\n\n  return {\n    type: 'text',\n    text: escape(text)\n  };\n};\n\nvar getElements = function getElements(text) {\n  if (text.indexOf('<![CDATA[') < 0 && tagsRegex.test(text)) {\n    var jsxml = convert.xml2js('<root>' + text + '</root>', {\n      compress: false\n    });\n    jsxml.elements[0].elements.forEach(function (ele) {\n      if (ele.type === 'text') ele.text = escape(ele.text);\n    });\n    return jsxml.elements[0].elements;\n  }\n\n  return [textOrCData(text)];\n};\n\nvar js2asrClb = function js2asrClb(resources, opt, cb) {\n  if (!cb && typeof opt === 'function') {\n    cb = opt;\n    opt = {\n      indent: '  '\n    };\n  }\n\n  opt = opt || {\n    indent: '  '\n  };\n  opt.comment = opt.comment || 'comment';\n  var options = {\n    spaces: opt.indent || '  ',\n    compact: false\n  };\n  var declAttr = {\n    version: '1.0',\n    encoding: 'utf-8'\n  };\n  var resAttr = {};\n  var comments = [];\n  var stringElements = [];\n  var arrayElements = [];\n  var pluralElements = [];\n  Object.keys(resources).forEach(function (key) {\n    if (typeof resources[key] !== 'string' && Array.isArray(resources[key])) {\n      arrayElements.push({\n        type: 'element',\n        name: 'string-array',\n        attributes: {\n          name: key\n        },\n        elements: resources[key].map(function (arrItem) {\n          return {\n            type: 'element',\n            name: 'item',\n            elements: getElements(arrItem)\n          };\n        })\n      });\n    } else if (typeof resources[key] === 'string') {\n      if (/\\.(zero|one|two|few|many|other)$/.test(key)) {\n        var lastDotIdx = key.lastIndexOf('.');\n        var baseKey = key.substring(0, lastDotIdx);\n        var plForm = key.substring(lastDotIdx + 1, key.length);\n        var foundBaseElement = pluralElements.find(function (ele) {\n          return ele.attributes.name === baseKey;\n        });\n\n        if (!foundBaseElement) {\n          foundBaseElement = {\n            type: 'element',\n            name: 'plurals',\n            attributes: {\n              name: baseKey\n            },\n            elements: []\n          };\n          pluralElements.push(foundBaseElement);\n        }\n\n        foundBaseElement.elements.push({\n          type: 'element',\n          name: 'item',\n          attributes: {\n            quantity: plForm\n          },\n          elements: getElements(resources[key])\n        });\n      } else if (/\\.\\d+$/.test(key)) {\n        var _lastDotIdx = key.lastIndexOf('.');\n\n        var _baseKey = key.substring(0, _lastDotIdx);\n\n        var arrIdx = key.substring(_lastDotIdx + 1, key.length);\n\n        var _foundBaseElement = arrayElements.find(function (ele) {\n          return ele.attributes.name === _baseKey;\n        });\n\n        if (!_foundBaseElement) {\n          _foundBaseElement = {\n            type: 'element',\n            name: 'string-array',\n            attributes: {\n              name: _baseKey\n            },\n            elements: []\n          };\n          arrayElements.push(_foundBaseElement);\n        }\n\n        _foundBaseElement.elements[arrIdx] = {\n          type: 'element',\n          name: 'item',\n          elements: getElements(resources[key])\n        };\n      } else {\n        if (resources[key].indexOf('<xliff:g ') > -1) {\n          var jsxml = convert.xml2js('<root>' + resources[key] + '</root>', {\n            compress: false\n          });\n          stringElements.push({\n            type: 'element',\n            name: 'string',\n            attributes: {\n              name: key\n            },\n            elements: jsxml.elements[0].elements\n          });\n        } else {\n          stringElements.push({\n            type: 'element',\n            name: 'string',\n            attributes: {\n              name: key\n            },\n            elements: getElements(resources[key])\n          });\n        }\n      }\n\n      if (resources[key].indexOf('<xliff:g ') > -1 && !resAttr['xmlns:xliff']) {\n        resAttr['xmlns:xliff'] = 'urn:oasis:names:tc:xliff:document:1.2';\n      }\n    }\n\n    if (_typeof(resources[key]) === 'object' && typeof resources[key].value === 'string' && typeof resources[key].comment === 'string') {\n      if (/\\.(zero|one|two|few|many|other)$/.test(key)) {\n        var _lastDotIdx2 = key.lastIndexOf('.');\n\n        var _baseKey2 = key.substring(0, _lastDotIdx2);\n\n        var _plForm = key.substring(_lastDotIdx2 + 1, key.length);\n\n        var _foundBaseElement2 = pluralElements.find(function (ele) {\n          return ele.attributes.name === _baseKey2;\n        });\n\n        if (!_foundBaseElement2) {\n          _foundBaseElement2 = {\n            type: 'element',\n            name: 'plurals',\n            attributes: {\n              name: _baseKey2\n            },\n            elements: []\n          };\n          pluralElements.push(_foundBaseElement2);\n        }\n\n        _foundBaseElement2.elements.push({\n          type: 'element',\n          name: 'item',\n          attributes: {\n            quantity: _plForm\n          },\n          elements: getElements(resources[key].value)\n        });\n      } else if (/\\.\\d+$/.test(key)) {\n        var _lastDotIdx3 = key.lastIndexOf('.');\n\n        var _baseKey3 = key.substring(0, _lastDotIdx3);\n\n        var _arrIdx = key.substring(_lastDotIdx3 + 1, key.length);\n\n        var foundBaseElementWithComment = arrayElements.find(function (ele) {\n          return ele.attributes.name === _baseKey3;\n        });\n\n        if (!foundBaseElementWithComment) {\n          foundBaseElementWithComment = {\n            attributes: {\n              name: _baseKey3\n            },\n            elements: []\n          };\n          arrayElements.push(foundBaseElementWithComment);\n        }\n\n        foundBaseElementWithComment.elements[_arrIdx] = {\n          type: 'element',\n          name: 'item',\n          elements: getElements(resources[key].value)\n        };\n      } else {\n        if (resources[key].value.indexOf('<xliff:g ') > -1) {\n          var _jsxml = convert.xml2js('<root>' + resources[key].value + '</root>', {\n            compress: false\n          });\n\n          stringElements.push({\n            type: 'element',\n            name: 'string',\n            attributes: {\n              name: key\n            },\n            elements: _jsxml.elements[0].elements\n          });\n        } else {\n          var ele = {\n            type: 'element',\n            name: 'string',\n            attributes: {\n              name: key\n            },\n            elements: getElements(resources[key].value)\n          };\n\n          if (opt.comment === 'attribute') {\n            ele.attributes.comment = resources[key].comment;\n          }\n\n          stringElements.push(ele);\n        }\n      }\n\n      comments.push(key);\n    }\n  });\n  var removeFromArrayElements = [];\n  arrayElements.forEach(function (ele) {\n    if (ele.elements.length > 1 && ele.elements.filter(function (e) {\n      return e;\n    }).length === 1) {\n      var subElement = ele.elements.find(function (e) {\n        return e;\n      });\n      var key = \"\".concat(ele.attributes.name, \".\").concat(ele.elements.indexOf(subElement));\n      stringElements.push({\n        type: 'element',\n        name: 'string',\n        attributes: {\n          name: key\n        },\n        elements: subElement.elements\n      });\n      removeFromArrayElements.push(ele);\n    }\n  });\n  removeFromArrayElements.forEach(function (ele) {\n    arrayElements.splice(arrayElements.indexOf(ele), 1);\n  });\n  var res = stringElements.concat(arrayElements).concat(pluralElements);\n  var xml = convert.js2xml({\n    declaration: {\n      attributes: declAttr\n    },\n    elements: [{\n      type: 'element',\n      name: 'resources',\n      elements: res,\n      attributes: resAttr\n    }]\n  }, options);\n\n  if (opt.comment === 'comment') {\n    comments.forEach(function (key) {\n      var keyIndex = xml.indexOf(\"name=\\\"\".concat(key, \"\\\"\"));\n      if (keyIndex < 0) return;\n      var indexToAppend = keyIndex + xml.substring(keyIndex).indexOf('</string>') + 9;\n      if (indexToAppend < 0) return;\n      xml = [xml.slice(0, indexToAppend), \" <!-- \".concat(resources[key].comment, \" -->\"), xml.slice(indexToAppend)].join('');\n    });\n  }\n\n  if (cb) cb(null, xml);\n  return xml;\n};\n\nfunction js2asr(resources, opt, cb) {\n  if (!cb && opt === undefined) {\n    return new Promise(function (resolve, reject) {\n      return js2asrClb(resources, opt, function (err, ret) {\n        return err ? reject(err) : resolve(ret);\n      });\n    });\n  }\n\n  if (!cb && typeof opt !== 'function') {\n    return new Promise(function (resolve, reject) {\n      return js2asrClb(resources, opt, function (err, ret) {\n        return err ? reject(err) : resolve(ret);\n      });\n    });\n  }\n\n  js2asrClb(resources, opt, cb);\n}\n\nexport default js2asr;\n"],"sourceRoot":""}