{"version":3,"file":"static/js/40.0dd3b4d9.chunk.js","mappings":"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","sources":["../../file-tmx/dist/es/index-02b387bf.js"],"sourcesContent":["import xmlbuilder from 'xmlbuilder';\nimport stream from 'stream';\nimport string_decoder from 'string_decoder';\nimport events from 'events';\nimport timers from 'timers';\n\nvar commonjsGlobal = typeof globalThis !== 'undefined' ? globalThis : typeof window !== 'undefined' ? window : typeof global !== 'undefined' ? global : typeof self !== 'undefined' ? self : {};\n\nfunction createCommonjsModule(fn, module) {\n\treturn module = { exports: {} }, fn(module, module.exports), module.exports;\n}\n\nvar defaults = createCommonjsModule(function (module, exports) {\n// Generated by CoffeeScript 1.12.7\n(function() {\n  exports.defaults = {\n    \"0.1\": {\n      explicitCharkey: false,\n      trim: true,\n      normalize: true,\n      normalizeTags: false,\n      attrkey: \"@\",\n      charkey: \"#\",\n      explicitArray: false,\n      ignoreAttrs: false,\n      mergeAttrs: false,\n      explicitRoot: false,\n      validator: null,\n      xmlns: false,\n      explicitChildren: false,\n      childkey: '@@',\n      charsAsChildren: false,\n      includeWhiteChars: false,\n      async: false,\n      strict: true,\n      attrNameProcessors: null,\n      attrValueProcessors: null,\n      tagNameProcessors: null,\n      valueProcessors: null,\n      emptyTag: ''\n    },\n    \"0.2\": {\n      explicitCharkey: false,\n      trim: false,\n      normalize: false,\n      normalizeTags: false,\n      attrkey: \"$\",\n      charkey: \"_\",\n      explicitArray: true,\n      ignoreAttrs: false,\n      mergeAttrs: false,\n      explicitRoot: true,\n      validator: null,\n      xmlns: false,\n      explicitChildren: false,\n      preserveChildrenOrder: false,\n      childkey: '$$',\n      charsAsChildren: false,\n      includeWhiteChars: false,\n      async: false,\n      strict: true,\n      attrNameProcessors: null,\n      attrValueProcessors: null,\n      tagNameProcessors: null,\n      valueProcessors: null,\n      rootName: 'root',\n      xmldec: {\n        'version': '1.0',\n        'encoding': 'UTF-8',\n        'standalone': true\n      },\n      doctype: null,\n      renderOpts: {\n        'pretty': true,\n        'indent': '  ',\n        'newline': '\\n'\n      },\n      headless: false,\n      chunkSize: 10000,\n      emptyTag: '',\n      cdata: false\n    }\n  };\n\n}).call(commonjsGlobal);\n});\nvar defaults_1 = defaults.defaults;\n\nvar builder = createCommonjsModule(function (module, exports) {\n// Generated by CoffeeScript 1.12.7\n(function() {\n  var builder, defaults$1, escapeCDATA, requiresCDATA, wrapCDATA,\n    hasProp = {}.hasOwnProperty;\n\n  builder = xmlbuilder;\n\n  defaults$1 = defaults.defaults;\n\n  requiresCDATA = function(entry) {\n    return typeof entry === \"string\" && (entry.indexOf('&') >= 0 || entry.indexOf('>') >= 0 || entry.indexOf('<') >= 0);\n  };\n\n  wrapCDATA = function(entry) {\n    return \"<![CDATA[\" + (escapeCDATA(entry)) + \"]]>\";\n  };\n\n  escapeCDATA = function(entry) {\n    return entry.replace(']]>', ']]]]><![CDATA[>');\n  };\n\n  exports.Builder = (function() {\n    function Builder(opts) {\n      var key, ref, value;\n      this.options = {};\n      ref = defaults$1[\"0.2\"];\n      for (key in ref) {\n        if (!hasProp.call(ref, key)) continue;\n        value = ref[key];\n        this.options[key] = value;\n      }\n      for (key in opts) {\n        if (!hasProp.call(opts, key)) continue;\n        value = opts[key];\n        this.options[key] = value;\n      }\n    }\n\n    Builder.prototype.buildObject = function(rootObj) {\n      var attrkey, charkey, render, rootElement, rootName;\n      attrkey = this.options.attrkey;\n      charkey = this.options.charkey;\n      if ((Object.keys(rootObj).length === 1) && (this.options.rootName === defaults$1['0.2'].rootName)) {\n        rootName = Object.keys(rootObj)[0];\n        rootObj = rootObj[rootName];\n      } else {\n        rootName = this.options.rootName;\n      }\n      render = (function(_this) {\n        return function(element, obj) {\n          var attr, child, entry, index, key, value;\n          if (typeof obj !== 'object') {\n            if (_this.options.cdata && requiresCDATA(obj)) {\n              element.raw(wrapCDATA(obj));\n            } else {\n              element.txt(obj);\n            }\n          } else if (Array.isArray(obj)) {\n            for (index in obj) {\n              if (!hasProp.call(obj, index)) continue;\n              child = obj[index];\n              for (key in child) {\n                entry = child[key];\n                element = render(element.ele(key), entry).up();\n              }\n            }\n          } else {\n            for (key in obj) {\n              if (!hasProp.call(obj, key)) continue;\n              child = obj[key];\n              if (key === attrkey) {\n                if (typeof child === \"object\") {\n                  for (attr in child) {\n                    value = child[attr];\n                    element = element.att(attr, value);\n                  }\n                }\n              } else if (key === charkey) {\n                if (_this.options.cdata && requiresCDATA(child)) {\n                  element = element.raw(wrapCDATA(child));\n                } else {\n                  element = element.txt(child);\n                }\n              } else if (Array.isArray(child)) {\n                for (index in child) {\n                  if (!hasProp.call(child, index)) continue;\n                  entry = child[index];\n                  if (typeof entry === 'string') {\n                    if (_this.options.cdata && requiresCDATA(entry)) {\n                      element = element.ele(key).raw(wrapCDATA(entry)).up();\n                    } else {\n                      element = element.ele(key, entry).up();\n                    }\n                  } else {\n                    element = render(element.ele(key), entry).up();\n                  }\n                }\n              } else if (typeof child === \"object\") {\n                element = render(element.ele(key), child).up();\n              } else {\n                if (typeof child === 'string' && _this.options.cdata && requiresCDATA(child)) {\n                  element = element.ele(key).raw(wrapCDATA(child)).up();\n                } else {\n                  if (child == null) {\n                    child = '';\n                  }\n                  element = element.ele(key, child.toString()).up();\n                }\n              }\n            }\n          }\n          return element;\n        };\n      })(this);\n      rootElement = builder.create(rootName, this.options.xmldec, this.options.doctype, {\n        headless: this.options.headless,\n        allowSurrogateChars: this.options.allowSurrogateChars\n      });\n      return render(rootElement, rootObj).end(this.options.renderOpts);\n    };\n\n    return Builder;\n\n  })();\n\n}).call(commonjsGlobal);\n});\nvar builder_1 = builder.Builder;\n\nvar sax = createCommonjsModule(function (module, exports) {\n(function (sax) { // wrapper for non-node envs\n  sax.parser = function (strict, opt) { return new SAXParser(strict, opt) };\n  sax.SAXParser = SAXParser;\n  sax.SAXStream = SAXStream;\n  sax.createStream = createStream;\n\n  // When we pass the MAX_BUFFER_LENGTH position, start checking for buffer overruns.\n  // When we check, schedule the next check for MAX_BUFFER_LENGTH - (max(buffer lengths)),\n  // since that's the earliest that a buffer overrun could occur.  This way, checks are\n  // as rare as required, but as often as necessary to ensure never crossing this bound.\n  // Furthermore, buffers are only tested at most once per write(), so passing a very\n  // large string into write() might have undesirable effects, but this is manageable by\n  // the caller, so it is assumed to be safe.  Thus, a call to write() may, in the extreme\n  // edge case, result in creating at most one complete copy of the string passed in.\n  // Set to Infinity to have unlimited buffers.\n  sax.MAX_BUFFER_LENGTH = 64 * 1024;\n\n  var buffers = [\n    'comment', 'sgmlDecl', 'textNode', 'tagName', 'doctype',\n    'procInstName', 'procInstBody', 'entity', 'attribName',\n    'attribValue', 'cdata', 'script'\n  ];\n\n  sax.EVENTS = [\n    'text',\n    'processinginstruction',\n    'sgmldeclaration',\n    'doctype',\n    'comment',\n    'opentagstart',\n    'attribute',\n    'opentag',\n    'closetag',\n    'opencdata',\n    'cdata',\n    'closecdata',\n    'error',\n    'end',\n    'ready',\n    'script',\n    'opennamespace',\n    'closenamespace'\n  ];\n\n  function SAXParser (strict, opt) {\n    if (!(this instanceof SAXParser)) {\n      return new SAXParser(strict, opt)\n    }\n\n    var parser = this;\n    clearBuffers(parser);\n    parser.q = parser.c = '';\n    parser.bufferCheckPosition = sax.MAX_BUFFER_LENGTH;\n    parser.opt = opt || {};\n    parser.opt.lowercase = parser.opt.lowercase || parser.opt.lowercasetags;\n    parser.looseCase = parser.opt.lowercase ? 'toLowerCase' : 'toUpperCase';\n    parser.tags = [];\n    parser.closed = parser.closedRoot = parser.sawRoot = false;\n    parser.tag = parser.error = null;\n    parser.strict = !!strict;\n    parser.noscript = !!(strict || parser.opt.noscript);\n    parser.state = S.BEGIN;\n    parser.strictEntities = parser.opt.strictEntities;\n    parser.ENTITIES = parser.strictEntities ? Object.create(sax.XML_ENTITIES) : Object.create(sax.ENTITIES);\n    parser.attribList = [];\n\n    // namespaces form a prototype chain.\n    // it always points at the current tag,\n    // which protos to its parent tag.\n    if (parser.opt.xmlns) {\n      parser.ns = Object.create(rootNS);\n    }\n\n    // mostly just for error reporting\n    parser.trackPosition = parser.opt.position !== false;\n    if (parser.trackPosition) {\n      parser.position = parser.line = parser.column = 0;\n    }\n    emit(parser, 'onready');\n  }\n\n  if (!Object.create) {\n    Object.create = function (o) {\n      function F () {}\n      F.prototype = o;\n      var newf = new F();\n      return newf\n    };\n  }\n\n  if (!Object.keys) {\n    Object.keys = function (o) {\n      var a = [];\n      for (var i in o) if (o.hasOwnProperty(i)) a.push(i);\n      return a\n    };\n  }\n\n  function checkBufferLength (parser) {\n    var maxAllowed = Math.max(sax.MAX_BUFFER_LENGTH, 10);\n    var maxActual = 0;\n    for (var i = 0, l = buffers.length; i < l; i++) {\n      var len = parser[buffers[i]].length;\n      if (len > maxAllowed) {\n        // Text/cdata nodes can get big, and since they're buffered,\n        // we can get here under normal conditions.\n        // Avoid issues by emitting the text node now,\n        // so at least it won't get any bigger.\n        switch (buffers[i]) {\n          case 'textNode':\n            closeText(parser);\n            break\n\n          case 'cdata':\n            emitNode(parser, 'oncdata', parser.cdata);\n            parser.cdata = '';\n            break\n\n          case 'script':\n            emitNode(parser, 'onscript', parser.script);\n            parser.script = '';\n            break\n\n          default:\n            error(parser, 'Max buffer length exceeded: ' + buffers[i]);\n        }\n      }\n      maxActual = Math.max(maxActual, len);\n    }\n    // schedule the next check for the earliest possible buffer overrun.\n    var m = sax.MAX_BUFFER_LENGTH - maxActual;\n    parser.bufferCheckPosition = m + parser.position;\n  }\n\n  function clearBuffers (parser) {\n    for (var i = 0, l = buffers.length; i < l; i++) {\n      parser[buffers[i]] = '';\n    }\n  }\n\n  function flushBuffers (parser) {\n    closeText(parser);\n    if (parser.cdata !== '') {\n      emitNode(parser, 'oncdata', parser.cdata);\n      parser.cdata = '';\n    }\n    if (parser.script !== '') {\n      emitNode(parser, 'onscript', parser.script);\n      parser.script = '';\n    }\n  }\n\n  SAXParser.prototype = {\n    end: function () { end(this); },\n    write: write,\n    resume: function () { this.error = null; return this },\n    close: function () { return this.write(null) },\n    flush: function () { flushBuffers(this); }\n  };\n\n  var Stream;\n  try {\n    Stream = stream.Stream;\n  } catch (ex) {\n    Stream = function () {};\n  }\n\n  var streamWraps = sax.EVENTS.filter(function (ev) {\n    return ev !== 'error' && ev !== 'end'\n  });\n\n  function createStream (strict, opt) {\n    return new SAXStream(strict, opt)\n  }\n\n  function SAXStream (strict, opt) {\n    if (!(this instanceof SAXStream)) {\n      return new SAXStream(strict, opt)\n    }\n\n    Stream.apply(this);\n\n    this._parser = new SAXParser(strict, opt);\n    this.writable = true;\n    this.readable = true;\n\n    var me = this;\n\n    this._parser.onend = function () {\n      me.emit('end');\n    };\n\n    this._parser.onerror = function (er) {\n      me.emit('error', er);\n\n      // if didn't throw, then means error was handled.\n      // go ahead and clear error, so we can write again.\n      me._parser.error = null;\n    };\n\n    this._decoder = null;\n\n    streamWraps.forEach(function (ev) {\n      Object.defineProperty(me, 'on' + ev, {\n        get: function () {\n          return me._parser['on' + ev]\n        },\n        set: function (h) {\n          if (!h) {\n            me.removeAllListeners(ev);\n            me._parser['on' + ev] = h;\n            return h\n          }\n          me.on(ev, h);\n        },\n        enumerable: true,\n        configurable: false\n      });\n    });\n  }\n\n  SAXStream.prototype = Object.create(Stream.prototype, {\n    constructor: {\n      value: SAXStream\n    }\n  });\n\n  SAXStream.prototype.write = function (data) {\n    if (typeof Buffer === 'function' &&\n      typeof Buffer.isBuffer === 'function' &&\n      Buffer.isBuffer(data)) {\n      if (!this._decoder) {\n        var SD = string_decoder.StringDecoder;\n        this._decoder = new SD('utf8');\n      }\n      data = this._decoder.write(data);\n    }\n\n    this._parser.write(data.toString());\n    this.emit('data', data);\n    return true\n  };\n\n  SAXStream.prototype.end = function (chunk) {\n    if (chunk && chunk.length) {\n      this.write(chunk);\n    }\n    this._parser.end();\n    return true\n  };\n\n  SAXStream.prototype.on = function (ev, handler) {\n    var me = this;\n    if (!me._parser['on' + ev] && streamWraps.indexOf(ev) !== -1) {\n      me._parser['on' + ev] = function () {\n        var args = arguments.length === 1 ? [arguments[0]] : Array.apply(null, arguments);\n        args.splice(0, 0, ev);\n        me.emit.apply(me, args);\n      };\n    }\n\n    return Stream.prototype.on.call(me, ev, handler)\n  };\n\n  // this really needs to be replaced with character classes.\n  // XML allows all manner of ridiculous numbers and digits.\n  var CDATA = '[CDATA[';\n  var DOCTYPE = 'DOCTYPE';\n  var XML_NAMESPACE = 'http://www.w3.org/XML/1998/namespace';\n  var XMLNS_NAMESPACE = 'http://www.w3.org/2000/xmlns/';\n  var rootNS = { xml: XML_NAMESPACE, xmlns: XMLNS_NAMESPACE };\n\n  // http://www.w3.org/TR/REC-xml/#NT-NameStartChar\n  // This implementation works on strings, a single character at a time\n  // as such, it cannot ever support astral-plane characters (10000-EFFFF)\n  // without a significant breaking change to either this  parser, or the\n  // JavaScript language.  Implementation of an emoji-capable xml parser\n  // is left as an exercise for the reader.\n  var nameStart = /[:_A-Za-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD]/;\n\n  var nameBody = /[:_A-Za-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\u00B7\\u0300-\\u036F\\u203F-\\u2040.\\d-]/;\n\n  var entityStart = /[#:_A-Za-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD]/;\n  var entityBody = /[#:_A-Za-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\u00B7\\u0300-\\u036F\\u203F-\\u2040.\\d-]/;\n\n  function isWhitespace (c) {\n    return c === ' ' || c === '\\n' || c === '\\r' || c === '\\t'\n  }\n\n  function isQuote (c) {\n    return c === '\"' || c === '\\''\n  }\n\n  function isAttribEnd (c) {\n    return c === '>' || isWhitespace(c)\n  }\n\n  function isMatch (regex, c) {\n    return regex.test(c)\n  }\n\n  function notMatch (regex, c) {\n    return !isMatch(regex, c)\n  }\n\n  var S = 0;\n  sax.STATE = {\n    BEGIN: S++, // leading byte order mark or whitespace\n    BEGIN_WHITESPACE: S++, // leading whitespace\n    TEXT: S++, // general stuff\n    TEXT_ENTITY: S++, // &amp and such.\n    OPEN_WAKA: S++, // <\n    SGML_DECL: S++, // <!BLARG\n    SGML_DECL_QUOTED: S++, // <!BLARG foo \"bar\n    DOCTYPE: S++, // <!DOCTYPE\n    DOCTYPE_QUOTED: S++, // <!DOCTYPE \"//blah\n    DOCTYPE_DTD: S++, // <!DOCTYPE \"//blah\" [ ...\n    DOCTYPE_DTD_QUOTED: S++, // <!DOCTYPE \"//blah\" [ \"foo\n    COMMENT_STARTING: S++, // <!-\n    COMMENT: S++, // <!--\n    COMMENT_ENDING: S++, // <!-- blah -\n    COMMENT_ENDED: S++, // <!-- blah --\n    CDATA: S++, // <![CDATA[ something\n    CDATA_ENDING: S++, // ]\n    CDATA_ENDING_2: S++, // ]]\n    PROC_INST: S++, // <?hi\n    PROC_INST_BODY: S++, // <?hi there\n    PROC_INST_ENDING: S++, // <?hi \"there\" ?\n    OPEN_TAG: S++, // <strong\n    OPEN_TAG_SLASH: S++, // <strong /\n    ATTRIB: S++, // <a\n    ATTRIB_NAME: S++, // <a foo\n    ATTRIB_NAME_SAW_WHITE: S++, // <a foo _\n    ATTRIB_VALUE: S++, // <a foo=\n    ATTRIB_VALUE_QUOTED: S++, // <a foo=\"bar\n    ATTRIB_VALUE_CLOSED: S++, // <a foo=\"bar\"\n    ATTRIB_VALUE_UNQUOTED: S++, // <a foo=bar\n    ATTRIB_VALUE_ENTITY_Q: S++, // <foo bar=\"&quot;\"\n    ATTRIB_VALUE_ENTITY_U: S++, // <foo bar=&quot\n    CLOSE_TAG: S++, // </a\n    CLOSE_TAG_SAW_WHITE: S++, // </a   >\n    SCRIPT: S++, // <script> ...\n    SCRIPT_ENDING: S++ // <script> ... <\n  };\n\n  sax.XML_ENTITIES = {\n    'amp': '&',\n    'gt': '>',\n    'lt': '<',\n    'quot': '\"',\n    'apos': \"'\"\n  };\n\n  sax.ENTITIES = {\n    'amp': '&',\n    'gt': '>',\n    'lt': '<',\n    'quot': '\"',\n    'apos': \"'\",\n    'AElig': 198,\n    'Aacute': 193,\n    'Acirc': 194,\n    'Agrave': 192,\n    'Aring': 197,\n    'Atilde': 195,\n    'Auml': 196,\n    'Ccedil': 199,\n    'ETH': 208,\n    'Eacute': 201,\n    'Ecirc': 202,\n    'Egrave': 200,\n    'Euml': 203,\n    'Iacute': 205,\n    'Icirc': 206,\n    'Igrave': 204,\n    'Iuml': 207,\n    'Ntilde': 209,\n    'Oacute': 211,\n    'Ocirc': 212,\n    'Ograve': 210,\n    'Oslash': 216,\n    'Otilde': 213,\n    'Ouml': 214,\n    'THORN': 222,\n    'Uacute': 218,\n    'Ucirc': 219,\n    'Ugrave': 217,\n    'Uuml': 220,\n    'Yacute': 221,\n    'aacute': 225,\n    'acirc': 226,\n    'aelig': 230,\n    'agrave': 224,\n    'aring': 229,\n    'atilde': 227,\n    'auml': 228,\n    'ccedil': 231,\n    'eacute': 233,\n    'ecirc': 234,\n    'egrave': 232,\n    'eth': 240,\n    'euml': 235,\n    'iacute': 237,\n    'icirc': 238,\n    'igrave': 236,\n    'iuml': 239,\n    'ntilde': 241,\n    'oacute': 243,\n    'ocirc': 244,\n    'ograve': 242,\n    'oslash': 248,\n    'otilde': 245,\n    'ouml': 246,\n    'szlig': 223,\n    'thorn': 254,\n    'uacute': 250,\n    'ucirc': 251,\n    'ugrave': 249,\n    'uuml': 252,\n    'yacute': 253,\n    'yuml': 255,\n    'copy': 169,\n    'reg': 174,\n    'nbsp': 160,\n    'iexcl': 161,\n    'cent': 162,\n    'pound': 163,\n    'curren': 164,\n    'yen': 165,\n    'brvbar': 166,\n    'sect': 167,\n    'uml': 168,\n    'ordf': 170,\n    'laquo': 171,\n    'not': 172,\n    'shy': 173,\n    'macr': 175,\n    'deg': 176,\n    'plusmn': 177,\n    'sup1': 185,\n    'sup2': 178,\n    'sup3': 179,\n    'acute': 180,\n    'micro': 181,\n    'para': 182,\n    'middot': 183,\n    'cedil': 184,\n    'ordm': 186,\n    'raquo': 187,\n    'frac14': 188,\n    'frac12': 189,\n    'frac34': 190,\n    'iquest': 191,\n    'times': 215,\n    'divide': 247,\n    'OElig': 338,\n    'oelig': 339,\n    'Scaron': 352,\n    'scaron': 353,\n    'Yuml': 376,\n    'fnof': 402,\n    'circ': 710,\n    'tilde': 732,\n    'Alpha': 913,\n    'Beta': 914,\n    'Gamma': 915,\n    'Delta': 916,\n    'Epsilon': 917,\n    'Zeta': 918,\n    'Eta': 919,\n    'Theta': 920,\n    'Iota': 921,\n    'Kappa': 922,\n    'Lambda': 923,\n    'Mu': 924,\n    'Nu': 925,\n    'Xi': 926,\n    'Omicron': 927,\n    'Pi': 928,\n    'Rho': 929,\n    'Sigma': 931,\n    'Tau': 932,\n    'Upsilon': 933,\n    'Phi': 934,\n    'Chi': 935,\n    'Psi': 936,\n    'Omega': 937,\n    'alpha': 945,\n    'beta': 946,\n    'gamma': 947,\n    'delta': 948,\n    'epsilon': 949,\n    'zeta': 950,\n    'eta': 951,\n    'theta': 952,\n    'iota': 953,\n    'kappa': 954,\n    'lambda': 955,\n    'mu': 956,\n    'nu': 957,\n    'xi': 958,\n    'omicron': 959,\n    'pi': 960,\n    'rho': 961,\n    'sigmaf': 962,\n    'sigma': 963,\n    'tau': 964,\n    'upsilon': 965,\n    'phi': 966,\n    'chi': 967,\n    'psi': 968,\n    'omega': 969,\n    'thetasym': 977,\n    'upsih': 978,\n    'piv': 982,\n    'ensp': 8194,\n    'emsp': 8195,\n    'thinsp': 8201,\n    'zwnj': 8204,\n    'zwj': 8205,\n    'lrm': 8206,\n    'rlm': 8207,\n    'ndash': 8211,\n    'mdash': 8212,\n    'lsquo': 8216,\n    'rsquo': 8217,\n    'sbquo': 8218,\n    'ldquo': 8220,\n    'rdquo': 8221,\n    'bdquo': 8222,\n    'dagger': 8224,\n    'Dagger': 8225,\n    'bull': 8226,\n    'hellip': 8230,\n    'permil': 8240,\n    'prime': 8242,\n    'Prime': 8243,\n    'lsaquo': 8249,\n    'rsaquo': 8250,\n    'oline': 8254,\n    'frasl': 8260,\n    'euro': 8364,\n    'image': 8465,\n    'weierp': 8472,\n    'real': 8476,\n    'trade': 8482,\n    'alefsym': 8501,\n    'larr': 8592,\n    'uarr': 8593,\n    'rarr': 8594,\n    'darr': 8595,\n    'harr': 8596,\n    'crarr': 8629,\n    'lArr': 8656,\n    'uArr': 8657,\n    'rArr': 8658,\n    'dArr': 8659,\n    'hArr': 8660,\n    'forall': 8704,\n    'part': 8706,\n    'exist': 8707,\n    'empty': 8709,\n    'nabla': 8711,\n    'isin': 8712,\n    'notin': 8713,\n    'ni': 8715,\n    'prod': 8719,\n    'sum': 8721,\n    'minus': 8722,\n    'lowast': 8727,\n    'radic': 8730,\n    'prop': 8733,\n    'infin': 8734,\n    'ang': 8736,\n    'and': 8743,\n    'or': 8744,\n    'cap': 8745,\n    'cup': 8746,\n    'int': 8747,\n    'there4': 8756,\n    'sim': 8764,\n    'cong': 8773,\n    'asymp': 8776,\n    'ne': 8800,\n    'equiv': 8801,\n    'le': 8804,\n    'ge': 8805,\n    'sub': 8834,\n    'sup': 8835,\n    'nsub': 8836,\n    'sube': 8838,\n    'supe': 8839,\n    'oplus': 8853,\n    'otimes': 8855,\n    'perp': 8869,\n    'sdot': 8901,\n    'lceil': 8968,\n    'rceil': 8969,\n    'lfloor': 8970,\n    'rfloor': 8971,\n    'lang': 9001,\n    'rang': 9002,\n    'loz': 9674,\n    'spades': 9824,\n    'clubs': 9827,\n    'hearts': 9829,\n    'diams': 9830\n  };\n\n  Object.keys(sax.ENTITIES).forEach(function (key) {\n    var e = sax.ENTITIES[key];\n    var s = typeof e === 'number' ? String.fromCharCode(e) : e;\n    sax.ENTITIES[key] = s;\n  });\n\n  for (var s in sax.STATE) {\n    sax.STATE[sax.STATE[s]] = s;\n  }\n\n  // shorthand\n  S = sax.STATE;\n\n  function emit (parser, event, data) {\n    parser[event] && parser[event](data);\n  }\n\n  function emitNode (parser, nodeType, data) {\n    if (parser.textNode) closeText(parser);\n    emit(parser, nodeType, data);\n  }\n\n  function closeText (parser) {\n    parser.textNode = textopts(parser.opt, parser.textNode);\n    if (parser.textNode) emit(parser, 'ontext', parser.textNode);\n    parser.textNode = '';\n  }\n\n  function textopts (opt, text) {\n    if (opt.trim) text = text.trim();\n    if (opt.normalize) text = text.replace(/\\s+/g, ' ');\n    return text\n  }\n\n  function error (parser, er) {\n    closeText(parser);\n    if (parser.trackPosition) {\n      er += '\\nLine: ' + parser.line +\n        '\\nColumn: ' + parser.column +\n        '\\nChar: ' + parser.c;\n    }\n    er = new Error(er);\n    parser.error = er;\n    emit(parser, 'onerror', er);\n    return parser\n  }\n\n  function end (parser) {\n    if (parser.sawRoot && !parser.closedRoot) strictFail(parser, 'Unclosed root tag');\n    if ((parser.state !== S.BEGIN) &&\n      (parser.state !== S.BEGIN_WHITESPACE) &&\n      (parser.state !== S.TEXT)) {\n      error(parser, 'Unexpected end');\n    }\n    closeText(parser);\n    parser.c = '';\n    parser.closed = true;\n    emit(parser, 'onend');\n    SAXParser.call(parser, parser.strict, parser.opt);\n    return parser\n  }\n\n  function strictFail (parser, message) {\n    if (typeof parser !== 'object' || !(parser instanceof SAXParser)) {\n      throw new Error('bad call to strictFail')\n    }\n    if (parser.strict) {\n      error(parser, message);\n    }\n  }\n\n  function newTag (parser) {\n    if (!parser.strict) parser.tagName = parser.tagName[parser.looseCase]();\n    var parent = parser.tags[parser.tags.length - 1] || parser;\n    var tag = parser.tag = { name: parser.tagName, attributes: {} };\n\n    // will be overridden if tag contails an xmlns=\"foo\" or xmlns:foo=\"bar\"\n    if (parser.opt.xmlns) {\n      tag.ns = parent.ns;\n    }\n    parser.attribList.length = 0;\n    emitNode(parser, 'onopentagstart', tag);\n  }\n\n  function qname (name, attribute) {\n    var i = name.indexOf(':');\n    var qualName = i < 0 ? [ '', name ] : name.split(':');\n    var prefix = qualName[0];\n    var local = qualName[1];\n\n    // <x \"xmlns\"=\"http://foo\">\n    if (attribute && name === 'xmlns') {\n      prefix = 'xmlns';\n      local = '';\n    }\n\n    return { prefix: prefix, local: local }\n  }\n\n  function attrib (parser) {\n    if (!parser.strict) {\n      parser.attribName = parser.attribName[parser.looseCase]();\n    }\n\n    if (parser.attribList.indexOf(parser.attribName) !== -1 ||\n      parser.tag.attributes.hasOwnProperty(parser.attribName)) {\n      parser.attribName = parser.attribValue = '';\n      return\n    }\n\n    if (parser.opt.xmlns) {\n      var qn = qname(parser.attribName, true);\n      var prefix = qn.prefix;\n      var local = qn.local;\n\n      if (prefix === 'xmlns') {\n        // namespace binding attribute. push the binding into scope\n        if (local === 'xml' && parser.attribValue !== XML_NAMESPACE) {\n          strictFail(parser,\n            'xml: prefix must be bound to ' + XML_NAMESPACE + '\\n' +\n            'Actual: ' + parser.attribValue);\n        } else if (local === 'xmlns' && parser.attribValue !== XMLNS_NAMESPACE) {\n          strictFail(parser,\n            'xmlns: prefix must be bound to ' + XMLNS_NAMESPACE + '\\n' +\n            'Actual: ' + parser.attribValue);\n        } else {\n          var tag = parser.tag;\n          var parent = parser.tags[parser.tags.length - 1] || parser;\n          if (tag.ns === parent.ns) {\n            tag.ns = Object.create(parent.ns);\n          }\n          tag.ns[local] = parser.attribValue;\n        }\n      }\n\n      // defer onattribute events until all attributes have been seen\n      // so any new bindings can take effect. preserve attribute order\n      // so deferred events can be emitted in document order\n      parser.attribList.push([parser.attribName, parser.attribValue]);\n    } else {\n      // in non-xmlns mode, we can emit the event right away\n      parser.tag.attributes[parser.attribName] = parser.attribValue;\n      emitNode(parser, 'onattribute', {\n        name: parser.attribName,\n        value: parser.attribValue\n      });\n    }\n\n    parser.attribName = parser.attribValue = '';\n  }\n\n  function openTag (parser, selfClosing) {\n    if (parser.opt.xmlns) {\n      // emit namespace binding events\n      var tag = parser.tag;\n\n      // add namespace info to tag\n      var qn = qname(parser.tagName);\n      tag.prefix = qn.prefix;\n      tag.local = qn.local;\n      tag.uri = tag.ns[qn.prefix] || '';\n\n      if (tag.prefix && !tag.uri) {\n        strictFail(parser, 'Unbound namespace prefix: ' +\n          JSON.stringify(parser.tagName));\n        tag.uri = qn.prefix;\n      }\n\n      var parent = parser.tags[parser.tags.length - 1] || parser;\n      if (tag.ns && parent.ns !== tag.ns) {\n        Object.keys(tag.ns).forEach(function (p) {\n          emitNode(parser, 'onopennamespace', {\n            prefix: p,\n            uri: tag.ns[p]\n          });\n        });\n      }\n\n      // handle deferred onattribute events\n      // Note: do not apply default ns to attributes:\n      //   http://www.w3.org/TR/REC-xml-names/#defaulting\n      for (var i = 0, l = parser.attribList.length; i < l; i++) {\n        var nv = parser.attribList[i];\n        var name = nv[0];\n        var value = nv[1];\n        var qualName = qname(name, true);\n        var prefix = qualName.prefix;\n        var local = qualName.local;\n        var uri = prefix === '' ? '' : (tag.ns[prefix] || '');\n        var a = {\n          name: name,\n          value: value,\n          prefix: prefix,\n          local: local,\n          uri: uri\n        };\n\n        // if there's any attributes with an undefined namespace,\n        // then fail on them now.\n        if (prefix && prefix !== 'xmlns' && !uri) {\n          strictFail(parser, 'Unbound namespace prefix: ' +\n            JSON.stringify(prefix));\n          a.uri = prefix;\n        }\n        parser.tag.attributes[name] = a;\n        emitNode(parser, 'onattribute', a);\n      }\n      parser.attribList.length = 0;\n    }\n\n    parser.tag.isSelfClosing = !!selfClosing;\n\n    // process the tag\n    parser.sawRoot = true;\n    parser.tags.push(parser.tag);\n    emitNode(parser, 'onopentag', parser.tag);\n    if (!selfClosing) {\n      // special case for <script> in non-strict mode.\n      if (!parser.noscript && parser.tagName.toLowerCase() === 'script') {\n        parser.state = S.SCRIPT;\n      } else {\n        parser.state = S.TEXT;\n      }\n      parser.tag = null;\n      parser.tagName = '';\n    }\n    parser.attribName = parser.attribValue = '';\n    parser.attribList.length = 0;\n  }\n\n  function closeTag (parser) {\n    if (!parser.tagName) {\n      strictFail(parser, 'Weird empty close tag.');\n      parser.textNode += '</>';\n      parser.state = S.TEXT;\n      return\n    }\n\n    if (parser.script) {\n      if (parser.tagName !== 'script') {\n        parser.script += '</' + parser.tagName + '>';\n        parser.tagName = '';\n        parser.state = S.SCRIPT;\n        return\n      }\n      emitNode(parser, 'onscript', parser.script);\n      parser.script = '';\n    }\n\n    // first make sure that the closing tag actually exists.\n    // <a><b></c></b></a> will close everything, otherwise.\n    var t = parser.tags.length;\n    var tagName = parser.tagName;\n    if (!parser.strict) {\n      tagName = tagName[parser.looseCase]();\n    }\n    var closeTo = tagName;\n    while (t--) {\n      var close = parser.tags[t];\n      if (close.name !== closeTo) {\n        // fail the first time in strict mode\n        strictFail(parser, 'Unexpected close tag');\n      } else {\n        break\n      }\n    }\n\n    // didn't find it.  we already failed for strict, so just abort.\n    if (t < 0) {\n      strictFail(parser, 'Unmatched closing tag: ' + parser.tagName);\n      parser.textNode += '</' + parser.tagName + '>';\n      parser.state = S.TEXT;\n      return\n    }\n    parser.tagName = tagName;\n    var s = parser.tags.length;\n    while (s-- > t) {\n      var tag = parser.tag = parser.tags.pop();\n      parser.tagName = parser.tag.name;\n      emitNode(parser, 'onclosetag', parser.tagName);\n\n      var x = {};\n      for (var i in tag.ns) {\n        x[i] = tag.ns[i];\n      }\n\n      var parent = parser.tags[parser.tags.length - 1] || parser;\n      if (parser.opt.xmlns && tag.ns !== parent.ns) {\n        // remove namespace bindings introduced by tag\n        Object.keys(tag.ns).forEach(function (p) {\n          var n = tag.ns[p];\n          emitNode(parser, 'onclosenamespace', { prefix: p, uri: n });\n        });\n      }\n    }\n    if (t === 0) parser.closedRoot = true;\n    parser.tagName = parser.attribValue = parser.attribName = '';\n    parser.attribList.length = 0;\n    parser.state = S.TEXT;\n  }\n\n  function parseEntity (parser) {\n    var entity = parser.entity;\n    var entityLC = entity.toLowerCase();\n    var num;\n    var numStr = '';\n\n    if (parser.ENTITIES[entity]) {\n      return parser.ENTITIES[entity]\n    }\n    if (parser.ENTITIES[entityLC]) {\n      return parser.ENTITIES[entityLC]\n    }\n    entity = entityLC;\n    if (entity.charAt(0) === '#') {\n      if (entity.charAt(1) === 'x') {\n        entity = entity.slice(2);\n        num = parseInt(entity, 16);\n        numStr = num.toString(16);\n      } else {\n        entity = entity.slice(1);\n        num = parseInt(entity, 10);\n        numStr = num.toString(10);\n      }\n    }\n    entity = entity.replace(/^0+/, '');\n    if (isNaN(num) || numStr.toLowerCase() !== entity) {\n      strictFail(parser, 'Invalid character entity');\n      return '&' + parser.entity + ';'\n    }\n\n    return String.fromCodePoint(num)\n  }\n\n  function beginWhiteSpace (parser, c) {\n    if (c === '<') {\n      parser.state = S.OPEN_WAKA;\n      parser.startTagPosition = parser.position;\n    } else if (!isWhitespace(c)) {\n      // have to process this as a text node.\n      // weird, but happens.\n      strictFail(parser, 'Non-whitespace before first tag.');\n      parser.textNode = c;\n      parser.state = S.TEXT;\n    }\n  }\n\n  function charAt (chunk, i) {\n    var result = '';\n    if (i < chunk.length) {\n      result = chunk.charAt(i);\n    }\n    return result\n  }\n\n  function write (chunk) {\n    var parser = this;\n    if (this.error) {\n      throw this.error\n    }\n    if (parser.closed) {\n      return error(parser,\n        'Cannot write after close. Assign an onready handler.')\n    }\n    if (chunk === null) {\n      return end(parser)\n    }\n    if (typeof chunk === 'object') {\n      chunk = chunk.toString();\n    }\n    var i = 0;\n    var c = '';\n    while (true) {\n      c = charAt(chunk, i++);\n      parser.c = c;\n\n      if (!c) {\n        break\n      }\n\n      if (parser.trackPosition) {\n        parser.position++;\n        if (c === '\\n') {\n          parser.line++;\n          parser.column = 0;\n        } else {\n          parser.column++;\n        }\n      }\n\n      switch (parser.state) {\n        case S.BEGIN:\n          parser.state = S.BEGIN_WHITESPACE;\n          if (c === '\\uFEFF') {\n            continue\n          }\n          beginWhiteSpace(parser, c);\n          continue\n\n        case S.BEGIN_WHITESPACE:\n          beginWhiteSpace(parser, c);\n          continue\n\n        case S.TEXT:\n          if (parser.sawRoot && !parser.closedRoot) {\n            var starti = i - 1;\n            while (c && c !== '<' && c !== '&') {\n              c = charAt(chunk, i++);\n              if (c && parser.trackPosition) {\n                parser.position++;\n                if (c === '\\n') {\n                  parser.line++;\n                  parser.column = 0;\n                } else {\n                  parser.column++;\n                }\n              }\n            }\n            parser.textNode += chunk.substring(starti, i - 1);\n          }\n          if (c === '<' && !(parser.sawRoot && parser.closedRoot && !parser.strict)) {\n            parser.state = S.OPEN_WAKA;\n            parser.startTagPosition = parser.position;\n          } else {\n            if (!isWhitespace(c) && (!parser.sawRoot || parser.closedRoot)) {\n              strictFail(parser, 'Text data outside of root node.');\n            }\n            if (c === '&') {\n              parser.state = S.TEXT_ENTITY;\n            } else {\n              parser.textNode += c;\n            }\n          }\n          continue\n\n        case S.SCRIPT:\n          // only non-strict\n          if (c === '<') {\n            parser.state = S.SCRIPT_ENDING;\n          } else {\n            parser.script += c;\n          }\n          continue\n\n        case S.SCRIPT_ENDING:\n          if (c === '/') {\n            parser.state = S.CLOSE_TAG;\n          } else {\n            parser.script += '<' + c;\n            parser.state = S.SCRIPT;\n          }\n          continue\n\n        case S.OPEN_WAKA:\n          // either a /, ?, !, or text is coming next.\n          if (c === '!') {\n            parser.state = S.SGML_DECL;\n            parser.sgmlDecl = '';\n          } else if (isWhitespace(c)) ; else if (isMatch(nameStart, c)) {\n            parser.state = S.OPEN_TAG;\n            parser.tagName = c;\n          } else if (c === '/') {\n            parser.state = S.CLOSE_TAG;\n            parser.tagName = '';\n          } else if (c === '?') {\n            parser.state = S.PROC_INST;\n            parser.procInstName = parser.procInstBody = '';\n          } else {\n            strictFail(parser, 'Unencoded <');\n            // if there was some whitespace, then add that in.\n            if (parser.startTagPosition + 1 < parser.position) {\n              var pad = parser.position - parser.startTagPosition;\n              c = new Array(pad).join(' ') + c;\n            }\n            parser.textNode += '<' + c;\n            parser.state = S.TEXT;\n          }\n          continue\n\n        case S.SGML_DECL:\n          if ((parser.sgmlDecl + c).toUpperCase() === CDATA) {\n            emitNode(parser, 'onopencdata');\n            parser.state = S.CDATA;\n            parser.sgmlDecl = '';\n            parser.cdata = '';\n          } else if (parser.sgmlDecl + c === '--') {\n            parser.state = S.COMMENT;\n            parser.comment = '';\n            parser.sgmlDecl = '';\n          } else if ((parser.sgmlDecl + c).toUpperCase() === DOCTYPE) {\n            parser.state = S.DOCTYPE;\n            if (parser.doctype || parser.sawRoot) {\n              strictFail(parser,\n                'Inappropriately located doctype declaration');\n            }\n            parser.doctype = '';\n            parser.sgmlDecl = '';\n          } else if (c === '>') {\n            emitNode(parser, 'onsgmldeclaration', parser.sgmlDecl);\n            parser.sgmlDecl = '';\n            parser.state = S.TEXT;\n          } else if (isQuote(c)) {\n            parser.state = S.SGML_DECL_QUOTED;\n            parser.sgmlDecl += c;\n          } else {\n            parser.sgmlDecl += c;\n          }\n          continue\n\n        case S.SGML_DECL_QUOTED:\n          if (c === parser.q) {\n            parser.state = S.SGML_DECL;\n            parser.q = '';\n          }\n          parser.sgmlDecl += c;\n          continue\n\n        case S.DOCTYPE:\n          if (c === '>') {\n            parser.state = S.TEXT;\n            emitNode(parser, 'ondoctype', parser.doctype);\n            parser.doctype = true; // just remember that we saw it.\n          } else {\n            parser.doctype += c;\n            if (c === '[') {\n              parser.state = S.DOCTYPE_DTD;\n            } else if (isQuote(c)) {\n              parser.state = S.DOCTYPE_QUOTED;\n              parser.q = c;\n            }\n          }\n          continue\n\n        case S.DOCTYPE_QUOTED:\n          parser.doctype += c;\n          if (c === parser.q) {\n            parser.q = '';\n            parser.state = S.DOCTYPE;\n          }\n          continue\n\n        case S.DOCTYPE_DTD:\n          parser.doctype += c;\n          if (c === ']') {\n            parser.state = S.DOCTYPE;\n          } else if (isQuote(c)) {\n            parser.state = S.DOCTYPE_DTD_QUOTED;\n            parser.q = c;\n          }\n          continue\n\n        case S.DOCTYPE_DTD_QUOTED:\n          parser.doctype += c;\n          if (c === parser.q) {\n            parser.state = S.DOCTYPE_DTD;\n            parser.q = '';\n          }\n          continue\n\n        case S.COMMENT:\n          if (c === '-') {\n            parser.state = S.COMMENT_ENDING;\n          } else {\n            parser.comment += c;\n          }\n          continue\n\n        case S.COMMENT_ENDING:\n          if (c === '-') {\n            parser.state = S.COMMENT_ENDED;\n            parser.comment = textopts(parser.opt, parser.comment);\n            if (parser.comment) {\n              emitNode(parser, 'oncomment', parser.comment);\n            }\n            parser.comment = '';\n          } else {\n            parser.comment += '-' + c;\n            parser.state = S.COMMENT;\n          }\n          continue\n\n        case S.COMMENT_ENDED:\n          if (c !== '>') {\n            strictFail(parser, 'Malformed comment');\n            // allow <!-- blah -- bloo --> in non-strict mode,\n            // which is a comment of \" blah -- bloo \"\n            parser.comment += '--' + c;\n            parser.state = S.COMMENT;\n          } else {\n            parser.state = S.TEXT;\n          }\n          continue\n\n        case S.CDATA:\n          if (c === ']') {\n            parser.state = S.CDATA_ENDING;\n          } else {\n            parser.cdata += c;\n          }\n          continue\n\n        case S.CDATA_ENDING:\n          if (c === ']') {\n            parser.state = S.CDATA_ENDING_2;\n          } else {\n            parser.cdata += ']' + c;\n            parser.state = S.CDATA;\n          }\n          continue\n\n        case S.CDATA_ENDING_2:\n          if (c === '>') {\n            if (parser.cdata) {\n              emitNode(parser, 'oncdata', parser.cdata);\n            }\n            emitNode(parser, 'onclosecdata');\n            parser.cdata = '';\n            parser.state = S.TEXT;\n          } else if (c === ']') {\n            parser.cdata += ']';\n          } else {\n            parser.cdata += ']]' + c;\n            parser.state = S.CDATA;\n          }\n          continue\n\n        case S.PROC_INST:\n          if (c === '?') {\n            parser.state = S.PROC_INST_ENDING;\n          } else if (isWhitespace(c)) {\n            parser.state = S.PROC_INST_BODY;\n          } else {\n            parser.procInstName += c;\n          }\n          continue\n\n        case S.PROC_INST_BODY:\n          if (!parser.procInstBody && isWhitespace(c)) {\n            continue\n          } else if (c === '?') {\n            parser.state = S.PROC_INST_ENDING;\n          } else {\n            parser.procInstBody += c;\n          }\n          continue\n\n        case S.PROC_INST_ENDING:\n          if (c === '>') {\n            emitNode(parser, 'onprocessinginstruction', {\n              name: parser.procInstName,\n              body: parser.procInstBody\n            });\n            parser.procInstName = parser.procInstBody = '';\n            parser.state = S.TEXT;\n          } else {\n            parser.procInstBody += '?' + c;\n            parser.state = S.PROC_INST_BODY;\n          }\n          continue\n\n        case S.OPEN_TAG:\n          if (isMatch(nameBody, c)) {\n            parser.tagName += c;\n          } else {\n            newTag(parser);\n            if (c === '>') {\n              openTag(parser);\n            } else if (c === '/') {\n              parser.state = S.OPEN_TAG_SLASH;\n            } else {\n              if (!isWhitespace(c)) {\n                strictFail(parser, 'Invalid character in tag name');\n              }\n              parser.state = S.ATTRIB;\n            }\n          }\n          continue\n\n        case S.OPEN_TAG_SLASH:\n          if (c === '>') {\n            openTag(parser, true);\n            closeTag(parser);\n          } else {\n            strictFail(parser, 'Forward-slash in opening tag not followed by >');\n            parser.state = S.ATTRIB;\n          }\n          continue\n\n        case S.ATTRIB:\n          // haven't read the attribute name yet.\n          if (isWhitespace(c)) {\n            continue\n          } else if (c === '>') {\n            openTag(parser);\n          } else if (c === '/') {\n            parser.state = S.OPEN_TAG_SLASH;\n          } else if (isMatch(nameStart, c)) {\n            parser.attribName = c;\n            parser.attribValue = '';\n            parser.state = S.ATTRIB_NAME;\n          } else {\n            strictFail(parser, 'Invalid attribute name');\n          }\n          continue\n\n        case S.ATTRIB_NAME:\n          if (c === '=') {\n            parser.state = S.ATTRIB_VALUE;\n          } else if (c === '>') {\n            strictFail(parser, 'Attribute without value');\n            parser.attribValue = parser.attribName;\n            attrib(parser);\n            openTag(parser);\n          } else if (isWhitespace(c)) {\n            parser.state = S.ATTRIB_NAME_SAW_WHITE;\n          } else if (isMatch(nameBody, c)) {\n            parser.attribName += c;\n          } else {\n            strictFail(parser, 'Invalid attribute name');\n          }\n          continue\n\n        case S.ATTRIB_NAME_SAW_WHITE:\n          if (c === '=') {\n            parser.state = S.ATTRIB_VALUE;\n          } else if (isWhitespace(c)) {\n            continue\n          } else {\n            strictFail(parser, 'Attribute without value');\n            parser.tag.attributes[parser.attribName] = '';\n            parser.attribValue = '';\n            emitNode(parser, 'onattribute', {\n              name: parser.attribName,\n              value: ''\n            });\n            parser.attribName = '';\n            if (c === '>') {\n              openTag(parser);\n            } else if (isMatch(nameStart, c)) {\n              parser.attribName = c;\n              parser.state = S.ATTRIB_NAME;\n            } else {\n              strictFail(parser, 'Invalid attribute name');\n              parser.state = S.ATTRIB;\n            }\n          }\n          continue\n\n        case S.ATTRIB_VALUE:\n          if (isWhitespace(c)) {\n            continue\n          } else if (isQuote(c)) {\n            parser.q = c;\n            parser.state = S.ATTRIB_VALUE_QUOTED;\n          } else {\n            strictFail(parser, 'Unquoted attribute value');\n            parser.state = S.ATTRIB_VALUE_UNQUOTED;\n            parser.attribValue = c;\n          }\n          continue\n\n        case S.ATTRIB_VALUE_QUOTED:\n          if (c !== parser.q) {\n            if (c === '&') {\n              parser.state = S.ATTRIB_VALUE_ENTITY_Q;\n            } else {\n              parser.attribValue += c;\n            }\n            continue\n          }\n          attrib(parser);\n          parser.q = '';\n          parser.state = S.ATTRIB_VALUE_CLOSED;\n          continue\n\n        case S.ATTRIB_VALUE_CLOSED:\n          if (isWhitespace(c)) {\n            parser.state = S.ATTRIB;\n          } else if (c === '>') {\n            openTag(parser);\n          } else if (c === '/') {\n            parser.state = S.OPEN_TAG_SLASH;\n          } else if (isMatch(nameStart, c)) {\n            strictFail(parser, 'No whitespace between attributes');\n            parser.attribName = c;\n            parser.attribValue = '';\n            parser.state = S.ATTRIB_NAME;\n          } else {\n            strictFail(parser, 'Invalid attribute name');\n          }\n          continue\n\n        case S.ATTRIB_VALUE_UNQUOTED:\n          if (!isAttribEnd(c)) {\n            if (c === '&') {\n              parser.state = S.ATTRIB_VALUE_ENTITY_U;\n            } else {\n              parser.attribValue += c;\n            }\n            continue\n          }\n          attrib(parser);\n          if (c === '>') {\n            openTag(parser);\n          } else {\n            parser.state = S.ATTRIB;\n          }\n          continue\n\n        case S.CLOSE_TAG:\n          if (!parser.tagName) {\n            if (isWhitespace(c)) {\n              continue\n            } else if (notMatch(nameStart, c)) {\n              if (parser.script) {\n                parser.script += '</' + c;\n                parser.state = S.SCRIPT;\n              } else {\n                strictFail(parser, 'Invalid tagname in closing tag.');\n              }\n            } else {\n              parser.tagName = c;\n            }\n          } else if (c === '>') {\n            closeTag(parser);\n          } else if (isMatch(nameBody, c)) {\n            parser.tagName += c;\n          } else if (parser.script) {\n            parser.script += '</' + parser.tagName;\n            parser.tagName = '';\n            parser.state = S.SCRIPT;\n          } else {\n            if (!isWhitespace(c)) {\n              strictFail(parser, 'Invalid tagname in closing tag');\n            }\n            parser.state = S.CLOSE_TAG_SAW_WHITE;\n          }\n          continue\n\n        case S.CLOSE_TAG_SAW_WHITE:\n          if (isWhitespace(c)) {\n            continue\n          }\n          if (c === '>') {\n            closeTag(parser);\n          } else {\n            strictFail(parser, 'Invalid characters in closing tag');\n          }\n          continue\n\n        case S.TEXT_ENTITY:\n        case S.ATTRIB_VALUE_ENTITY_Q:\n        case S.ATTRIB_VALUE_ENTITY_U:\n          var returnState;\n          var buffer;\n          switch (parser.state) {\n            case S.TEXT_ENTITY:\n              returnState = S.TEXT;\n              buffer = 'textNode';\n              break\n\n            case S.ATTRIB_VALUE_ENTITY_Q:\n              returnState = S.ATTRIB_VALUE_QUOTED;\n              buffer = 'attribValue';\n              break\n\n            case S.ATTRIB_VALUE_ENTITY_U:\n              returnState = S.ATTRIB_VALUE_UNQUOTED;\n              buffer = 'attribValue';\n              break\n          }\n\n          if (c === ';') {\n            parser[buffer] += parseEntity(parser);\n            parser.entity = '';\n            parser.state = returnState;\n          } else if (isMatch(parser.entity.length ? entityBody : entityStart, c)) {\n            parser.entity += c;\n          } else {\n            strictFail(parser, 'Invalid character in entity name');\n            parser[buffer] += '&' + parser.entity + c;\n            parser.entity = '';\n            parser.state = returnState;\n          }\n\n          continue\n\n        default:\n          throw new Error(parser, 'Unknown state: ' + parser.state)\n      }\n    } // while\n\n    if (parser.position >= parser.bufferCheckPosition) {\n      checkBufferLength(parser);\n    }\n    return parser\n  }\n\n  /*! http://mths.be/fromcodepoint v0.1.0 by @mathias */\n  /* istanbul ignore next */\n  if (!String.fromCodePoint) {\n    (function () {\n      var stringFromCharCode = String.fromCharCode;\n      var floor = Math.floor;\n      var fromCodePoint = function () {\n        var MAX_SIZE = 0x4000;\n        var codeUnits = [];\n        var highSurrogate;\n        var lowSurrogate;\n        var index = -1;\n        var length = arguments.length;\n        if (!length) {\n          return ''\n        }\n        var result = '';\n        while (++index < length) {\n          var codePoint = Number(arguments[index]);\n          if (\n            !isFinite(codePoint) || // `NaN`, `+Infinity`, or `-Infinity`\n            codePoint < 0 || // not a valid Unicode code point\n            codePoint > 0x10FFFF || // not a valid Unicode code point\n            floor(codePoint) !== codePoint // not an integer\n          ) {\n            throw RangeError('Invalid code point: ' + codePoint)\n          }\n          if (codePoint <= 0xFFFF) { // BMP code point\n            codeUnits.push(codePoint);\n          } else { // Astral code point; split in surrogate halves\n            // http://mathiasbynens.be/notes/javascript-encoding#surrogate-formulae\n            codePoint -= 0x10000;\n            highSurrogate = (codePoint >> 10) + 0xD800;\n            lowSurrogate = (codePoint % 0x400) + 0xDC00;\n            codeUnits.push(highSurrogate, lowSurrogate);\n          }\n          if (index + 1 === length || codeUnits.length > MAX_SIZE) {\n            result += stringFromCharCode.apply(null, codeUnits);\n            codeUnits.length = 0;\n          }\n        }\n        return result\n      };\n      /* istanbul ignore next */\n      if (Object.defineProperty) {\n        Object.defineProperty(String, 'fromCodePoint', {\n          value: fromCodePoint,\n          configurable: true,\n          writable: true\n        });\n      } else {\n        String.fromCodePoint = fromCodePoint;\n      }\n    }());\n  }\n})( exports);\n});\n\nvar bom = createCommonjsModule(function (module, exports) {\n// Generated by CoffeeScript 1.12.7\n(function() {\n  exports.stripBOM = function(str) {\n    if (str[0] === '\\uFEFF') {\n      return str.substring(1);\n    } else {\n      return str;\n    }\n  };\n\n}).call(commonjsGlobal);\n});\nvar bom_1 = bom.stripBOM;\n\nvar processors = createCommonjsModule(function (module, exports) {\n// Generated by CoffeeScript 1.12.7\n(function() {\n  var prefixMatch;\n\n  prefixMatch = new RegExp(/(?!xmlns)^.*:/);\n\n  exports.normalize = function(str) {\n    return str.toLowerCase();\n  };\n\n  exports.firstCharLowerCase = function(str) {\n    return str.charAt(0).toLowerCase() + str.slice(1);\n  };\n\n  exports.stripPrefix = function(str) {\n    return str.replace(prefixMatch, '');\n  };\n\n  exports.parseNumbers = function(str) {\n    if (!isNaN(str)) {\n      str = str % 1 === 0 ? parseInt(str, 10) : parseFloat(str);\n    }\n    return str;\n  };\n\n  exports.parseBooleans = function(str) {\n    if (/^(?:true|false)$/i.test(str)) {\n      str = str.toLowerCase() === 'true';\n    }\n    return str;\n  };\n\n}).call(commonjsGlobal);\n});\nvar processors_1 = processors.normalize;\nvar processors_2 = processors.firstCharLowerCase;\nvar processors_3 = processors.stripPrefix;\nvar processors_4 = processors.parseNumbers;\nvar processors_5 = processors.parseBooleans;\n\nvar parser = createCommonjsModule(function (module, exports) {\n// Generated by CoffeeScript 1.12.7\n(function() {\n  var bom$1, defaults$1, events$1, isEmpty, processItem, processors$1, sax$1, setImmediate,\n    bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; },\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  sax$1 = sax;\n\n  events$1 = events;\n\n  bom$1 = bom;\n\n  processors$1 = processors;\n\n  setImmediate = timers.setImmediate;\n\n  defaults$1 = defaults.defaults;\n\n  isEmpty = function(thing) {\n    return typeof thing === \"object\" && (thing != null) && Object.keys(thing).length === 0;\n  };\n\n  processItem = function(processors, item, key) {\n    var i, len, process;\n    for (i = 0, len = processors.length; i < len; i++) {\n      process = processors[i];\n      item = process(item, key);\n    }\n    return item;\n  };\n\n  exports.Parser = (function(superClass) {\n    extend(Parser, superClass);\n\n    function Parser(opts) {\n      this.parseStringPromise = bind(this.parseStringPromise, this);\n      this.parseString = bind(this.parseString, this);\n      this.reset = bind(this.reset, this);\n      this.assignOrPush = bind(this.assignOrPush, this);\n      this.processAsync = bind(this.processAsync, this);\n      var key, ref, value;\n      if (!(this instanceof exports.Parser)) {\n        return new exports.Parser(opts);\n      }\n      this.options = {};\n      ref = defaults$1[\"0.2\"];\n      for (key in ref) {\n        if (!hasProp.call(ref, key)) continue;\n        value = ref[key];\n        this.options[key] = value;\n      }\n      for (key in opts) {\n        if (!hasProp.call(opts, key)) continue;\n        value = opts[key];\n        this.options[key] = value;\n      }\n      if (this.options.xmlns) {\n        this.options.xmlnskey = this.options.attrkey + \"ns\";\n      }\n      if (this.options.normalizeTags) {\n        if (!this.options.tagNameProcessors) {\n          this.options.tagNameProcessors = [];\n        }\n        this.options.tagNameProcessors.unshift(processors$1.normalize);\n      }\n      this.reset();\n    }\n\n    Parser.prototype.processAsync = function() {\n      var chunk, err;\n      try {\n        if (this.remaining.length <= this.options.chunkSize) {\n          chunk = this.remaining;\n          this.remaining = '';\n          this.saxParser = this.saxParser.write(chunk);\n          return this.saxParser.close();\n        } else {\n          chunk = this.remaining.substr(0, this.options.chunkSize);\n          this.remaining = this.remaining.substr(this.options.chunkSize, this.remaining.length);\n          this.saxParser = this.saxParser.write(chunk);\n          return setImmediate(this.processAsync);\n        }\n      } catch (error1) {\n        err = error1;\n        if (!this.saxParser.errThrown) {\n          this.saxParser.errThrown = true;\n          return this.emit(err);\n        }\n      }\n    };\n\n    Parser.prototype.assignOrPush = function(obj, key, newValue) {\n      if (!(key in obj)) {\n        if (!this.options.explicitArray) {\n          return obj[key] = newValue;\n        } else {\n          return obj[key] = [newValue];\n        }\n      } else {\n        if (!(obj[key] instanceof Array)) {\n          obj[key] = [obj[key]];\n        }\n        return obj[key].push(newValue);\n      }\n    };\n\n    Parser.prototype.reset = function() {\n      var attrkey, charkey, ontext, stack;\n      this.removeAllListeners();\n      this.saxParser = sax$1.parser(this.options.strict, {\n        trim: false,\n        normalize: false,\n        xmlns: this.options.xmlns\n      });\n      this.saxParser.errThrown = false;\n      this.saxParser.onerror = (function(_this) {\n        return function(error) {\n          _this.saxParser.resume();\n          if (!_this.saxParser.errThrown) {\n            _this.saxParser.errThrown = true;\n            return _this.emit(\"error\", error);\n          }\n        };\n      })(this);\n      this.saxParser.onend = (function(_this) {\n        return function() {\n          if (!_this.saxParser.ended) {\n            _this.saxParser.ended = true;\n            return _this.emit(\"end\", _this.resultObject);\n          }\n        };\n      })(this);\n      this.saxParser.ended = false;\n      this.EXPLICIT_CHARKEY = this.options.explicitCharkey;\n      this.resultObject = null;\n      stack = [];\n      attrkey = this.options.attrkey;\n      charkey = this.options.charkey;\n      this.saxParser.onopentag = (function(_this) {\n        return function(node) {\n          var key, newValue, obj, processedKey, ref;\n          obj = Object.create(null);\n          obj[charkey] = \"\";\n          if (!_this.options.ignoreAttrs) {\n            ref = node.attributes;\n            for (key in ref) {\n              if (!hasProp.call(ref, key)) continue;\n              if (!(attrkey in obj) && !_this.options.mergeAttrs) {\n                obj[attrkey] = Object.create(null);\n              }\n              newValue = _this.options.attrValueProcessors ? processItem(_this.options.attrValueProcessors, node.attributes[key], key) : node.attributes[key];\n              processedKey = _this.options.attrNameProcessors ? processItem(_this.options.attrNameProcessors, key) : key;\n              if (_this.options.mergeAttrs) {\n                _this.assignOrPush(obj, processedKey, newValue);\n              } else {\n                obj[attrkey][processedKey] = newValue;\n              }\n            }\n          }\n          obj[\"#name\"] = _this.options.tagNameProcessors ? processItem(_this.options.tagNameProcessors, node.name) : node.name;\n          if (_this.options.xmlns) {\n            obj[_this.options.xmlnskey] = {\n              uri: node.uri,\n              local: node.local\n            };\n          }\n          return stack.push(obj);\n        };\n      })(this);\n      this.saxParser.onclosetag = (function(_this) {\n        return function() {\n          var cdata, emptyStr, key, node, nodeName, obj, objClone, old, s, xpath;\n          obj = stack.pop();\n          nodeName = obj[\"#name\"];\n          if (!_this.options.explicitChildren || !_this.options.preserveChildrenOrder) {\n            delete obj[\"#name\"];\n          }\n          if (obj.cdata === true) {\n            cdata = obj.cdata;\n            delete obj.cdata;\n          }\n          s = stack[stack.length - 1];\n          if (obj[charkey].match(/^\\s*$/) && !cdata) {\n            emptyStr = obj[charkey];\n            delete obj[charkey];\n          } else {\n            if (_this.options.trim) {\n              obj[charkey] = obj[charkey].trim();\n            }\n            if (_this.options.normalize) {\n              obj[charkey] = obj[charkey].replace(/\\s{2,}/g, \" \").trim();\n            }\n            obj[charkey] = _this.options.valueProcessors ? processItem(_this.options.valueProcessors, obj[charkey], nodeName) : obj[charkey];\n            if (Object.keys(obj).length === 1 && charkey in obj && !_this.EXPLICIT_CHARKEY) {\n              obj = obj[charkey];\n            }\n          }\n          if (isEmpty(obj)) {\n            if (typeof _this.options.emptyTag === 'function') {\n              obj = _this.options.emptyTag();\n            } else {\n              obj = _this.options.emptyTag !== '' ? _this.options.emptyTag : emptyStr;\n            }\n          }\n          if (_this.options.validator != null) {\n            xpath = \"/\" + ((function() {\n              var i, len, results;\n              results = [];\n              for (i = 0, len = stack.length; i < len; i++) {\n                node = stack[i];\n                results.push(node[\"#name\"]);\n              }\n              return results;\n            })()).concat(nodeName).join(\"/\");\n            (function() {\n              var err;\n              try {\n                return obj = _this.options.validator(xpath, s && s[nodeName], obj);\n              } catch (error1) {\n                err = error1;\n                return _this.emit(\"error\", err);\n              }\n            })();\n          }\n          if (_this.options.explicitChildren && !_this.options.mergeAttrs && typeof obj === 'object') {\n            if (!_this.options.preserveChildrenOrder) {\n              node = Object.create(null);\n              if (_this.options.attrkey in obj) {\n                node[_this.options.attrkey] = obj[_this.options.attrkey];\n                delete obj[_this.options.attrkey];\n              }\n              if (!_this.options.charsAsChildren && _this.options.charkey in obj) {\n                node[_this.options.charkey] = obj[_this.options.charkey];\n                delete obj[_this.options.charkey];\n              }\n              if (Object.getOwnPropertyNames(obj).length > 0) {\n                node[_this.options.childkey] = obj;\n              }\n              obj = node;\n            } else if (s) {\n              s[_this.options.childkey] = s[_this.options.childkey] || [];\n              objClone = Object.create(null);\n              for (key in obj) {\n                if (!hasProp.call(obj, key)) continue;\n                objClone[key] = obj[key];\n              }\n              s[_this.options.childkey].push(objClone);\n              delete obj[\"#name\"];\n              if (Object.keys(obj).length === 1 && charkey in obj && !_this.EXPLICIT_CHARKEY) {\n                obj = obj[charkey];\n              }\n            }\n          }\n          if (stack.length > 0) {\n            return _this.assignOrPush(s, nodeName, obj);\n          } else {\n            if (_this.options.explicitRoot) {\n              old = obj;\n              obj = Object.create(null);\n              obj[nodeName] = old;\n            }\n            _this.resultObject = obj;\n            _this.saxParser.ended = true;\n            return _this.emit(\"end\", _this.resultObject);\n          }\n        };\n      })(this);\n      ontext = (function(_this) {\n        return function(text) {\n          var charChild, s;\n          s = stack[stack.length - 1];\n          if (s) {\n            s[charkey] += text;\n            if (_this.options.explicitChildren && _this.options.preserveChildrenOrder && _this.options.charsAsChildren && (_this.options.includeWhiteChars || text.replace(/\\\\n/g, '').trim() !== '')) {\n              s[_this.options.childkey] = s[_this.options.childkey] || [];\n              charChild = {\n                '#name': '__text__'\n              };\n              charChild[charkey] = text;\n              if (_this.options.normalize) {\n                charChild[charkey] = charChild[charkey].replace(/\\s{2,}/g, \" \").trim();\n              }\n              s[_this.options.childkey].push(charChild);\n            }\n            return s;\n          }\n        };\n      })(this);\n      this.saxParser.ontext = ontext;\n      return this.saxParser.oncdata = (function(_this) {\n        return function(text) {\n          var s;\n          s = ontext(text);\n          if (s) {\n            return s.cdata = true;\n          }\n        };\n      })();\n    };\n\n    Parser.prototype.parseString = function(str, cb) {\n      var err;\n      if ((cb != null) && typeof cb === \"function\") {\n        this.on(\"end\", function(result) {\n          this.reset();\n          return cb(null, result);\n        });\n        this.on(\"error\", function(err) {\n          this.reset();\n          return cb(err);\n        });\n      }\n      try {\n        str = str.toString();\n        if (str.trim() === '') {\n          this.emit(\"end\", null);\n          return true;\n        }\n        str = bom$1.stripBOM(str);\n        if (this.options.async) {\n          this.remaining = str;\n          setImmediate(this.processAsync);\n          return this.saxParser;\n        }\n        return this.saxParser.write(str).close();\n      } catch (error1) {\n        err = error1;\n        if (!(this.saxParser.errThrown || this.saxParser.ended)) {\n          this.emit('error', err);\n          return this.saxParser.errThrown = true;\n        } else if (this.saxParser.ended) {\n          throw err;\n        }\n      }\n    };\n\n    Parser.prototype.parseStringPromise = function(str) {\n      return new Promise((function(_this) {\n        return function(resolve, reject) {\n          return _this.parseString(str, function(err, value) {\n            if (err) {\n              return reject(err);\n            } else {\n              return resolve(value);\n            }\n          });\n        };\n      })(this));\n    };\n\n    return Parser;\n\n  })(events$1);\n\n  exports.parseString = function(str, a, b) {\n    var cb, options, parser;\n    if (b != null) {\n      if (typeof b === 'function') {\n        cb = b;\n      }\n      if (typeof a === 'object') {\n        options = a;\n      }\n    } else {\n      if (typeof a === 'function') {\n        cb = a;\n      }\n      options = {};\n    }\n    parser = new exports.Parser(options);\n    return parser.parseString(str, cb);\n  };\n\n  exports.parseStringPromise = function(str, a) {\n    var options, parser;\n    if (typeof a === 'object') {\n      options = a;\n    }\n    parser = new exports.Parser(options);\n    return parser.parseStringPromise(str);\n  };\n\n}).call(commonjsGlobal);\n});\nvar parser_1 = parser.Parser;\nvar parser_2 = parser.parseString;\nvar parser_3 = parser.parseStringPromise;\n\nvar xml2js = createCommonjsModule(function (module, exports) {\n// Generated by CoffeeScript 1.12.7\n(function() {\n  var builder$1, defaults$1, parser$1, processors$1,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  defaults$1 = defaults;\n\n  builder$1 = builder;\n\n  parser$1 = parser;\n\n  processors$1 = processors;\n\n  exports.defaults = defaults$1.defaults;\n\n  exports.processors = processors$1;\n\n  exports.ValidationError = (function(superClass) {\n    extend(ValidationError, superClass);\n\n    function ValidationError(message) {\n      this.message = message;\n    }\n\n    return ValidationError;\n\n  })(Error);\n\n  exports.Builder = builder$1.Builder;\n\n  exports.Parser = parser$1.Parser;\n\n  exports.parseString = parser$1.parseString;\n\n  exports.parseStringPromise = parser$1.parseStringPromise;\n\n}).call(commonjsGlobal);\n});\nvar xml2js_1 = xml2js.defaults;\nvar xml2js_2 = xml2js.processors;\nvar xml2js_3 = xml2js.ValidationError;\nvar xml2js_4 = xml2js.Builder;\nvar xml2js_5 = xml2js.Parser;\nvar xml2js_6 = xml2js.parseString;\nvar xml2js_7 = xml2js.parseStringPromise;\n\nvar parser$1 = new xml2js.Parser();\nfunction parse(tu, obj, srclang) {\n  var hasTuid;\n  var key;\n  if (!tu.$ || !tu.$.tuid) {\n    var foundEntry = tu.tuv.find(function (entry) {\n      return entry.$['xml:lang'] === srclang;\n    });\n    if (!foundEntry || !foundEntry.seg[0]) return;\n    key = foundEntry.seg[0];\n    hasTuid = false;\n  } else {\n    key = tu.$.tuid;\n    hasTuid = true;\n  }\n  obj[key] = obj[key] || {};\n  tu.tuv.forEach(function (entry) {\n    var lng = entry.$['xml:lang'];\n    obj[key][lng] = entry.seg[0];\n  });\n  return hasTuid;\n}\nfunction getGroupProp(props) {\n  for (var i = 0, len = props.length; i < len; i++) {\n    if (props[i].$ && props[i].$.type === 'group') return props[i]._;\n  }\n  return null;\n}\nfunction tmx2jsClb(str, cb) {\n  if (typeof str !== 'string') {\n    var err = new Error('The first parameter was not a string');\n    if (!cb) throw err;\n    return cb(err);\n  }\n  var result = {\n    resources: {}\n  };\n  parser$1.parseString(str, function (err, data) {\n    if (err) return cb(err);\n    var datatype = data.tmx.header[0].$.datatype;\n    var segtype = data.tmx.header[0].$.segtype;\n    var oTMF = data.tmx.header[0].$['o-tmf'];\n    if (!datatype) err = new Error('datatype must be set');\n    if (!segtype) err = new Error('segtype must be set');\n    if (!oTMF) err = new Error('o-tmf must be set');\n    if (err) return cb(err);\n    var version = data.tmx.$.version;\n    var srclang = data.tmx.header[0].$.srclang;\n    var creationtool = data.tmx.header[0].$.creationtool;\n    var creationtoolversion = data.tmx.header[0].$.creationtoolversion;\n    var adminlang = data.tmx.header[0].$.adminlang;\n    result.version = version;\n    result.sourceLanguage = srclang;\n    result.creationTool = creationtool;\n    result.creationToolVersion = creationtoolversion;\n    result.administrationLanguage = adminlang;\n    result.datatype = datatype;\n    result.oTMF = oTMF;\n    if (data.tmx.body[0].tu) {\n      data.tmx.body[0].tu.forEach(function (tu) {\n        if (tu.prop && tu.prop.length > 0 && getGroupProp(tu.prop)) {\n          var namespace = getGroupProp(tu.prop);\n          result.resources[namespace] = result.resources[namespace] || {};\n          result.tuid = parse(tu, result.resources[namespace], srclang);\n          return;\n        }\n        result.tuid = parse(tu, result.resources, srclang);\n      });\n    }\n    cb(null, result);\n  });\n}\nfunction tmx2js(str, cb) {\n  if (!cb) {\n    return new Promise(function (resolve, reject) {\n      return tmx2jsClb(str, function (err, ret) {\n        return err ? reject(err) : resolve(ret);\n      });\n    });\n  }\n  tmx2jsClb(str, cb);\n}\n\nvar name = \"tmexchange\";\nvar version = \"2.0.5\";\nvar description = \"tmx2js and js2tmx converter tmx utils\";\nvar type = \"module\";\nvar main = \"./cjs/index.js\";\nvar exports = {\n\t\".\": {\n\t\trequire: \"./cjs/index.js\",\n\t\t\"default\": \"./esm/index.js\"\n\t},\n\t\"./tmx2js\": {\n\t\trequire: \"./cjs/tmx2js.js\",\n\t\t\"default\": \"./esm/tmx2js.js\"\n\t},\n\t\"./js2tmx\": {\n\t\trequire: \"./cjs/js2tmx.js\",\n\t\t\"default\": \"./esm/js2tmx.js\"\n\t},\n\t\"./cjs\": {\n\t\t\"default\": \"./cjs/index.js\"\n\t},\n\t\"./cjs/tmx2js\": {\n\t\t\"default\": \"./cjs/tmx2js.js\"\n\t},\n\t\"./cjs/js2tmx\": {\n\t\t\"default\": \"./cjs/js2tmx.js\"\n\t},\n\t\"./esm\": {\n\t\t\"default\": \"./esm/index.js\"\n\t},\n\t\"./esm/tmx2js\": {\n\t\t\"default\": \"./esm/tmx2js.js\"\n\t},\n\t\"./esm/js2tmx\": {\n\t\t\"default\": \"./esm/js2tmx.js\"\n\t}\n};\nvar module = \"./esm/index.js\";\nvar dependencies = {\n\txml2js: \"0.5.0\"\n};\nvar devDependencies = {\n\t\"@babel/cli\": \"7.21.5\",\n\t\"@babel/core\": \"7.21.8\",\n\t\"@babel/preset-env\": \"7.21.5\",\n\t\"babel-plugin-add-module-exports\": \"1.0.4\",\n\tbrowserify: \"17.0.0\",\n\teslint: \"8.41.0\",\n\t\"eslint-config-standard\": \"17.0.0\",\n\t\"eslint-plugin-import\": \"2.27.5\",\n\t\"eslint-plugin-node\": \"11.1.0\",\n\t\"eslint-plugin-promise\": \"6.1.1\",\n\t\"eslint-plugin-require-path-exists\": \"1.1.9\",\n\t\"eslint-plugin-standard\": \"4.1.0\",\n\t\"expect.js\": \"0.3.1\",\n\tmocha: \"10.2.0\",\n\t\"uglify-js\": \"3.17.4\"\n};\nvar scripts = {\n\tlint: \"eslint .\",\n\t\"compile:esm\": \"rm -rf esm && mkdir esm && BABEL_ENV=esm babel lib -d esm\",\n\t\"compile:cjs\": \"rm -rf cjs && mkdir cjs && BABEL_ENV=cjs babel lib -d cjs && echo '{\\\"type\\\":\\\"commonjs\\\"}' > cjs/package.json\",\n\tcompile: \"npm run compile:esm && npm run compile:cjs\",\n\tbrowser: \"browserify --standalone tmexchange cjs/index.js -o tmexchange.js && uglifyjs tmexchange.js --compress --mangle -o tmexchange.min.js\",\n\tbuild: \"npm run compile && npm run browser\",\n\ttest: \"npm run lint && npm run build && mocha test -R spec\",\n\tpreversion: \"npm run test && npm run build && git push\",\n\tpostversion: \"git push && git push --tags\"\n};\nvar keywords = [\n\t\"tmx\",\n\t\"json\",\n\t\"js\",\n\t\"translation\"\n];\nvar author = \"adrai\";\nvar license = \"MIT\";\nvar homepage = \"http://locize.com\";\nvar repository = {\n\ttype: \"git\",\n\turl: \"git+https://github.com/locize/tmexchange.git\"\n};\nvar packageJSON = {\n\tname: name,\n\tversion: version,\n\tdescription: description,\n\ttype: type,\n\tmain: main,\n\texports: exports,\n\tmodule: module,\n\tdependencies: dependencies,\n\tdevDependencies: devDependencies,\n\tscripts: scripts,\n\tkeywords: keywords,\n\tauthor: author,\n\tlicense: license,\n\thomepage: homepage,\n\trepository: repository\n};\n\nvar js2tmxClb = function js2tmxClb(obj, opt, cb) {\n  if (!cb && typeof opt === 'function') {\n    cb = opt;\n    opt = {\n      pretty: true,\n      indent: '  ',\n      newline: '\\n'\n    };\n  }\n  opt = opt || {\n    pretty: true,\n    indent: '  ',\n    newline: '\\n'\n  };\n  if (!obj.sourceLanguage) {\n    var err = new Error('Please define sourceLanguage!');\n    if (cb) return cb(err);\n    throw err;\n  }\n  var builder = new xml2js.Builder({\n    rootName: 'tmx',\n    headless: opt.headless !== undefined ? opt.headless : true,\n    renderOpts: {\n      pretty: opt.pretty !== false,\n      indent: opt.indent || '  ',\n      newline: opt.newline || '\\n'\n    }\n  });\n  obj.tuid = obj.tuid !== undefined ? obj.tuid : true;\n  var xmlJs = {\n    $: {\n      version: obj.version || '1.4b'\n    },\n    header: {\n      $: {\n        creationtool: obj.creationTool || packageJSON.name,\n        creationtoolversion: obj.creationToolVersion || packageJSON.version,\n        adminlang: obj.administrationLanguage || obj.sourceLanguage,\n        datatype: obj.datatype || 'PlainText',\n        segtype: obj.segtype || 'sentence',\n        'o-tmf': obj.oTMF || 'ABCTransMem',\n        srclang: obj.sourceLanguage\n      }\n    },\n    body: {\n      tu: []\n    }\n  };\n  Object.keys(obj.resources).forEach(function (nsName) {\n    var possibleNoNsTu = {\n      $: {},\n      tuv: []\n    };\n    if (obj.tuid) possibleNoNsTu.$.tuid = nsName;\n    Object.keys(obj.resources[nsName]).forEach(function (k, i) {\n      if (typeof obj.resources[nsName][k] === 'string') {\n        if (i === 0) xmlJs.body.tu.push(possibleNoNsTu);\n        var noNsTuv = {\n          $: {\n            'xml:lang': k\n          },\n          seg: obj.resources[nsName][k].replace(/\\f/g, '')\n        };\n        possibleNoNsTu.tuv.push(noNsTuv);\n        return;\n      }\n      var tu = {\n        $: {},\n        prop: {\n          $: {\n            type: 'group'\n          },\n          _: nsName\n        },\n        tuv: []\n      };\n      if (obj.tuid) tu.$.tuid = k;\n      xmlJs.body.tu.push(tu);\n      Object.keys(obj.resources[nsName][k]).forEach(function (l) {\n        var tuv = {\n          $: {\n            'xml:lang': l\n          },\n          seg: obj.resources[nsName][k][l].replace(/\\f/g, '')\n        };\n        tu.tuv.push(tuv);\n      });\n    });\n  });\n  var xml = builder.buildObject(xmlJs);\n  if (cb) cb(null, xml);\n  return xml;\n};\nfunction js2tmx(obj, opt, cb) {\n  if (!cb && opt === undefined) {\n    return new Promise(function (resolve, reject) {\n      return js2tmxClb(obj, opt, function (err, ret) {\n        return err ? reject(err) : resolve(ret);\n      });\n    });\n  }\n  if (!cb && typeof opt !== 'function') {\n    return new Promise(function (resolve, reject) {\n      return js2tmxClb(obj, opt, function (err, ret) {\n        return err ? reject(err) : resolve(ret);\n      });\n    });\n  }\n  js2tmxClb(obj, opt, cb);\n}\n\nvar index = {\n  tmx2js: tmx2js,\n  js2tmx: js2tmx\n};\n\nexport default index;\nexport { js2tmx, tmx2js };\n"],"names":["commonjsGlobal","globalThis","window","global","self","createCommonjsModule","fn","module","exports","defaults","explicitCharkey","trim","normalize","normalizeTags","attrkey","charkey","explicitArray","ignoreAttrs","mergeAttrs","explicitRoot","validator","xmlns","explicitChildren","childkey","charsAsChildren","includeWhiteChars","async","strict","attrNameProcessors","attrValueProcessors","tagNameProcessors","valueProcessors","emptyTag","preserveChildrenOrder","rootName","xmldec","doctype","renderOpts","headless","chunkSize","cdata","call","builder","defaults$1","escapeCDATA","requiresCDATA","wrapCDATA","hasProp","hasOwnProperty","xmlbuilder","entry","indexOf","replace","Builder","opts","key","ref","value","this","options","prototype","buildObject","rootObj","render","rootElement","_this","Object","keys","length","element","obj","attr","child","index","raw","txt","Array","isArray","ele","up","att","toString","create","allowSurrogateChars","end","sax","parser","opt","SAXParser","SAXStream","createStream","MAX_BUFFER_LENGTH","Stream","buffers","i","l","clearBuffers","q","c","bufferCheckPosition","lowercase","lowercasetags","looseCase","tags","closed","closedRoot","sawRoot","tag","error","noscript","state","S","BEGIN","strictEntities","ENTITIES","XML_ENTITIES","attribList","ns","rootNS","trackPosition","position","line","column","emit","EVENTS","o","F","a","push","write","chunk","charAt","BEGIN_WHITESPACE","beginWhiteSpace","TEXT","starti","textNode","substring","isWhitespace","strictFail","TEXT_ENTITY","OPEN_WAKA","startTagPosition","SCRIPT","SCRIPT_ENDING","script","CLOSE_TAG","SGML_DECL","sgmlDecl","isMatch","nameStart","OPEN_TAG","tagName","PROC_INST","procInstName","procInstBody","pad","join","toUpperCase","emitNode","CDATA","COMMENT","comment","DOCTYPE","isQuote","SGML_DECL_QUOTED","DOCTYPE_DTD","DOCTYPE_QUOTED","DOCTYPE_DTD_QUOTED","COMMENT_ENDING","COMMENT_ENDED","textopts","CDATA_ENDING","CDATA_ENDING_2","PROC_INST_ENDING","PROC_INST_BODY","name","body","nameBody","newTag","openTag","OPEN_TAG_SLASH","ATTRIB","closeTag","attribName","attribValue","ATTRIB_NAME","ATTRIB_VALUE","attrib","ATTRIB_NAME_SAW_WHITE","attributes","ATTRIB_VALUE_QUOTED","ATTRIB_VALUE_UNQUOTED","ATTRIB_VALUE_ENTITY_Q","ATTRIB_VALUE_CLOSED","isAttribEnd","ATTRIB_VALUE_ENTITY_U","CLOSE_TAG_SAW_WHITE","notMatch","returnState","buffer","parseEntity","entity","entityBody","entityStart","Error","maxAllowed","Math","max","maxActual","len","closeText","m","checkBufferLength","resume","close","flush","flushBuffers","stream","ex","streamWraps","filter","ev","apply","_parser","writable","readable","me","onend","onerror","er","_decoder","forEach","defineProperty","get","set","h","removeAllListeners","on","enumerable","configurable","constructor","data","Buffer","isBuffer","SD","string_decoder","handler","args","arguments","splice","XML_NAMESPACE","XMLNS_NAMESPACE","xml","regex","test","s","STATE","COMMENT_STARTING","e","String","fromCharCode","event","nodeType","text","message","parent","qname","attribute","qualName","split","prefix","local","qn","selfClosing","uri","JSON","stringify","p","nv","isSelfClosing","toLowerCase","t","closeTo","pop","x","n","num","entityLC","numStr","slice","parseInt","isNaN","fromCodePoint","result","stringFromCharCode","floor","highSurrogate","lowSurrogate","MAX_SIZE","codeUnits","codePoint","Number","isFinite","RangeError","bom","stripBOM","str","processors","prefixMatch","RegExp","firstCharLowerCase","stripPrefix","parseNumbers","parseFloat","parseBooleans","bom$1","events$1","isEmpty","processItem","processors$1","sax$1","setImmediate","bind","events","timers","thing","item","process","Parser","superClass","parseStringPromise","parseString","reset","assignOrPush","processAsync","xmlnskey","unshift","ctor","__super__","extend","err","remaining","saxParser","substr","error1","errThrown","newValue","ontext","stack","ended","resultObject","EXPLICIT_CHARKEY","onopentag","node","processedKey","onclosetag","emptyStr","nodeName","objClone","old","xpath","match","results","concat","getOwnPropertyNames","charChild","oncdata","cb","Promise","resolve","reject","b","xml2js","builder$1","parser$1","ValidationError","parse","tu","srclang","hasTuid","$","tuid","foundEntry","tuv","find","seg","lng","getGroupProp","props","type","_","tmx2jsClb","resources","datatype","tmx","header","segtype","oTMF","version","creationtool","creationtoolversion","adminlang","sourceLanguage","creationTool","creationToolVersion","administrationLanguage","prop","namespace","tmx2js","ret","packageJSON","js2tmxClb","pretty","indent","newline","undefined","xmlJs","nsName","possibleNoNsTu","k","noNsTuv","js2tmx"],"sourceRoot":""}